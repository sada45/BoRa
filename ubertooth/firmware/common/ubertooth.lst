ARM GAS  /tmp/ccQmV08g.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"ubertooth.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.spi_delay,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	spi_delay:
  24              	.LFB19:
  25              		.file 1 "../common/ubertooth.c"
   1:../common/ubertooth.c **** /*
   2:../common/ubertooth.c ****  * Copyright 2010, 2011 Michael Ossmann
   3:../common/ubertooth.c ****  *
   4:../common/ubertooth.c ****  * This file is part of Project Ubertooth.
   5:../common/ubertooth.c ****  *
   6:../common/ubertooth.c ****  * This program is free software; you can redistribute it and/or modify
   7:../common/ubertooth.c ****  * it under the terms of the GNU General Public License as published by
   8:../common/ubertooth.c ****  * the Free Software Foundation; either version 2, or (at your option)
   9:../common/ubertooth.c ****  * any later version.
  10:../common/ubertooth.c ****  *
  11:../common/ubertooth.c ****  * This program is distributed in the hope that it will be useful,
  12:../common/ubertooth.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:../common/ubertooth.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:../common/ubertooth.c ****  * GNU General Public License for more details.
  15:../common/ubertooth.c ****  *
  16:../common/ubertooth.c ****  * You should have received a copy of the GNU General Public License
  17:../common/ubertooth.c ****  * along with this program; see the file COPYING.  If not, write to
  18:../common/ubertooth.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  19:../common/ubertooth.c ****  * Boston, MA 02110-1301, USA.
  20:../common/ubertooth.c ****  */
  21:../common/ubertooth.c **** 
  22:../common/ubertooth.c **** #include "ubertooth.h"
  23:../common/ubertooth.c **** 
  24:../common/ubertooth.c **** #define IAP_LOCATION 0x1FFF1FF1
  25:../common/ubertooth.c **** const IAP_ENTRY iap_entry = (IAP_ENTRY)IAP_LOCATION;
  26:../common/ubertooth.c **** 
  27:../common/ubertooth.c **** uint32_t msb8 = 1 << 7;
  28:../common/ubertooth.c **** uint16_t msb16 = 1 << 15;
  29:../common/ubertooth.c **** uint16_t msbs[16];
  30:../common/ubertooth.c **** /* BoRa: for continues SPI writing, we should check the current writting register */
  31:../common/ubertooth.c **** uint8_t cur_reg = 0; 
  32:../common/ubertooth.c **** 
  33:../common/ubertooth.c **** /* delay a number of seconds while on internal oscillator (4 MHz) */
ARM GAS  /tmp/ccQmV08g.s 			page 2


  34:../common/ubertooth.c **** void wait(u8 seconds)
  35:../common/ubertooth.c **** {
  36:../common/ubertooth.c **** 	wait_us(seconds * 1000000);
  37:../common/ubertooth.c **** }
  38:../common/ubertooth.c **** 
  39:../common/ubertooth.c **** /* delay a number of milliseconds while on internal oscillator (4 MHz) */
  40:../common/ubertooth.c **** void wait_ms(u32 ms)
  41:../common/ubertooth.c **** {
  42:../common/ubertooth.c **** 	wait_us(ms * 1000);
  43:../common/ubertooth.c **** }
  44:../common/ubertooth.c **** 
  45:../common/ubertooth.c **** /* efficiently reverse the bits of a 32-bit word */
  46:../common/ubertooth.c **** u32 rbit(u32 value) {
  47:../common/ubertooth.c ****   u32 result = 0;
  48:../common/ubertooth.c ****   asm("rbit %0, %1" : "=r" (result) : "r" (value));
  49:../common/ubertooth.c ****   return result;
  50:../common/ubertooth.c **** }
  51:../common/ubertooth.c **** 
  52:../common/ubertooth.c **** u8 rbit8(u8 value) {
  53:../common/ubertooth.c ****   u32 result = 0;
  54:../common/ubertooth.c ****   asm("rbit %0, %1" : "=r" (result) : "r" ((uint32_t)value));
  55:../common/ubertooth.c ****   return (uint8_t)(result >> 24);
  56:../common/ubertooth.c **** }
  57:../common/ubertooth.c **** 
  58:../common/ubertooth.c **** /* delay a number of microseconds while on internal oscillator (4 MHz) */
  59:../common/ubertooth.c **** /* we only have a resolution of 1000/400, so to the nearest 2.5        */
  60:../common/ubertooth.c **** static volatile u32 wait_us_counter;
  61:../common/ubertooth.c **** void wait_us(u32 us)
  62:../common/ubertooth.c **** {
  63:../common/ubertooth.c **** 	/* This is binary multiply by ~0.3999, i.e, multiply by
  64:../common/ubertooth.c **** 	   0.011011011b. The loop also contains 6 instructions at -Os, so
  65:../common/ubertooth.c **** 	   why this factor works is not at all related to the comment
  66:../common/ubertooth.c **** 	   above ;-) */
  67:../common/ubertooth.c **** 	wait_us_counter =
  68:../common/ubertooth.c **** 		(us>>2) + (us>>3) + (us>>6) + (us>>7) + (us>>10) + (us>>11);
  69:../common/ubertooth.c **** 	while(--wait_us_counter);
  70:../common/ubertooth.c **** }
  71:../common/ubertooth.c **** 
  72:../common/ubertooth.c **** 
  73:../common/ubertooth.c **** /*
  74:../common/ubertooth.c ****  * This should be called very early by every firmware in order to ensure safe
  75:../common/ubertooth.c ****  * operating conditions for the CC2400.
  76:../common/ubertooth.c ****  */
  77:../common/ubertooth.c **** void gpio_init()
  78:../common/ubertooth.c **** {
  79:../common/ubertooth.c **** 	/* 
  80:../common/ubertooth.c **** 	 * Set all pins for GPIO.  This shouldn't be necessary after a reset, but
  81:../common/ubertooth.c **** 	 * we might get called at other times.
  82:../common/ubertooth.c **** 	 */
  83:../common/ubertooth.c **** 	all_pins_off();
  84:../common/ubertooth.c **** 
  85:../common/ubertooth.c **** 	/* set certain pins as outputs, all others inputs */
  86:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
  87:../common/ubertooth.c **** 	FIO0DIR = PIN_USRLED;
  88:../common/ubertooth.c **** 	FIO1DIR = (PIN_CC3V3 | PIN_RX | PIN_TX | PIN_CSN |
  89:../common/ubertooth.c **** 			PIN_SCLK | PIN_MOSI | PIN_CC1V8 | PIN_BTGR);
  90:../common/ubertooth.c **** 	FIO2DIR = PIN_SSEL0;
ARM GAS  /tmp/ccQmV08g.s 			page 3


  91:../common/ubertooth.c **** 	FIO3DIR = 0;
  92:../common/ubertooth.c **** 	FIO4DIR = (PIN_RXLED | PIN_TXLED);
  93:../common/ubertooth.c **** #endif
  94:../common/ubertooth.c **** #ifdef UBERTOOTH_ONE
  95:../common/ubertooth.c **** 	FIO0DIR = 0;
  96:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
  97:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
  98:../common/ubertooth.c **** 	FIO2DIR = (PIN_CSN | PIN_SCLK | PIN_MOSI | PIN_PAEN | PIN_HGM);
  99:../common/ubertooth.c **** 	FIO3DIR = 0;
 100:../common/ubertooth.c **** 	FIO4DIR = (PIN_TX | PIN_SSEL1);
 101:../common/ubertooth.c **** #endif
 102:../common/ubertooth.c **** #ifdef TC13BADGE
 103:../common/ubertooth.c **** 	/*
 104:../common/ubertooth.c **** 	 * Leave all the CC2400 pins configured as inputs until cc2400_init() is
 105:../common/ubertooth.c **** 	 * called so that we don't interfere with the R8C's control of the CC2400.
 106:../common/ubertooth.c **** 	 */
 107:../common/ubertooth.c **** 	FIO0DIR = 0;
 108:../common/ubertooth.c **** 	FIO1DIR = PIN_R8C_CTL;
 109:../common/ubertooth.c **** 	FIO2DIR = 0;
 110:../common/ubertooth.c **** 	FIO3DIR = 0;
 111:../common/ubertooth.c **** 	FIO4DIR = 0;
 112:../common/ubertooth.c **** #endif
 113:../common/ubertooth.c **** 
 114:../common/ubertooth.c **** 	/* set all outputs low */
 115:../common/ubertooth.c **** 	FIO0PIN = 0;
 116:../common/ubertooth.c **** 	FIO1PIN = 0;
 117:../common/ubertooth.c **** 	FIO2PIN = 0;
 118:../common/ubertooth.c **** 	FIO3PIN = 0;
 119:../common/ubertooth.c **** 	FIO4PIN = 0;
 120:../common/ubertooth.c **** 
 121:../common/ubertooth.c **** #ifdef TC13BADGE
 122:../common/ubertooth.c **** 	/* R8C_CTL is active low */
 123:../common/ubertooth.c **** 	R8C_CTL_SET;
 124:../common/ubertooth.c **** #endif
 125:../common/ubertooth.c **** }
 126:../common/ubertooth.c **** 
 127:../common/ubertooth.c **** void all_pins_off(void)
 128:../common/ubertooth.c **** {
 129:../common/ubertooth.c **** 	/* configure all pins for GPIO */
 130:../common/ubertooth.c **** 	PINSEL0 = 0;
 131:../common/ubertooth.c **** 	PINSEL1 = 0;
 132:../common/ubertooth.c **** 	PINSEL2 = 0;
 133:../common/ubertooth.c **** 	PINSEL3 = 0;
 134:../common/ubertooth.c **** 	PINSEL4 = 0;
 135:../common/ubertooth.c **** 	PINSEL7 = 0;
 136:../common/ubertooth.c **** 	PINSEL9 = 0;
 137:../common/ubertooth.c **** 	PINSEL10 = 0;
 138:../common/ubertooth.c **** 
 139:../common/ubertooth.c **** 	/* configure all pins as inputs */
 140:../common/ubertooth.c **** 	FIO0DIR = 0;
 141:../common/ubertooth.c **** 	FIO1DIR = 0;
 142:../common/ubertooth.c **** 	FIO2DIR = 0;
 143:../common/ubertooth.c **** 	FIO3DIR = 0;
 144:../common/ubertooth.c **** 	FIO4DIR = 0;
 145:../common/ubertooth.c **** 
 146:../common/ubertooth.c **** 	/* pull-up on every pin */
 147:../common/ubertooth.c **** 	PINMODE0 = 0;
ARM GAS  /tmp/ccQmV08g.s 			page 4


 148:../common/ubertooth.c **** 	PINMODE1 = 0;
 149:../common/ubertooth.c **** 	PINMODE2 = 0;
 150:../common/ubertooth.c **** 	PINMODE3 = 0;
 151:../common/ubertooth.c **** 	PINMODE4 = 0;
 152:../common/ubertooth.c **** 	PINMODE7 = 0;
 153:../common/ubertooth.c **** 	PINMODE9 = 0;
 154:../common/ubertooth.c **** 
 155:../common/ubertooth.c **** 	/* set all outputs low */
 156:../common/ubertooth.c **** 	FIO0PIN = 0;
 157:../common/ubertooth.c **** 	FIO1PIN = 0;
 158:../common/ubertooth.c **** 	FIO2PIN = 0;
 159:../common/ubertooth.c **** 	FIO3PIN = 0;
 160:../common/ubertooth.c **** 	FIO4PIN = 0;
 161:../common/ubertooth.c **** }
 162:../common/ubertooth.c **** 
 163:../common/ubertooth.c **** /*
 164:../common/ubertooth.c ****  * Every application that uses the main oscillator (including any that use both
 165:../common/ubertooth.c ****  * USB and the CC2400) should start with this.
 166:../common/ubertooth.c ****  */
 167:../common/ubertooth.c **** void ubertooth_init()
 168:../common/ubertooth.c **** {
 169:../common/ubertooth.c **** 	int i;
 170:../common/ubertooth.c **** 	for (i = 0; i < 16; i++) {
 171:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 172:../common/ubertooth.c **** 	}
 173:../common/ubertooth.c **** 	gpio_init();
 174:../common/ubertooth.c **** 	cc2400_init();
 175:../common/ubertooth.c **** 	clock_start();
 176:../common/ubertooth.c **** 
 177:../common/ubertooth.c **** }
 178:../common/ubertooth.c **** 
 179:../common/ubertooth.c **** /* configure SSP for CC2400's secondary serial data interface */
 180:../common/ubertooth.c **** void dio_ssp_init()
 181:../common/ubertooth.c **** {
 182:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
 183:../common/ubertooth.c **** 	/* set P0.15 as SCK0 */
 184:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 30)) | (2 << 30);
 185:../common/ubertooth.c **** 
 186:../common/ubertooth.c **** 	/* set P1.16 as SSEL0 */
 187:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 0)) | (2 << 0);
 188:../common/ubertooth.c **** 
 189:../common/ubertooth.c **** 	/* set P1.17 as MISO0 */
 190:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 2)) | (2 << 2);
 191:../common/ubertooth.c **** 
 192:../common/ubertooth.c **** 	/* set P1.18 as MOSI0 */
 193:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 4)) | (2 << 4);
 194:../common/ubertooth.c **** #endif
 195:../common/ubertooth.c **** #if defined UBERTOOTH_ONE || defined TC13BADGE
 196:../common/ubertooth.c **** 	/* set P0.7 as SCK1 */
 197:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 14)) | (2 << 14);
 198:../common/ubertooth.c **** 
 199:../common/ubertooth.c **** 	/* set P0.6 as SSEL1 */
 200:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 12)) | (2 << 12);
 201:../common/ubertooth.c **** 
 202:../common/ubertooth.c **** 	/* set P0.8 as MISO1 */
 203:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 16)) | (2 << 16);
 204:../common/ubertooth.c **** 
ARM GAS  /tmp/ccQmV08g.s 			page 5


 205:../common/ubertooth.c **** 	/* set P0.9 as MOSI1 */
 206:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 18)) | (2 << 18);
 207:../common/ubertooth.c **** #endif
 208:../common/ubertooth.c **** 
 209:../common/ubertooth.c **** 	/*
 210:../common/ubertooth.c **** 	 * DIO_SSEL is a GPIO output connected directly to the SSEL input on the
 211:../common/ubertooth.c **** 	 * microcontroller for the CC2400's un-buffered (DIO/DCLK) serial
 212:../common/ubertooth.c **** 	 * interface.  Since the CC2400 doesn't have a slave select output, we
 213:../common/ubertooth.c **** 	 * control it with this.  DIO_SSEL should already be configured by
 214:../common/ubertooth.c **** 	 * gpio_init().  We set it high by default because it is an active low
 215:../common/ubertooth.c **** 	 * signal.
 216:../common/ubertooth.c **** 	 */
 217:../common/ubertooth.c **** 	DIO_SSEL_SET;
 218:../common/ubertooth.c **** 
 219:../common/ubertooth.c **** 	/* configure DIO_SSP */
 220:../common/ubertooth.c **** 	DIO_SSP_CR0 = (0x7 /* 8 bit transfer */ | SSPCR0_CPOL | SSPCR0_CPHA);
 221:../common/ubertooth.c **** 	DIO_SSP_CR1 = (SSPCR1_MS);
 222:../common/ubertooth.c **** 	PCONP |= PCONP_PCSSP1;
 223:../common/ubertooth.c **** }
 224:../common/ubertooth.c **** 
 225:../common/ubertooth.c **** void atest_init()
 226:../common/ubertooth.c **** {
 227:../common/ubertooth.c **** 	/*
 228:../common/ubertooth.c **** 	 * ADC can optionally be configured for ATEST1 and ATEST2, but for now we
 229:../common/ubertooth.c **** 	 * set them as floating inputs.
 230:../common/ubertooth.c **** 	 */
 231:../common/ubertooth.c **** 
 232:../common/ubertooth.c **** 	/* P0.25 is ATEST1, P0.26 is ATEST2 */
 233:../common/ubertooth.c **** 	PINSEL1 &= ~((0x3 << 20) | (0x3 << 18)); // set as GPIO
 234:../common/ubertooth.c **** 	FIO0DIR &= ~(0x3 << 25); // set as input
 235:../common/ubertooth.c **** 	PINMODE1 |= (0x5 << 19); // no pull-up/pull-down
 236:../common/ubertooth.c **** 	PINMODE1 &= ~(0x5 << 18); // no pull-up/pull-down
 237:../common/ubertooth.c **** }
 238:../common/ubertooth.c **** 
 239:../common/ubertooth.c **** void cc2400_init()
 240:../common/ubertooth.c **** {
 241:../common/ubertooth.c **** #ifdef TC13BADGE
 242:../common/ubertooth.c **** 	/* request CC2400 control from the R8C */
 243:../common/ubertooth.c **** 	r8c_takeover();
 244:../common/ubertooth.c **** 
 245:../common/ubertooth.c **** 	/* configure output pins for CC2400 control */
 246:../common/ubertooth.c **** 	FIO0DIR = 0;
 247:../common/ubertooth.c **** 	FIO1DIR = (PIN_CC3V3 | PIN_CC1V8 | PIN_CSN | PIN_SCLK | PIN_MOSI |
 248:../common/ubertooth.c **** 			PIN_R8C_CTL);
 249:../common/ubertooth.c **** 	FIO2DIR = (PIN_CSN | PIN_SCLK | PIN_MOSI);
 250:../common/ubertooth.c **** 	FIO3DIR = 0;
 251:../common/ubertooth.c **** 	FIO4DIR = PIN_SSEL1;
 252:../common/ubertooth.c **** 
 253:../common/ubertooth.c **** 	/* set all outputs low */
 254:../common/ubertooth.c **** 	FIO0PIN = 0;
 255:../common/ubertooth.c **** 	FIO1PIN = 0; /* assuming we have already asserted R8C_CTL low */
 256:../common/ubertooth.c **** 	FIO2PIN = 0;
 257:../common/ubertooth.c **** 	FIO3PIN = 0;
 258:../common/ubertooth.c **** 	FIO4PIN = 0;
 259:../common/ubertooth.c **** #else
 260:../common/ubertooth.c **** 	atest_init();
 261:../common/ubertooth.c **** #endif
ARM GAS  /tmp/ccQmV08g.s 			page 6


 262:../common/ubertooth.c **** 
 263:../common/ubertooth.c **** 	/* activate 1V8 supply for CC2400 */
 264:../common/ubertooth.c **** 	CC1V8_SET;
 265:../common/ubertooth.c **** 	wait_us(50);
 266:../common/ubertooth.c **** 
 267:../common/ubertooth.c **** 	/* CSN (slave select) is active low */
 268:../common/ubertooth.c **** 	CSN_SET;
 269:../common/ubertooth.c **** 
 270:../common/ubertooth.c **** 	/* activate 3V3 supply for CC2400 IO */
 271:../common/ubertooth.c **** 	CC3V3_SET;
 272:../common/ubertooth.c **** 
 273:../common/ubertooth.c **** 	/* initialise various cc2400 settings - see datasheet pg63 */
 274:../common/ubertooth.c **** 	cc2400_set(MANAND,  0x7fff);
 275:../common/ubertooth.c **** }
 276:../common/ubertooth.c **** 
 277:../common/ubertooth.c **** /*
 278:../common/ubertooth.c ****  * This is a single SPI transaction of variable length, usually 8 or 24 bits.
 279:../common/ubertooth.c ****  * The CC2400 also supports longer transactions (e.g. for the FIFO), but we
 280:../common/ubertooth.c ****  * haven't implemented anything longer than 32 bits.
 281:../common/ubertooth.c ****  *
 282:../common/ubertooth.c ****  * We're bit-banging because:
 283:../common/ubertooth.c ****  *
 284:../common/ubertooth.c ****  * 1. We're using one SPI peripheral for the CC2400's unbuffered data
 285:../common/ubertooth.c ****  *    interace.
 286:../common/ubertooth.c ****  * 2. We're saving the second SPI peripheral for an expansion port.
 287:../common/ubertooth.c ****  * 3. The CC2400 needs CSN held low for the entire transaction which the
 288:../common/ubertooth.c ****  *    LPC17xx SPI peripheral won't do without some workaround anyway.
 289:../common/ubertooth.c ****  */
 290:../common/ubertooth.c **** u32 cc2400_spi(u8 len, u32 data)
 291:../common/ubertooth.c **** {
 292:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 293:../common/ubertooth.c **** 
 294:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 295:../common/ubertooth.c **** 	CSN_CLR;
 296:../common/ubertooth.c **** 
 297:../common/ubertooth.c **** 	while (len--) {
 298:../common/ubertooth.c **** 		if (data & msb)
 299:../common/ubertooth.c **** 			MOSI_SET;
 300:../common/ubertooth.c **** 		else
 301:../common/ubertooth.c **** 			MOSI_CLR;
 302:../common/ubertooth.c **** 		data <<= 1;
 303:../common/ubertooth.c **** 
 304:../common/ubertooth.c **** 		SCLK_SET;
 305:../common/ubertooth.c **** 		/* Save a few cycles by avoiding the compare/branch */
 306:../common/ubertooth.c **** 		data |= !!MISO;
 307:../common/ubertooth.c **** 		SCLK_CLR;
 308:../common/ubertooth.c **** 	}
 309:../common/ubertooth.c **** 
 310:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 311:../common/ubertooth.c **** 	CSN_SET;
 312:../common/ubertooth.c **** 
 313:../common/ubertooth.c **** 	return data;
 314:../common/ubertooth.c **** }
 315:../common/ubertooth.c **** 
 316:../common/ubertooth.c **** /* BoRa: CC2400 allow continous write to the register via SPI when CSN keeps low */
 317:../common/ubertooth.c **** void cc2400_spi_continue_write_start(uint8_t reg, uint16_t val)
 318:../common/ubertooth.c **** {
ARM GAS  /tmp/ccQmV08g.s 			page 7


 319:../common/ubertooth.c **** 	int i;
 320:../common/ubertooth.c **** 
 321:../common/ubertooth.c **** 	cur_reg = reg;
 322:../common/ubertooth.c **** 
 323:../common/ubertooth.c **** 	CSN_CLR;
 324:../common/ubertooth.c **** 	/* We first write the register address to the cc2400 */
 325:../common/ubertooth.c **** 	for (i = 0; i < 8; i++) {
 326:../common/ubertooth.c **** 		if (reg & msb8) {
 327:../common/ubertooth.c **** 			MOSI_SET;
 328:../common/ubertooth.c **** 		}
 329:../common/ubertooth.c **** 		else {
 330:../common/ubertooth.c **** 			MOSI_CLR;
 331:../common/ubertooth.c **** 		}
 332:../common/ubertooth.c **** 		SCLK_SET;
 333:../common/ubertooth.c **** 		SCLK_CLR;
 334:../common/ubertooth.c **** 		reg <<= 1;
 335:../common/ubertooth.c **** 	}
 336:../common/ubertooth.c **** 	for (i = 0; i < 16; i++) {
 337:../common/ubertooth.c **** 		if (val & msb16) {
 338:../common/ubertooth.c **** 			MOSI_SET;
 339:../common/ubertooth.c **** 		}
 340:../common/ubertooth.c **** 		else {
 341:../common/ubertooth.c **** 			MOSI_CLR;
 342:../common/ubertooth.c **** 		}
 343:../common/ubertooth.c **** 		SCLK_SET;
 344:../common/ubertooth.c **** 		SCLK_CLR;
 345:../common/ubertooth.c **** 		val <<= 1;
 346:../common/ubertooth.c **** 	}
 347:../common/ubertooth.c **** }
 348:../common/ubertooth.c **** 
 349:../common/ubertooth.c **** /* BoRa: For the subsequent register writting, do not need to operate the CSN */
 350:../common/ubertooth.c **** void cc2400_spi_continue_write(uint8_t reg, uint16_t val)
 351:../common/ubertooth.c **** {
 352:../common/ubertooth.c **** 	int i;
 353:../common/ubertooth.c **** 
 354:../common/ubertooth.c **** 	// if (cur_reg != reg) {
 355:../common/ubertooth.c **** 	// 	// debug_printf("error register\n");
 356:../common/ubertooth.c **** 	// 	return;
 357:../common/ubertooth.c **** 	// }
 358:../common/ubertooth.c **** 
 359:../common/ubertooth.c **** 	for (i = 0; i < 16; i++) {
 360:../common/ubertooth.c **** 		if (val & msb16) {
 361:../common/ubertooth.c **** 			MOSI_SET;
 362:../common/ubertooth.c **** 		}
 363:../common/ubertooth.c **** 		else {
 364:../common/ubertooth.c **** 			MOSI_CLR;
 365:../common/ubertooth.c **** 		}
 366:../common/ubertooth.c **** 		SCLK_SET;
 367:../common/ubertooth.c **** 		SCLK_CLR;
 368:../common/ubertooth.c **** 		val <<= 1;
 369:../common/ubertooth.c **** 	}
 370:../common/ubertooth.c **** }
 371:../common/ubertooth.c **** 
 372:../common/ubertooth.c **** /* BoRa: Stop the SPI transition */
 373:../common/ubertooth.c **** void cc2400_spi_continue_write_stop()
 374:../common/ubertooth.c **** {
 375:../common/ubertooth.c **** 	CSN_SET;
ARM GAS  /tmp/ccQmV08g.s 			page 8


 376:../common/ubertooth.c **** 	cur_reg = 0;
 377:../common/ubertooth.c **** }
 378:../common/ubertooth.c **** 
 379:../common/ubertooth.c **** /* read 16 bit value from a register */
 380:../common/ubertooth.c **** u16 cc2400_get(u8 reg)
 381:../common/ubertooth.c **** {
 382:../common/ubertooth.c **** 	u32 in;
 383:../common/ubertooth.c **** 
 384:../common/ubertooth.c **** 	u32 out = (reg | 0x80) << 16;
 385:../common/ubertooth.c **** 	in = cc2400_spi(24, out);
 386:../common/ubertooth.c **** 	return in & 0xFFFF;
 387:../common/ubertooth.c **** }
 388:../common/ubertooth.c **** 
 389:../common/ubertooth.c **** /* write 16 bit value to a register */
 390:../common/ubertooth.c **** void cc2400_set(u8 reg, u16 val)
 391:../common/ubertooth.c **** {
 392:../common/ubertooth.c **** 	u32 out = (reg << 16) | val;
 393:../common/ubertooth.c **** 	cc2400_spi(24, out);
 394:../common/ubertooth.c **** }
 395:../common/ubertooth.c **** 
 396:../common/ubertooth.c **** /* read 8 bit value from a register */
 397:../common/ubertooth.c **** u8 cc2400_get8(u8 reg)
 398:../common/ubertooth.c **** {
 399:../common/ubertooth.c **** 	u16 in;
 400:../common/ubertooth.c **** 
 401:../common/ubertooth.c **** 	u16 out = (reg | 0x80) << 8;
 402:../common/ubertooth.c **** 	in = cc2400_spi(16, out);
 403:../common/ubertooth.c **** 	return in & 0xFF;
 404:../common/ubertooth.c **** }
 405:../common/ubertooth.c **** 
 406:../common/ubertooth.c **** /* write 8 bit value to a register */
 407:../common/ubertooth.c **** void cc2400_set8(u8 reg, u8 val)
 408:../common/ubertooth.c **** {
 409:../common/ubertooth.c **** 	u32 out = (reg << 8) | val;
 410:../common/ubertooth.c **** 	cc2400_spi(16, out);
 411:../common/ubertooth.c **** }
 412:../common/ubertooth.c **** 
 413:../common/ubertooth.c **** static volatile u32 delay_counter;
 414:../common/ubertooth.c **** static void spi_delay() {
  26              		.loc 1 414 25 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
 415:../common/ubertooth.c ****        delay_counter = 10;
  31              		.loc 1 415 8 view .LVU1
  32              		.loc 1 415 22 is_stmt 0 view .LVU2
  33 0000 0A22     		movs	r2, #10
  34 0002 044B     		ldr	r3, .L4
  35 0004 1A60     		str	r2, [r3]
 416:../common/ubertooth.c ****        while (--delay_counter);
  36              		.loc 1 416 8 is_stmt 1 view .LVU3
  37              	.L2:
  38              		.loc 1 416 31 discriminator 1 view .LVU4
  39              		.loc 1 416 14 discriminator 1 view .LVU5
  40              		.loc 1 416 15 is_stmt 0 discriminator 1 view .LVU6
  41 0006 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/ccQmV08g.s 			page 9


  42 0008 013A     		subs	r2, r2, #1
  43              		.loc 1 416 14 discriminator 1 view .LVU7
  44 000a 1A60     		str	r2, [r3]
  45 000c 002A     		cmp	r2, #0
  46 000e FAD1     		bne	.L2
 417:../common/ubertooth.c **** }
  47              		.loc 1 417 1 view .LVU8
  48 0010 7047     		bx	lr
  49              	.L5:
  50 0012 00BF     		.align	2
  51              	.L4:
  52 0014 00000000 		.word	.LANCHOR0
  53              		.cfi_endproc
  54              	.LFE19:
  56              		.section	.text.rbit,"ax",%progbits
  57              		.align	1
  58              		.global	rbit
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu softvfp
  64              	rbit:
  65              	.LVL0:
  66              	.LFB2:
  46:../common/ubertooth.c ****   u32 result = 0;
  67              		.loc 1 46 21 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 0
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		@ link register save eliminated.
  46:../common/ubertooth.c ****   u32 result = 0;
  72              		.loc 1 46 21 is_stmt 0 view .LVU10
  47:../common/ubertooth.c ****   asm("rbit %0, %1" : "=r" (result) : "r" (value));
  73              		.loc 1 47 3 is_stmt 1 view .LVU11
  74              	.LVL1:
  48:../common/ubertooth.c ****   return result;
  75              		.loc 1 48 3 view .LVU12
  76              		.syntax unified
  77              	@ 48 "../common/ubertooth.c" 1
  78 0000 90FAA0F0 		rbit r0, r0
  79              	@ 0 "" 2
  80              	.LVL2:
  49:../common/ubertooth.c **** }
  81              		.loc 1 49 3 view .LVU13
  50:../common/ubertooth.c **** 
  82              		.loc 1 50 1 is_stmt 0 view .LVU14
  83              		.thumb
  84              		.syntax unified
  85 0004 7047     		bx	lr
  86              		.cfi_endproc
  87              	.LFE2:
  89              		.section	.text.rbit8,"ax",%progbits
  90              		.align	1
  91              		.global	rbit8
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
ARM GAS  /tmp/ccQmV08g.s 			page 10


  95              		.fpu softvfp
  97              	rbit8:
  98              	.LVL3:
  99              	.LFB3:
  52:../common/ubertooth.c ****   u32 result = 0;
 100              		.loc 1 52 20 is_stmt 1 view -0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 0
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              		@ link register save eliminated.
  52:../common/ubertooth.c ****   u32 result = 0;
 105              		.loc 1 52 20 is_stmt 0 view .LVU16
  53:../common/ubertooth.c ****   asm("rbit %0, %1" : "=r" (result) : "r" ((uint32_t)value));
 106              		.loc 1 53 3 is_stmt 1 view .LVU17
 107              	.LVL4:
  54:../common/ubertooth.c ****   return (uint8_t)(result >> 24);
 108              		.loc 1 54 3 view .LVU18
 109              		.syntax unified
 110              	@ 54 "../common/ubertooth.c" 1
 111 0000 90FAA0F0 		rbit r0, r0
 112              	@ 0 "" 2
 113              	.LVL5:
  55:../common/ubertooth.c **** }
 114              		.loc 1 55 3 view .LVU19
  56:../common/ubertooth.c **** 
 115              		.loc 1 56 1 is_stmt 0 view .LVU20
 116              		.thumb
 117              		.syntax unified
 118 0004 000E     		lsrs	r0, r0, #24
 119              	.LVL6:
  56:../common/ubertooth.c **** 
 120              		.loc 1 56 1 view .LVU21
 121 0006 7047     		bx	lr
 122              		.cfi_endproc
 123              	.LFE3:
 125              		.section	.text.wait_us,"ax",%progbits
 126              		.align	1
 127              		.global	wait_us
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 131              		.fpu softvfp
 133              	wait_us:
 134              	.LVL7:
 135              	.LFB4:
  62:../common/ubertooth.c **** 	/* This is binary multiply by ~0.3999, i.e, multiply by
 136              		.loc 1 62 1 is_stmt 1 view -0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              		@ link register save eliminated.
  62:../common/ubertooth.c **** 	/* This is binary multiply by ~0.3999, i.e, multiply by
 141              		.loc 1 62 1 is_stmt 0 view .LVU23
  67:../common/ubertooth.c **** 		(us>>2) + (us>>3) + (us>>6) + (us>>7) + (us>>10) + (us>>11);
 142              		.loc 1 67 2 is_stmt 1 view .LVU24
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 143              		.loc 1 68 16 is_stmt 0 view .LVU25
ARM GAS  /tmp/ccQmV08g.s 			page 11


 144 0000 C308     		lsrs	r3, r0, #3
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 145              		.loc 1 68 11 view .LVU26
 146 0002 03EB9003 		add	r3, r3, r0, lsr #2
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 147              		.loc 1 68 21 view .LVU27
 148 0006 03EB9013 		add	r3, r3, r0, lsr #6
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 149              		.loc 1 68 31 view .LVU28
 150 000a 03EBD013 		add	r3, r3, r0, lsr #7
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 151              		.loc 1 68 41 view .LVU29
 152 000e 03EB9023 		add	r3, r3, r0, lsr #10
  68:../common/ubertooth.c **** 	while(--wait_us_counter);
 153              		.loc 1 68 52 view .LVU30
 154 0012 03EBD020 		add	r0, r3, r0, lsr #11
 155              	.LVL8:
  67:../common/ubertooth.c **** 		(us>>2) + (us>>3) + (us>>6) + (us>>7) + (us>>10) + (us>>11);
 156              		.loc 1 67 18 view .LVU31
 157 0016 044B     		ldr	r3, .L11
 158 0018 5860     		str	r0, [r3, #4]
  69:../common/ubertooth.c **** }
 159              		.loc 1 69 2 is_stmt 1 view .LVU32
 160              	.L9:
  69:../common/ubertooth.c **** }
 161              		.loc 1 69 26 discriminator 1 view .LVU33
  69:../common/ubertooth.c **** }
 162              		.loc 1 69 7 discriminator 1 view .LVU34
  69:../common/ubertooth.c **** }
 163              		.loc 1 69 8 is_stmt 0 discriminator 1 view .LVU35
 164 001a 5A68     		ldr	r2, [r3, #4]
 165 001c 013A     		subs	r2, r2, #1
  69:../common/ubertooth.c **** }
 166              		.loc 1 69 7 discriminator 1 view .LVU36
 167 001e 5A60     		str	r2, [r3, #4]
 168 0020 002A     		cmp	r2, #0
 169 0022 FAD1     		bne	.L9
  70:../common/ubertooth.c **** 
 170              		.loc 1 70 1 view .LVU37
 171 0024 7047     		bx	lr
 172              	.L12:
 173 0026 00BF     		.align	2
 174              	.L11:
 175 0028 00000000 		.word	.LANCHOR0
 176              		.cfi_endproc
 177              	.LFE4:
 179              		.section	.text.wait,"ax",%progbits
 180              		.align	1
 181              		.global	wait
 182              		.syntax unified
 183              		.thumb
 184              		.thumb_func
 185              		.fpu softvfp
 187              	wait:
 188              	.LVL9:
 189              	.LFB0:
  35:../common/ubertooth.c **** 	wait_us(seconds * 1000000);
ARM GAS  /tmp/ccQmV08g.s 			page 12


 190              		.loc 1 35 1 is_stmt 1 view -0
 191              		.cfi_startproc
 192              		@ args = 0, pretend = 0, frame = 0
 193              		@ frame_needed = 0, uses_anonymous_args = 0
 194              		@ link register save eliminated.
  35:../common/ubertooth.c **** 	wait_us(seconds * 1000000);
 195              		.loc 1 35 1 is_stmt 0 view .LVU39
  36:../common/ubertooth.c **** }
 196              		.loc 1 36 2 is_stmt 1 view .LVU40
 197 0000 014B     		ldr	r3, .L14
 198 0002 5843     		muls	r0, r3, r0
 199              	.LVL10:
  36:../common/ubertooth.c **** }
 200              		.loc 1 36 2 is_stmt 0 view .LVU41
 201 0004 FFF7FEBF 		b	wait_us
 202              	.LVL11:
 203              	.L15:
 204              		.align	2
 205              	.L14:
 206 0008 40420F00 		.word	1000000
 207              		.cfi_endproc
 208              	.LFE0:
 210              		.section	.text.wait_ms,"ax",%progbits
 211              		.align	1
 212              		.global	wait_ms
 213              		.syntax unified
 214              		.thumb
 215              		.thumb_func
 216              		.fpu softvfp
 218              	wait_ms:
 219              	.LVL12:
 220              	.LFB1:
  41:../common/ubertooth.c **** 	wait_us(ms * 1000);
 221              		.loc 1 41 1 is_stmt 1 view -0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 0
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225              		@ link register save eliminated.
  41:../common/ubertooth.c **** 	wait_us(ms * 1000);
 226              		.loc 1 41 1 is_stmt 0 view .LVU43
  42:../common/ubertooth.c **** }
 227              		.loc 1 42 2 is_stmt 1 view .LVU44
 228 0000 4FF47A73 		mov	r3, #1000
 229 0004 5843     		muls	r0, r3, r0
 230              	.LVL13:
  42:../common/ubertooth.c **** }
 231              		.loc 1 42 2 is_stmt 0 view .LVU45
 232 0006 FFF7FEBF 		b	wait_us
 233              	.LVL14:
 234              		.cfi_endproc
 235              	.LFE1:
 237              		.section	.text.all_pins_off,"ax",%progbits
 238              		.align	1
 239              		.global	all_pins_off
 240              		.syntax unified
 241              		.thumb
 242              		.thumb_func
ARM GAS  /tmp/ccQmV08g.s 			page 13


 243              		.fpu softvfp
 245              	all_pins_off:
 246              	.LFB6:
 128:../common/ubertooth.c **** 	/* configure all pins for GPIO */
 247              		.loc 1 128 1 is_stmt 1 view -0
 248              		.cfi_startproc
 249              		@ args = 0, pretend = 0, frame = 0
 250              		@ frame_needed = 0, uses_anonymous_args = 0
 251              		@ link register save eliminated.
 130:../common/ubertooth.c **** 	PINSEL1 = 0;
 252              		.loc 1 130 2 view .LVU47
 130:../common/ubertooth.c **** 	PINSEL1 = 0;
 253              		.loc 1 130 10 is_stmt 0 view .LVU48
 254 0000 0023     		movs	r3, #0
 255 0002 104A     		ldr	r2, .L18
 256 0004 1360     		str	r3, [r2]
 131:../common/ubertooth.c **** 	PINSEL2 = 0;
 257              		.loc 1 131 2 is_stmt 1 view .LVU49
 131:../common/ubertooth.c **** 	PINSEL2 = 0;
 258              		.loc 1 131 10 is_stmt 0 view .LVU50
 259 0006 5360     		str	r3, [r2, #4]
 132:../common/ubertooth.c **** 	PINSEL3 = 0;
 260              		.loc 1 132 2 is_stmt 1 view .LVU51
 132:../common/ubertooth.c **** 	PINSEL3 = 0;
 261              		.loc 1 132 10 is_stmt 0 view .LVU52
 262 0008 9360     		str	r3, [r2, #8]
 133:../common/ubertooth.c **** 	PINSEL4 = 0;
 263              		.loc 1 133 2 is_stmt 1 view .LVU53
 133:../common/ubertooth.c **** 	PINSEL4 = 0;
 264              		.loc 1 133 10 is_stmt 0 view .LVU54
 265 000a D360     		str	r3, [r2, #12]
 134:../common/ubertooth.c **** 	PINSEL7 = 0;
 266              		.loc 1 134 2 is_stmt 1 view .LVU55
 134:../common/ubertooth.c **** 	PINSEL7 = 0;
 267              		.loc 1 134 10 is_stmt 0 view .LVU56
 268 000c 1361     		str	r3, [r2, #16]
 135:../common/ubertooth.c **** 	PINSEL9 = 0;
 269              		.loc 1 135 2 is_stmt 1 view .LVU57
 135:../common/ubertooth.c **** 	PINSEL9 = 0;
 270              		.loc 1 135 10 is_stmt 0 view .LVU58
 271 000e D361     		str	r3, [r2, #28]
 136:../common/ubertooth.c **** 	PINSEL10 = 0;
 272              		.loc 1 136 2 is_stmt 1 view .LVU59
 136:../common/ubertooth.c **** 	PINSEL10 = 0;
 273              		.loc 1 136 10 is_stmt 0 view .LVU60
 274 0010 5362     		str	r3, [r2, #36]
 137:../common/ubertooth.c **** 
 275              		.loc 1 137 2 is_stmt 1 view .LVU61
 137:../common/ubertooth.c **** 
 276              		.loc 1 137 11 is_stmt 0 view .LVU62
 277 0012 9362     		str	r3, [r2, #40]
 140:../common/ubertooth.c **** 	FIO1DIR = 0;
 278              		.loc 1 140 2 is_stmt 1 view .LVU63
 140:../common/ubertooth.c **** 	FIO1DIR = 0;
 279              		.loc 1 140 10 is_stmt 0 view .LVU64
 280 0014 0C4A     		ldr	r2, .L18+4
 281 0016 1360     		str	r3, [r2]
ARM GAS  /tmp/ccQmV08g.s 			page 14


 141:../common/ubertooth.c **** 	FIO2DIR = 0;
 282              		.loc 1 141 2 is_stmt 1 view .LVU65
 141:../common/ubertooth.c **** 	FIO2DIR = 0;
 283              		.loc 1 141 10 is_stmt 0 view .LVU66
 284 0018 1362     		str	r3, [r2, #32]
 142:../common/ubertooth.c **** 	FIO3DIR = 0;
 285              		.loc 1 142 2 is_stmt 1 view .LVU67
 142:../common/ubertooth.c **** 	FIO3DIR = 0;
 286              		.loc 1 142 10 is_stmt 0 view .LVU68
 287 001a 1364     		str	r3, [r2, #64]
 143:../common/ubertooth.c **** 	FIO4DIR = 0;
 288              		.loc 1 143 2 is_stmt 1 view .LVU69
 143:../common/ubertooth.c **** 	FIO4DIR = 0;
 289              		.loc 1 143 10 is_stmt 0 view .LVU70
 290 001c 1366     		str	r3, [r2, #96]
 144:../common/ubertooth.c **** 
 291              		.loc 1 144 2 is_stmt 1 view .LVU71
 144:../common/ubertooth.c **** 
 292              		.loc 1 144 10 is_stmt 0 view .LVU72
 293 001e C2F88030 		str	r3, [r2, #128]
 147:../common/ubertooth.c **** 	PINMODE1 = 0;
 294              		.loc 1 147 2 is_stmt 1 view .LVU73
 147:../common/ubertooth.c **** 	PINMODE1 = 0;
 295              		.loc 1 147 11 is_stmt 0 view .LVU74
 296 0022 0A4A     		ldr	r2, .L18+8
 297 0024 1360     		str	r3, [r2]
 148:../common/ubertooth.c **** 	PINMODE2 = 0;
 298              		.loc 1 148 2 is_stmt 1 view .LVU75
 148:../common/ubertooth.c **** 	PINMODE2 = 0;
 299              		.loc 1 148 11 is_stmt 0 view .LVU76
 300 0026 5360     		str	r3, [r2, #4]
 149:../common/ubertooth.c **** 	PINMODE3 = 0;
 301              		.loc 1 149 2 is_stmt 1 view .LVU77
 149:../common/ubertooth.c **** 	PINMODE3 = 0;
 302              		.loc 1 149 11 is_stmt 0 view .LVU78
 303 0028 9360     		str	r3, [r2, #8]
 150:../common/ubertooth.c **** 	PINMODE4 = 0;
 304              		.loc 1 150 2 is_stmt 1 view .LVU79
 150:../common/ubertooth.c **** 	PINMODE4 = 0;
 305              		.loc 1 150 11 is_stmt 0 view .LVU80
 306 002a D360     		str	r3, [r2, #12]
 151:../common/ubertooth.c **** 	PINMODE7 = 0;
 307              		.loc 1 151 2 is_stmt 1 view .LVU81
 151:../common/ubertooth.c **** 	PINMODE7 = 0;
 308              		.loc 1 151 11 is_stmt 0 view .LVU82
 309 002c 1361     		str	r3, [r2, #16]
 152:../common/ubertooth.c **** 	PINMODE9 = 0;
 310              		.loc 1 152 2 is_stmt 1 view .LVU83
 152:../common/ubertooth.c **** 	PINMODE9 = 0;
 311              		.loc 1 152 11 is_stmt 0 view .LVU84
 312 002e D361     		str	r3, [r2, #28]
 153:../common/ubertooth.c **** 
 313              		.loc 1 153 2 is_stmt 1 view .LVU85
 153:../common/ubertooth.c **** 
 314              		.loc 1 153 11 is_stmt 0 view .LVU86
 315 0030 5362     		str	r3, [r2, #36]
 156:../common/ubertooth.c **** 	FIO1PIN = 0;
ARM GAS  /tmp/ccQmV08g.s 			page 15


 316              		.loc 1 156 2 is_stmt 1 view .LVU87
 156:../common/ubertooth.c **** 	FIO1PIN = 0;
 317              		.loc 1 156 10 is_stmt 0 view .LVU88
 318 0032 074A     		ldr	r2, .L18+12
 319 0034 1360     		str	r3, [r2]
 157:../common/ubertooth.c **** 	FIO2PIN = 0;
 320              		.loc 1 157 2 is_stmt 1 view .LVU89
 157:../common/ubertooth.c **** 	FIO2PIN = 0;
 321              		.loc 1 157 10 is_stmt 0 view .LVU90
 322 0036 1362     		str	r3, [r2, #32]
 158:../common/ubertooth.c **** 	FIO3PIN = 0;
 323              		.loc 1 158 2 is_stmt 1 view .LVU91
 158:../common/ubertooth.c **** 	FIO3PIN = 0;
 324              		.loc 1 158 10 is_stmt 0 view .LVU92
 325 0038 1364     		str	r3, [r2, #64]
 159:../common/ubertooth.c **** 	FIO4PIN = 0;
 326              		.loc 1 159 2 is_stmt 1 view .LVU93
 159:../common/ubertooth.c **** 	FIO4PIN = 0;
 327              		.loc 1 159 10 is_stmt 0 view .LVU94
 328 003a 1366     		str	r3, [r2, #96]
 160:../common/ubertooth.c **** }
 329              		.loc 1 160 2 is_stmt 1 view .LVU95
 160:../common/ubertooth.c **** }
 330              		.loc 1 160 10 is_stmt 0 view .LVU96
 331 003c C2F88030 		str	r3, [r2, #128]
 161:../common/ubertooth.c **** 
 332              		.loc 1 161 1 view .LVU97
 333 0040 7047     		bx	lr
 334              	.L19:
 335 0042 00BF     		.align	2
 336              	.L18:
 337 0044 00C00240 		.word	1073922048
 338 0048 00C00920 		.word	537509888
 339 004c 40C00240 		.word	1073922112
 340 0050 14C00920 		.word	537509908
 341              		.cfi_endproc
 342              	.LFE6:
 344              		.section	.text.gpio_init,"ax",%progbits
 345              		.align	1
 346              		.global	gpio_init
 347              		.syntax unified
 348              		.thumb
 349              		.thumb_func
 350              		.fpu softvfp
 352              	gpio_init:
 353              	.LFB5:
  78:../common/ubertooth.c **** 	/* 
 354              		.loc 1 78 1 is_stmt 1 view -0
 355              		.cfi_startproc
 356              		@ args = 0, pretend = 0, frame = 0
 357              		@ frame_needed = 0, uses_anonymous_args = 0
 358 0000 08B5     		push	{r3, lr}
 359              		.cfi_def_cfa_offset 8
 360              		.cfi_offset 3, -8
 361              		.cfi_offset 14, -4
  83:../common/ubertooth.c **** 
 362              		.loc 1 83 2 view .LVU99
ARM GAS  /tmp/ccQmV08g.s 			page 16


 363 0002 FFF7FEFF 		bl	all_pins_off
 364              	.LVL15:
  95:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
 365              		.loc 1 95 2 view .LVU100
  95:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
 366              		.loc 1 95 10 is_stmt 0 view .LVU101
 367 0006 0023     		movs	r3, #0
  96:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
 368              		.loc 1 96 10 view .LVU102
 369 0008 4CF21271 		movw	r1, #50962
  95:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
 370              		.loc 1 95 10 view .LVU103
 371 000c 084A     		ldr	r2, .L21
 372 000e 1360     		str	r3, [r2]
  96:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
 373              		.loc 1 96 2 is_stmt 1 view .LVU104
  96:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
 374              		.loc 1 96 10 is_stmt 0 view .LVU105
 375 0010 1162     		str	r1, [r2, #32]
  98:../common/ubertooth.c **** 	FIO3DIR = 0;
 376              		.loc 1 98 2 is_stmt 1 view .LVU106
  98:../common/ubertooth.c **** 	FIO3DIR = 0;
 377              		.loc 1 98 10 is_stmt 0 view .LVU107
 378 0012 40F2B111 		movw	r1, #433
 379 0016 1164     		str	r1, [r2, #64]
  99:../common/ubertooth.c **** 	FIO4DIR = (PIN_TX | PIN_SSEL1);
 380              		.loc 1 99 2 is_stmt 1 view .LVU108
 100:../common/ubertooth.c **** #endif
 381              		.loc 1 100 10 is_stmt 0 view .LVU109
 382 0018 4FF04051 		mov	r1, #805306368
  99:../common/ubertooth.c **** 	FIO4DIR = (PIN_TX | PIN_SSEL1);
 383              		.loc 1 99 10 view .LVU110
 384 001c 1366     		str	r3, [r2, #96]
 100:../common/ubertooth.c **** #endif
 385              		.loc 1 100 2 is_stmt 1 view .LVU111
 100:../common/ubertooth.c **** #endif
 386              		.loc 1 100 10 is_stmt 0 view .LVU112
 387 001e C2F88010 		str	r1, [r2, #128]
 115:../common/ubertooth.c **** 	FIO1PIN = 0;
 388              		.loc 1 115 2 is_stmt 1 view .LVU113
 115:../common/ubertooth.c **** 	FIO1PIN = 0;
 389              		.loc 1 115 10 is_stmt 0 view .LVU114
 390 0022 5361     		str	r3, [r2, #20]
 116:../common/ubertooth.c **** 	FIO2PIN = 0;
 391              		.loc 1 116 2 is_stmt 1 view .LVU115
 116:../common/ubertooth.c **** 	FIO2PIN = 0;
 392              		.loc 1 116 10 is_stmt 0 view .LVU116
 393 0024 5363     		str	r3, [r2, #52]
 117:../common/ubertooth.c **** 	FIO3PIN = 0;
 394              		.loc 1 117 2 is_stmt 1 view .LVU117
 117:../common/ubertooth.c **** 	FIO3PIN = 0;
 395              		.loc 1 117 10 is_stmt 0 view .LVU118
 396 0026 5365     		str	r3, [r2, #84]
 118:../common/ubertooth.c **** 	FIO4PIN = 0;
 397              		.loc 1 118 2 is_stmt 1 view .LVU119
 118:../common/ubertooth.c **** 	FIO4PIN = 0;
 398              		.loc 1 118 10 is_stmt 0 view .LVU120
ARM GAS  /tmp/ccQmV08g.s 			page 17


 399 0028 5367     		str	r3, [r2, #116]
 119:../common/ubertooth.c **** 
 400              		.loc 1 119 2 is_stmt 1 view .LVU121
 119:../common/ubertooth.c **** 
 401              		.loc 1 119 10 is_stmt 0 view .LVU122
 402 002a C2F89430 		str	r3, [r2, #148]
 125:../common/ubertooth.c **** 
 403              		.loc 1 125 1 view .LVU123
 404 002e 08BD     		pop	{r3, pc}
 405              	.L22:
 406              		.align	2
 407              	.L21:
 408 0030 00C00920 		.word	537509888
 409              		.cfi_endproc
 410              	.LFE5:
 412              		.section	.text.dio_ssp_init,"ax",%progbits
 413              		.align	1
 414              		.global	dio_ssp_init
 415              		.syntax unified
 416              		.thumb
 417              		.thumb_func
 418              		.fpu softvfp
 420              	dio_ssp_init:
 421              	.LFB8:
 181:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
 422              		.loc 1 181 1 is_stmt 1 view -0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 0
 425              		@ frame_needed = 0, uses_anonymous_args = 0
 426              		@ link register save eliminated.
 197:../common/ubertooth.c **** 
 427              		.loc 1 197 2 view .LVU125
 197:../common/ubertooth.c **** 
 428              		.loc 1 197 13 is_stmt 0 view .LVU126
 429 0000 134B     		ldr	r3, .L24
 430 0002 1A68     		ldr	r2, [r3]
 197:../common/ubertooth.c **** 
 431              		.loc 1 197 21 view .LVU127
 432 0004 22F44042 		bic	r2, r2, #49152
 197:../common/ubertooth.c **** 
 433              		.loc 1 197 35 view .LVU128
 434 0008 42F40042 		orr	r2, r2, #32768
 197:../common/ubertooth.c **** 
 435              		.loc 1 197 10 view .LVU129
 436 000c 1A60     		str	r2, [r3]
 200:../common/ubertooth.c **** 
 437              		.loc 1 200 2 is_stmt 1 view .LVU130
 200:../common/ubertooth.c **** 
 438              		.loc 1 200 13 is_stmt 0 view .LVU131
 439 000e 1A68     		ldr	r2, [r3]
 200:../common/ubertooth.c **** 
 440              		.loc 1 200 21 view .LVU132
 441 0010 22F44052 		bic	r2, r2, #12288
 200:../common/ubertooth.c **** 
 442              		.loc 1 200 35 view .LVU133
 443 0014 42F40052 		orr	r2, r2, #8192
 200:../common/ubertooth.c **** 
ARM GAS  /tmp/ccQmV08g.s 			page 18


 444              		.loc 1 200 10 view .LVU134
 445 0018 1A60     		str	r2, [r3]
 203:../common/ubertooth.c **** 
 446              		.loc 1 203 2 is_stmt 1 view .LVU135
 203:../common/ubertooth.c **** 
 447              		.loc 1 203 13 is_stmt 0 view .LVU136
 448 001a 1A68     		ldr	r2, [r3]
 203:../common/ubertooth.c **** 
 449              		.loc 1 203 21 view .LVU137
 450 001c 22F44032 		bic	r2, r2, #196608
 203:../common/ubertooth.c **** 
 451              		.loc 1 203 35 view .LVU138
 452 0020 42F40032 		orr	r2, r2, #131072
 203:../common/ubertooth.c **** 
 453              		.loc 1 203 10 view .LVU139
 454 0024 1A60     		str	r2, [r3]
 206:../common/ubertooth.c **** #endif
 455              		.loc 1 206 2 is_stmt 1 view .LVU140
 206:../common/ubertooth.c **** #endif
 456              		.loc 1 206 13 is_stmt 0 view .LVU141
 457 0026 1A68     		ldr	r2, [r3]
 206:../common/ubertooth.c **** #endif
 458              		.loc 1 206 21 view .LVU142
 459 0028 22F44022 		bic	r2, r2, #786432
 206:../common/ubertooth.c **** #endif
 460              		.loc 1 206 35 view .LVU143
 461 002c 42F40022 		orr	r2, r2, #524288
 206:../common/ubertooth.c **** #endif
 462              		.loc 1 206 10 view .LVU144
 463 0030 1A60     		str	r2, [r3]
 217:../common/ubertooth.c **** 
 464              		.loc 1 217 2 is_stmt 1 view .LVU145
 465 0032 4FF08052 		mov	r2, #268435456
 466 0036 074B     		ldr	r3, .L24+4
 467 0038 1A60     		str	r2, [r3]
 220:../common/ubertooth.c **** 	DIO_SSP_CR1 = (SSPCR1_MS);
 468              		.loc 1 220 2 view .LVU146
 220:../common/ubertooth.c **** 	DIO_SSP_CR1 = (SSPCR1_MS);
 469              		.loc 1 220 14 is_stmt 0 view .LVU147
 470 003a C722     		movs	r2, #199
 471 003c 064B     		ldr	r3, .L24+8
 472 003e 1A60     		str	r2, [r3]
 221:../common/ubertooth.c **** 	PCONP |= PCONP_PCSSP1;
 473              		.loc 1 221 2 is_stmt 1 view .LVU148
 221:../common/ubertooth.c **** 	PCONP |= PCONP_PCSSP1;
 474              		.loc 1 221 14 is_stmt 0 view .LVU149
 475 0040 0422     		movs	r2, #4
 476 0042 5A60     		str	r2, [r3, #4]
 222:../common/ubertooth.c **** }
 477              		.loc 1 222 2 is_stmt 1 view .LVU150
 222:../common/ubertooth.c **** }
 478              		.loc 1 222 8 is_stmt 0 view .LVU151
 479 0044 054A     		ldr	r2, .L24+12
 480 0046 1368     		ldr	r3, [r2]
 481 0048 43F48063 		orr	r3, r3, #1024
 482 004c 1360     		str	r3, [r2]
 223:../common/ubertooth.c **** 
ARM GAS  /tmp/ccQmV08g.s 			page 19


 483              		.loc 1 223 1 view .LVU152
 484 004e 7047     		bx	lr
 485              	.L25:
 486              		.align	2
 487              	.L24:
 488 0050 00C00240 		.word	1073922048
 489 0054 98C00920 		.word	537510040
 490 0058 00000340 		.word	1073938432
 491 005c C4C00F40 		.word	1074774212
 492              		.cfi_endproc
 493              	.LFE8:
 495              		.section	.text.atest_init,"ax",%progbits
 496              		.align	1
 497              		.global	atest_init
 498              		.syntax unified
 499              		.thumb
 500              		.thumb_func
 501              		.fpu softvfp
 503              	atest_init:
 504              	.LFB9:
 226:../common/ubertooth.c **** 	/*
 505              		.loc 1 226 1 is_stmt 1 view -0
 506              		.cfi_startproc
 507              		@ args = 0, pretend = 0, frame = 0
 508              		@ frame_needed = 0, uses_anonymous_args = 0
 509              		@ link register save eliminated.
 233:../common/ubertooth.c **** 	FIO0DIR &= ~(0x3 << 25); // set as input
 510              		.loc 1 233 2 view .LVU154
 233:../common/ubertooth.c **** 	FIO0DIR &= ~(0x3 << 25); // set as input
 511              		.loc 1 233 10 is_stmt 0 view .LVU155
 512 0000 094A     		ldr	r2, .L27
 513 0002 1368     		ldr	r3, [r2]
 514 0004 23F47013 		bic	r3, r3, #3932160
 515 0008 1360     		str	r3, [r2]
 234:../common/ubertooth.c **** 	PINMODE1 |= (0x5 << 19); // no pull-up/pull-down
 516              		.loc 1 234 2 is_stmt 1 view .LVU156
 234:../common/ubertooth.c **** 	PINMODE1 |= (0x5 << 19); // no pull-up/pull-down
 517              		.loc 1 234 10 is_stmt 0 view .LVU157
 518 000a 084A     		ldr	r2, .L27+4
 519 000c 1368     		ldr	r3, [r2]
 520 000e 23F0C063 		bic	r3, r3, #100663296
 521 0012 1360     		str	r3, [r2]
 235:../common/ubertooth.c **** 	PINMODE1 &= ~(0x5 << 18); // no pull-up/pull-down
 522              		.loc 1 235 2 is_stmt 1 view .LVU158
 235:../common/ubertooth.c **** 	PINMODE1 &= ~(0x5 << 18); // no pull-up/pull-down
 523              		.loc 1 235 11 is_stmt 0 view .LVU159
 524 0014 064B     		ldr	r3, .L27+8
 525 0016 1A68     		ldr	r2, [r3]
 526 0018 42F42012 		orr	r2, r2, #2621440
 527 001c 1A60     		str	r2, [r3]
 236:../common/ubertooth.c **** }
 528              		.loc 1 236 2 is_stmt 1 view .LVU160
 236:../common/ubertooth.c **** }
 529              		.loc 1 236 11 is_stmt 0 view .LVU161
 530 001e 1A68     		ldr	r2, [r3]
 531 0020 22F4A012 		bic	r2, r2, #1310720
 532 0024 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccQmV08g.s 			page 20


 237:../common/ubertooth.c **** 
 533              		.loc 1 237 1 view .LVU162
 534 0026 7047     		bx	lr
 535              	.L28:
 536              		.align	2
 537              	.L27:
 538 0028 04C00240 		.word	1073922052
 539 002c 00C00920 		.word	537509888
 540 0030 44C00240 		.word	1073922116
 541              		.cfi_endproc
 542              	.LFE9:
 544              		.section	.text.cc2400_spi,"ax",%progbits
 545              		.align	1
 546              		.global	cc2400_spi
 547              		.syntax unified
 548              		.thumb
 549              		.thumb_func
 550              		.fpu softvfp
 552              	cc2400_spi:
 553              	.LVL16:
 554              	.LFB11:
 291:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 555              		.loc 1 291 1 is_stmt 1 view -0
 556              		.cfi_startproc
 557              		@ args = 0, pretend = 0, frame = 0
 558              		@ frame_needed = 0, uses_anonymous_args = 0
 291:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 559              		.loc 1 291 1 is_stmt 0 view .LVU164
 560 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 561              		.cfi_def_cfa_offset 20
 562              		.cfi_offset 4, -20
 563              		.cfi_offset 5, -16
 564              		.cfi_offset 6, -12
 565              		.cfi_offset 7, -8
 566              		.cfi_offset 14, -4
 292:../common/ubertooth.c **** 
 567              		.loc 1 292 2 is_stmt 1 view .LVU165
 292:../common/ubertooth.c **** 
 568              		.loc 1 292 22 is_stmt 0 view .LVU166
 569 0002 451E     		subs	r5, r0, #1
 291:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 570              		.loc 1 291 1 view .LVU167
 571 0004 0346     		mov	r3, r0
 295:../common/ubertooth.c **** 
 572              		.loc 1 295 2 view .LVU168
 573 0006 2020     		movs	r0, #32
 574              	.LVL17:
 292:../common/ubertooth.c **** 
 575              		.loc 1 292 14 view .LVU169
 576 0008 0124     		movs	r4, #1
 304:../common/ubertooth.c **** 		/* Save a few cycles by avoiding the compare/branch */
 577              		.loc 1 304 3 view .LVU170
 578 000a 1027     		movs	r7, #16
 295:../common/ubertooth.c **** 
 579              		.loc 1 295 2 view .LVU171
 580 000c 0D4A     		ldr	r2, .L34
 306:../common/ubertooth.c **** 		SCLK_CLR;
ARM GAS  /tmp/ccQmV08g.s 			page 21


 581              		.loc 1 306 13 view .LVU172
 582 000e DFF83CC0 		ldr	ip, .L34+8
 295:../common/ubertooth.c **** 
 583              		.loc 1 295 2 view .LVU173
 584 0012 1060     		str	r0, [r2]
 297:../common/ubertooth.c **** 		if (data & msb)
 585              		.loc 1 297 8 view .LVU174
 586 0014 0846     		mov	r0, r1
 587 0016 0C49     		ldr	r1, .L34+4
 588              	.LVL18:
 292:../common/ubertooth.c **** 
 589              		.loc 1 292 14 view .LVU175
 590 0018 04FA05F5 		lsl	r5, r4, r5
 591              	.LVL19:
 295:../common/ubertooth.c **** 
 592              		.loc 1 295 2 is_stmt 1 view .LVU176
 297:../common/ubertooth.c **** 		if (data & msb)
 593              		.loc 1 297 2 view .LVU177
 594              	.L30:
 297:../common/ubertooth.c **** 		if (data & msb)
 595              		.loc 1 297 8 view .LVU178
 297:../common/ubertooth.c **** 		if (data & msb)
 596              		.loc 1 297 12 is_stmt 0 view .LVU179
 597 001c 013B     		subs	r3, r3, #1
 598              	.LVL20:
 297:../common/ubertooth.c **** 		if (data & msb)
 599              		.loc 1 297 12 view .LVU180
 600 001e DBB2     		uxtb	r3, r3
 601              	.LVL21:
 297:../common/ubertooth.c **** 		if (data & msb)
 602              		.loc 1 297 8 view .LVU181
 603 0020 FF2B     		cmp	r3, #255
 604 0022 02D1     		bne	.L33
 311:../common/ubertooth.c **** 
 605              		.loc 1 311 2 is_stmt 1 view .LVU182
 606 0024 2023     		movs	r3, #32
 607              	.LVL22:
 311:../common/ubertooth.c **** 
 608              		.loc 1 311 2 is_stmt 0 view .LVU183
 609 0026 0B60     		str	r3, [r1]
 313:../common/ubertooth.c **** }
 610              		.loc 1 313 2 is_stmt 1 view .LVU184
 314:../common/ubertooth.c **** 
 611              		.loc 1 314 1 is_stmt 0 view .LVU185
 612 0028 F0BD     		pop	{r4, r5, r6, r7, pc}
 613              	.LVL23:
 614              	.L33:
 298:../common/ubertooth.c **** 			MOSI_SET;
 615              		.loc 1 298 3 is_stmt 1 view .LVU186
 298:../common/ubertooth.c **** 			MOSI_SET;
 616              		.loc 1 298 6 is_stmt 0 view .LVU187
 617 002a 2842     		tst	r0, r5
 299:../common/ubertooth.c **** 		else
 618              		.loc 1 299 4 is_stmt 1 view .LVU188
 619 002c 14BF     		ite	ne
 620 002e 0C60     		strne	r4, [r1]
 301:../common/ubertooth.c **** 		data <<= 1;
ARM GAS  /tmp/ccQmV08g.s 			page 22


 621              		.loc 1 301 4 view .LVU189
 622 0030 1460     		streq	r4, [r2]
 302:../common/ubertooth.c **** 
 623              		.loc 1 302 3 view .LVU190
 624              	.LVL24:
 304:../common/ubertooth.c **** 		/* Save a few cycles by avoiding the compare/branch */
 625              		.loc 1 304 3 view .LVU191
 626 0032 0F60     		str	r7, [r1]
 306:../common/ubertooth.c **** 		SCLK_CLR;
 627              		.loc 1 306 3 view .LVU192
 306:../common/ubertooth.c **** 		SCLK_CLR;
 628              		.loc 1 306 13 is_stmt 0 view .LVU193
 629 0034 DCF80060 		ldr	r6, [ip]
 307:../common/ubertooth.c **** 	}
 630              		.loc 1 307 3 view .LVU194
 631 0038 1760     		str	r7, [r2]
 306:../common/ubertooth.c **** 		SCLK_CLR;
 632              		.loc 1 306 11 view .LVU195
 633 003a C6F34006 		ubfx	r6, r6, #1, #1
 306:../common/ubertooth.c **** 		SCLK_CLR;
 634              		.loc 1 306 8 view .LVU196
 635 003e 46EA4000 		orr	r0, r6, r0, lsl #1
 636              	.LVL25:
 307:../common/ubertooth.c **** 	}
 637              		.loc 1 307 3 is_stmt 1 view .LVU197
 638 0042 EBE7     		b	.L30
 639              	.L35:
 640              		.align	2
 641              	.L34:
 642 0044 5CC00920 		.word	537509980
 643 0048 58C00920 		.word	537509976
 644 004c 54C00920 		.word	537509972
 645              		.cfi_endproc
 646              	.LFE11:
 648              		.section	.text.cc2400_init,"ax",%progbits
 649              		.align	1
 650              		.global	cc2400_init
 651              		.syntax unified
 652              		.thumb
 653              		.thumb_func
 654              		.fpu softvfp
 656              	cc2400_init:
 657              	.LFB10:
 240:../common/ubertooth.c **** #ifdef TC13BADGE
 658              		.loc 1 240 1 view -0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
 661              		@ frame_needed = 0, uses_anonymous_args = 0
 662 0000 08B5     		push	{r3, lr}
 663              		.cfi_def_cfa_offset 8
 664              		.cfi_offset 3, -8
 665              		.cfi_offset 14, -4
 260:../common/ubertooth.c **** #endif
 666              		.loc 1 260 2 view .LVU199
 667 0002 FFF7FEFF 		bl	atest_init
 668              	.LVL26:
 264:../common/ubertooth.c **** 	wait_us(50);
ARM GAS  /tmp/ccQmV08g.s 			page 23


 669              		.loc 1 264 2 view .LVU200
 670 0006 4FF40073 		mov	r3, #512
 671 000a 0849     		ldr	r1, .L37
 265:../common/ubertooth.c **** 
 672              		.loc 1 265 2 is_stmt 0 view .LVU201
 673 000c 3220     		movs	r0, #50
 264:../common/ubertooth.c **** 	wait_us(50);
 674              		.loc 1 264 2 view .LVU202
 675 000e 0B60     		str	r3, [r1]
 265:../common/ubertooth.c **** 
 676              		.loc 1 265 2 is_stmt 1 view .LVU203
 677 0010 FFF7FEFF 		bl	wait_us
 678              	.LVL27:
 268:../common/ubertooth.c **** 
 679              		.loc 1 268 2 view .LVU204
 680 0014 2022     		movs	r2, #32
 681 0016 064B     		ldr	r3, .L37+4
 682              	.LBB12:
 683              	.LBB13:
 393:../common/ubertooth.c **** }
 684              		.loc 1 393 2 is_stmt 0 view .LVU205
 685 0018 1820     		movs	r0, #24
 686              	.LBE13:
 687              	.LBE12:
 268:../common/ubertooth.c **** 
 688              		.loc 1 268 2 view .LVU206
 689 001a 1A60     		str	r2, [r3]
 271:../common/ubertooth.c **** 
 690              		.loc 1 271 2 is_stmt 1 view .LVU207
 691 001c 4FF48043 		mov	r3, #16384
 692 0020 0B60     		str	r3, [r1]
 274:../common/ubertooth.c **** }
 693              		.loc 1 274 2 view .LVU208
 694              	.LVL28:
 695              	.LBB16:
 696              	.LBI12:
 390:../common/ubertooth.c **** {
 697              		.loc 1 390 6 view .LVU209
 698              	.LBB14:
 392:../common/ubertooth.c **** 	cc2400_spi(24, out);
 699              		.loc 1 392 2 view .LVU210
 393:../common/ubertooth.c **** }
 700              		.loc 1 393 2 view .LVU211
 701 0022 0449     		ldr	r1, .L37+8
 702              	.LBE14:
 703              	.LBE16:
 275:../common/ubertooth.c **** 
 704              		.loc 1 275 1 is_stmt 0 view .LVU212
 705 0024 BDE80840 		pop	{r3, lr}
 706              		.cfi_restore 14
 707              		.cfi_restore 3
 708              		.cfi_def_cfa_offset 0
 709              	.LBB17:
 710              	.LBB15:
 393:../common/ubertooth.c **** }
 711              		.loc 1 393 2 view .LVU213
 712 0028 FFF7FEBF 		b	cc2400_spi
ARM GAS  /tmp/ccQmV08g.s 			page 24


 713              	.LVL29:
 714              	.L38:
 715              		.align	2
 716              	.L37:
 717 002c 38C00920 		.word	537509944
 718 0030 58C00920 		.word	537509976
 719 0034 FF7F0D00 		.word	884735
 720              	.LBE15:
 721              	.LBE17:
 722              		.cfi_endproc
 723              	.LFE10:
 725              		.section	.text.cc2400_spi_continue_write_start,"ax",%progbits
 726              		.align	1
 727              		.global	cc2400_spi_continue_write_start
 728              		.syntax unified
 729              		.thumb
 730              		.thumb_func
 731              		.fpu softvfp
 733              	cc2400_spi_continue_write_start:
 734              	.LVL30:
 735              	.LFB12:
 318:../common/ubertooth.c **** 	int i;
 736              		.loc 1 318 1 is_stmt 1 view -0
 737              		.cfi_startproc
 738              		@ args = 0, pretend = 0, frame = 0
 739              		@ frame_needed = 0, uses_anonymous_args = 0
 318:../common/ubertooth.c **** 	int i;
 740              		.loc 1 318 1 is_stmt 0 view .LVU215
 741 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 742              		.cfi_def_cfa_offset 20
 743              		.cfi_offset 4, -20
 744              		.cfi_offset 5, -16
 745              		.cfi_offset 6, -12
 746              		.cfi_offset 7, -8
 747              		.cfi_offset 14, -4
 319:../common/ubertooth.c **** 
 748              		.loc 1 319 2 is_stmt 1 view .LVU216
 321:../common/ubertooth.c **** 
 749              		.loc 1 321 2 view .LVU217
 326:../common/ubertooth.c **** 			MOSI_SET;
 750              		.loc 1 326 11 is_stmt 0 view .LVU218
 751 0002 144D     		ldr	r5, .L48
 323:../common/ubertooth.c **** 	/* We first write the register address to the cc2400 */
 752              		.loc 1 323 2 view .LVU219
 753 0004 2022     		movs	r2, #32
 754 0006 4FF0080C 		mov	ip, #8
 755 000a AE46     		mov	lr, r5
 756 000c 0126     		movs	r6, #1
 332:../common/ubertooth.c **** 		SCLK_CLR;
 757              		.loc 1 332 3 view .LVU220
 758 000e 1024     		movs	r4, #16
 321:../common/ubertooth.c **** 
 759              		.loc 1 321 10 view .LVU221
 760 0010 114B     		ldr	r3, .L48+4
 761 0012 124F     		ldr	r7, .L48+8
 762 0014 1872     		strb	r0, [r3, #8]
 323:../common/ubertooth.c **** 	/* We first write the register address to the cc2400 */
ARM GAS  /tmp/ccQmV08g.s 			page 25


 763              		.loc 1 323 2 is_stmt 1 view .LVU222
 764 0016 124B     		ldr	r3, .L48+12
 765 0018 1A60     		str	r2, [r3]
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 766              		.loc 1 325 2 view .LVU223
 767              	.LVL31:
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 768              		.loc 1 325 14 view .LVU224
 769              	.L42:
 326:../common/ubertooth.c **** 			MOSI_SET;
 770              		.loc 1 326 3 view .LVU225
 326:../common/ubertooth.c **** 			MOSI_SET;
 771              		.loc 1 326 6 is_stmt 0 view .LVU226
 772 001a 2A68     		ldr	r2, [r5]
 773 001c 1042     		tst	r0, r2
 327:../common/ubertooth.c **** 		}
 774              		.loc 1 327 4 is_stmt 1 view .LVU227
 775 001e 14BF     		ite	ne
 776 0020 3E60     		strne	r6, [r7]
 330:../common/ubertooth.c **** 		}
 777              		.loc 1 330 4 view .LVU228
 778 0022 1E60     		streq	r6, [r3]
 332:../common/ubertooth.c **** 		SCLK_CLR;
 779              		.loc 1 332 3 view .LVU229
 334:../common/ubertooth.c **** 	}
 780              		.loc 1 334 7 is_stmt 0 view .LVU230
 781 0024 4000     		lsls	r0, r0, #1
 782              	.LVL32:
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 783              		.loc 1 325 2 view .LVU231
 784 0026 BCF1010C 		subs	ip, ip, #1
 785              	.LVL33:
 332:../common/ubertooth.c **** 		SCLK_CLR;
 786              		.loc 1 332 3 view .LVU232
 787 002a 3C60     		str	r4, [r7]
 333:../common/ubertooth.c **** 		reg <<= 1;
 788              		.loc 1 333 3 is_stmt 1 view .LVU233
 334:../common/ubertooth.c **** 	}
 789              		.loc 1 334 7 is_stmt 0 view .LVU234
 790 002c C0B2     		uxtb	r0, r0
 333:../common/ubertooth.c **** 		reg <<= 1;
 791              		.loc 1 333 3 view .LVU235
 792 002e 1C60     		str	r4, [r3]
 334:../common/ubertooth.c **** 	}
 793              		.loc 1 334 3 is_stmt 1 view .LVU236
 794              	.LVL34:
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 795              		.loc 1 325 21 view .LVU237
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 796              		.loc 1 325 14 view .LVU238
 325:../common/ubertooth.c **** 		if (reg & msb8) {
 797              		.loc 1 325 2 is_stmt 0 view .LVU239
 798 0030 F3D1     		bne	.L42
 337:../common/ubertooth.c **** 			MOSI_SET;
 799              		.loc 1 337 7 view .LVU240
 800 0032 1022     		movs	r2, #16
 801 0034 0124     		movs	r4, #1
ARM GAS  /tmp/ccQmV08g.s 			page 26


 343:../common/ubertooth.c **** 		SCLK_CLR;
 802              		.loc 1 343 3 view .LVU241
 803 0036 1046     		mov	r0, r2
 804              	.LVL35:
 337:../common/ubertooth.c **** 			MOSI_SET;
 805              		.loc 1 337 7 view .LVU242
 806 0038 BEF80450 		ldrh	r5, [lr, #4]
 807              	.L45:
 808              	.LVL36:
 337:../common/ubertooth.c **** 			MOSI_SET;
 809              		.loc 1 337 3 is_stmt 1 view .LVU243
 337:../common/ubertooth.c **** 			MOSI_SET;
 810              		.loc 1 337 6 is_stmt 0 view .LVU244
 811 003c 0D42     		tst	r5, r1
 338:../common/ubertooth.c **** 		}
 812              		.loc 1 338 4 is_stmt 1 view .LVU245
 813 003e 14BF     		ite	ne
 814 0040 3C60     		strne	r4, [r7]
 341:../common/ubertooth.c **** 		}
 815              		.loc 1 341 4 view .LVU246
 816 0042 1C60     		streq	r4, [r3]
 343:../common/ubertooth.c **** 		SCLK_CLR;
 817              		.loc 1 343 3 view .LVU247
 345:../common/ubertooth.c **** 	}
 818              		.loc 1 345 7 is_stmt 0 view .LVU248
 819 0044 4900     		lsls	r1, r1, #1
 820              	.LVL37:
 336:../common/ubertooth.c **** 		if (val & msb16) {
 821              		.loc 1 336 2 view .LVU249
 822 0046 013A     		subs	r2, r2, #1
 823              	.LVL38:
 343:../common/ubertooth.c **** 		SCLK_CLR;
 824              		.loc 1 343 3 view .LVU250
 825 0048 3860     		str	r0, [r7]
 344:../common/ubertooth.c **** 		val <<= 1;
 826              		.loc 1 344 3 is_stmt 1 view .LVU251
 345:../common/ubertooth.c **** 	}
 827              		.loc 1 345 7 is_stmt 0 view .LVU252
 828 004a 89B2     		uxth	r1, r1
 344:../common/ubertooth.c **** 		val <<= 1;
 829              		.loc 1 344 3 view .LVU253
 830 004c 1860     		str	r0, [r3]
 345:../common/ubertooth.c **** 	}
 831              		.loc 1 345 3 is_stmt 1 view .LVU254
 832              	.LVL39:
 336:../common/ubertooth.c **** 		if (val & msb16) {
 833              		.loc 1 336 22 view .LVU255
 336:../common/ubertooth.c **** 		if (val & msb16) {
 834              		.loc 1 336 14 view .LVU256
 336:../common/ubertooth.c **** 		if (val & msb16) {
 835              		.loc 1 336 2 is_stmt 0 view .LVU257
 836 004e F5D1     		bne	.L45
 347:../common/ubertooth.c **** 
 837              		.loc 1 347 1 view .LVU258
 838 0050 F0BD     		pop	{r4, r5, r6, r7, pc}
 839              	.L49:
 840 0052 00BF     		.align	2
ARM GAS  /tmp/ccQmV08g.s 			page 27


 841              	.L48:
 842 0054 00000000 		.word	.LANCHOR1
 843 0058 00000000 		.word	.LANCHOR0
 844 005c 58C00920 		.word	537509976
 845 0060 5CC00920 		.word	537509980
 846              		.cfi_endproc
 847              	.LFE12:
 849              		.section	.text.cc2400_spi_continue_write,"ax",%progbits
 850              		.align	1
 851              		.global	cc2400_spi_continue_write
 852              		.syntax unified
 853              		.thumb
 854              		.thumb_func
 855              		.fpu softvfp
 857              	cc2400_spi_continue_write:
 858              	.LVL40:
 859              	.LFB13:
 351:../common/ubertooth.c **** 	int i;
 860              		.loc 1 351 1 is_stmt 1 view -0
 861              		.cfi_startproc
 862              		@ args = 0, pretend = 0, frame = 0
 863              		@ frame_needed = 0, uses_anonymous_args = 0
 351:../common/ubertooth.c **** 	int i;
 864              		.loc 1 351 1 is_stmt 0 view .LVU260
 865 0000 70B5     		push	{r4, r5, r6, lr}
 866              		.cfi_def_cfa_offset 16
 867              		.cfi_offset 4, -16
 868              		.cfi_offset 5, -12
 869              		.cfi_offset 6, -8
 870              		.cfi_offset 14, -4
 352:../common/ubertooth.c **** 
 871              		.loc 1 352 2 is_stmt 1 view .LVU261
 359:../common/ubertooth.c **** 		if (val & msb16) {
 872              		.loc 1 359 2 view .LVU262
 873              	.LVL41:
 359:../common/ubertooth.c **** 		if (val & msb16) {
 874              		.loc 1 359 14 view .LVU263
 360:../common/ubertooth.c **** 			MOSI_SET;
 875              		.loc 1 360 7 is_stmt 0 view .LVU264
 876 0002 094B     		ldr	r3, .L55
 877 0004 0125     		movs	r5, #1
 878 0006 9E88     		ldrh	r6, [r3, #4]
 879 0008 1023     		movs	r3, #16
 366:../common/ubertooth.c **** 		SCLK_CLR;
 880              		.loc 1 366 3 view .LVU265
 881 000a 1846     		mov	r0, r3
 882              	.LVL42:
 366:../common/ubertooth.c **** 		SCLK_CLR;
 883              		.loc 1 366 3 view .LVU266
 884 000c 074C     		ldr	r4, .L55+4
 885 000e 084A     		ldr	r2, .L55+8
 886              	.LVL43:
 887              	.L53:
 360:../common/ubertooth.c **** 			MOSI_SET;
 888              		.loc 1 360 3 is_stmt 1 view .LVU267
 360:../common/ubertooth.c **** 			MOSI_SET;
 889              		.loc 1 360 6 is_stmt 0 view .LVU268
ARM GAS  /tmp/ccQmV08g.s 			page 28


 890 0010 0E42     		tst	r6, r1
 361:../common/ubertooth.c **** 		}
 891              		.loc 1 361 4 is_stmt 1 view .LVU269
 892 0012 14BF     		ite	ne
 893 0014 2560     		strne	r5, [r4]
 364:../common/ubertooth.c **** 		}
 894              		.loc 1 364 4 view .LVU270
 895 0016 1560     		streq	r5, [r2]
 366:../common/ubertooth.c **** 		SCLK_CLR;
 896              		.loc 1 366 3 view .LVU271
 368:../common/ubertooth.c **** 	}
 897              		.loc 1 368 7 is_stmt 0 view .LVU272
 898 0018 4900     		lsls	r1, r1, #1
 899              	.LVL44:
 359:../common/ubertooth.c **** 		if (val & msb16) {
 900              		.loc 1 359 2 view .LVU273
 901 001a 013B     		subs	r3, r3, #1
 902              	.LVL45:
 366:../common/ubertooth.c **** 		SCLK_CLR;
 903              		.loc 1 366 3 view .LVU274
 904 001c 2060     		str	r0, [r4]
 367:../common/ubertooth.c **** 		val <<= 1;
 905              		.loc 1 367 3 is_stmt 1 view .LVU275
 368:../common/ubertooth.c **** 	}
 906              		.loc 1 368 7 is_stmt 0 view .LVU276
 907 001e 89B2     		uxth	r1, r1
 367:../common/ubertooth.c **** 		val <<= 1;
 908              		.loc 1 367 3 view .LVU277
 909 0020 1060     		str	r0, [r2]
 368:../common/ubertooth.c **** 	}
 910              		.loc 1 368 3 is_stmt 1 view .LVU278
 911              	.LVL46:
 359:../common/ubertooth.c **** 		if (val & msb16) {
 912              		.loc 1 359 22 view .LVU279
 359:../common/ubertooth.c **** 		if (val & msb16) {
 913              		.loc 1 359 14 view .LVU280
 359:../common/ubertooth.c **** 		if (val & msb16) {
 914              		.loc 1 359 2 is_stmt 0 view .LVU281
 915 0022 F5D1     		bne	.L53
 370:../common/ubertooth.c **** 
 916              		.loc 1 370 1 view .LVU282
 917 0024 70BD     		pop	{r4, r5, r6, pc}
 918              	.L56:
 919 0026 00BF     		.align	2
 920              	.L55:
 921 0028 00000000 		.word	.LANCHOR1
 922 002c 58C00920 		.word	537509976
 923 0030 5CC00920 		.word	537509980
 924              		.cfi_endproc
 925              	.LFE13:
 927              		.section	.text.cc2400_spi_continue_write_stop,"ax",%progbits
 928              		.align	1
 929              		.global	cc2400_spi_continue_write_stop
 930              		.syntax unified
 931              		.thumb
 932              		.thumb_func
 933              		.fpu softvfp
ARM GAS  /tmp/ccQmV08g.s 			page 29


 935              	cc2400_spi_continue_write_stop:
 936              	.LFB14:
 374:../common/ubertooth.c **** 	CSN_SET;
 937              		.loc 1 374 1 is_stmt 1 view -0
 938              		.cfi_startproc
 939              		@ args = 0, pretend = 0, frame = 0
 940              		@ frame_needed = 0, uses_anonymous_args = 0
 941              		@ link register save eliminated.
 375:../common/ubertooth.c **** 	cur_reg = 0;
 942              		.loc 1 375 2 view .LVU284
 943 0000 2022     		movs	r2, #32
 944 0002 034B     		ldr	r3, .L58
 945 0004 1A60     		str	r2, [r3]
 376:../common/ubertooth.c **** }
 946              		.loc 1 376 2 view .LVU285
 376:../common/ubertooth.c **** }
 947              		.loc 1 376 10 is_stmt 0 view .LVU286
 948 0006 0022     		movs	r2, #0
 949 0008 024B     		ldr	r3, .L58+4
 950 000a 1A72     		strb	r2, [r3, #8]
 377:../common/ubertooth.c **** 
 951              		.loc 1 377 1 view .LVU287
 952 000c 7047     		bx	lr
 953              	.L59:
 954 000e 00BF     		.align	2
 955              	.L58:
 956 0010 58C00920 		.word	537509976
 957 0014 00000000 		.word	.LANCHOR0
 958              		.cfi_endproc
 959              	.LFE14:
 961              		.section	.text.cc2400_get,"ax",%progbits
 962              		.align	1
 963              		.global	cc2400_get
 964              		.syntax unified
 965              		.thumb
 966              		.thumb_func
 967              		.fpu softvfp
 969              	cc2400_get:
 970              	.LVL47:
 971              	.LFB15:
 381:../common/ubertooth.c **** 	u32 in;
 972              		.loc 1 381 1 is_stmt 1 view -0
 973              		.cfi_startproc
 974              		@ args = 0, pretend = 0, frame = 0
 975              		@ frame_needed = 0, uses_anonymous_args = 0
 381:../common/ubertooth.c **** 	u32 in;
 976              		.loc 1 381 1 is_stmt 0 view .LVU289
 977 0000 08B5     		push	{r3, lr}
 978              		.cfi_def_cfa_offset 8
 979              		.cfi_offset 3, -8
 980              		.cfi_offset 14, -4
 382:../common/ubertooth.c **** 
 981              		.loc 1 382 2 is_stmt 1 view .LVU290
 384:../common/ubertooth.c **** 	in = cc2400_spi(24, out);
 982              		.loc 1 384 2 view .LVU291
 983              	.LVL48:
 385:../common/ubertooth.c **** 	return in & 0xFFFF;
ARM GAS  /tmp/ccQmV08g.s 			page 30


 984              		.loc 1 385 2 view .LVU292
 384:../common/ubertooth.c **** 	in = cc2400_spi(24, out);
 985              		.loc 1 384 17 is_stmt 0 view .LVU293
 986 0002 40F08001 		orr	r1, r0, #128
 385:../common/ubertooth.c **** 	return in & 0xFFFF;
 987              		.loc 1 385 7 view .LVU294
 988 0006 0904     		lsls	r1, r1, #16
 989 0008 1820     		movs	r0, #24
 990              	.LVL49:
 385:../common/ubertooth.c **** 	return in & 0xFFFF;
 991              		.loc 1 385 7 view .LVU295
 992 000a FFF7FEFF 		bl	cc2400_spi
 993              	.LVL50:
 386:../common/ubertooth.c **** }
 994              		.loc 1 386 2 is_stmt 1 view .LVU296
 387:../common/ubertooth.c **** 
 995              		.loc 1 387 1 is_stmt 0 view .LVU297
 996 000e 80B2     		uxth	r0, r0
 997              	.LVL51:
 387:../common/ubertooth.c **** 
 998              		.loc 1 387 1 view .LVU298
 999 0010 08BD     		pop	{r3, pc}
 1000              		.cfi_endproc
 1001              	.LFE15:
 1003              		.section	.text.cc2400_set,"ax",%progbits
 1004              		.align	1
 1005              		.global	cc2400_set
 1006              		.syntax unified
 1007              		.thumb
 1008              		.thumb_func
 1009              		.fpu softvfp
 1011              	cc2400_set:
 1012              	.LVL52:
 1013              	.LFB16:
 391:../common/ubertooth.c **** 	u32 out = (reg << 16) | val;
 1014              		.loc 1 391 1 is_stmt 1 view -0
 1015              		.cfi_startproc
 1016              		@ args = 0, pretend = 0, frame = 0
 1017              		@ frame_needed = 0, uses_anonymous_args = 0
 1018              		@ link register save eliminated.
 391:../common/ubertooth.c **** 	u32 out = (reg << 16) | val;
 1019              		.loc 1 391 1 is_stmt 0 view .LVU300
 392:../common/ubertooth.c **** 	cc2400_spi(24, out);
 1020              		.loc 1 392 2 is_stmt 1 view .LVU301
 1021              	.LVL53:
 393:../common/ubertooth.c **** }
 1022              		.loc 1 393 2 view .LVU302
 1023 0000 41EA0041 		orr	r1, r1, r0, lsl #16
 1024              	.LVL54:
 393:../common/ubertooth.c **** }
 1025              		.loc 1 393 2 is_stmt 0 view .LVU303
 1026 0004 1820     		movs	r0, #24
 1027              	.LVL55:
 393:../common/ubertooth.c **** }
 1028              		.loc 1 393 2 view .LVU304
 1029 0006 FFF7FEBF 		b	cc2400_spi
 1030              	.LVL56:
ARM GAS  /tmp/ccQmV08g.s 			page 31


 393:../common/ubertooth.c **** }
 1031              		.loc 1 393 2 view .LVU305
 1032              		.cfi_endproc
 1033              	.LFE16:
 1035              		.section	.text.cc2400_get8,"ax",%progbits
 1036              		.align	1
 1037              		.global	cc2400_get8
 1038              		.syntax unified
 1039              		.thumb
 1040              		.thumb_func
 1041              		.fpu softvfp
 1043              	cc2400_get8:
 1044              	.LVL57:
 1045              	.LFB17:
 398:../common/ubertooth.c **** 	u16 in;
 1046              		.loc 1 398 1 is_stmt 1 view -0
 1047              		.cfi_startproc
 1048              		@ args = 0, pretend = 0, frame = 0
 1049              		@ frame_needed = 0, uses_anonymous_args = 0
 398:../common/ubertooth.c **** 	u16 in;
 1050              		.loc 1 398 1 is_stmt 0 view .LVU307
 1051 0000 08B5     		push	{r3, lr}
 1052              		.cfi_def_cfa_offset 8
 1053              		.cfi_offset 3, -8
 1054              		.cfi_offset 14, -4
 399:../common/ubertooth.c **** 
 1055              		.loc 1 399 2 is_stmt 1 view .LVU308
 401:../common/ubertooth.c **** 	in = cc2400_spi(16, out);
 1056              		.loc 1 401 2 view .LVU309
 1057              	.LVL58:
 402:../common/ubertooth.c **** 	return in & 0xFF;
 1058              		.loc 1 402 2 view .LVU310
 401:../common/ubertooth.c **** 	in = cc2400_spi(16, out);
 1059              		.loc 1 401 25 is_stmt 0 view .LVU311
 1060 0002 40F08001 		orr	r1, r0, #128
 402:../common/ubertooth.c **** 	return in & 0xFF;
 1061              		.loc 1 402 7 view .LVU312
 1062 0006 0902     		lsls	r1, r1, #8
 1063 0008 1020     		movs	r0, #16
 1064              	.LVL59:
 402:../common/ubertooth.c **** 	return in & 0xFF;
 1065              		.loc 1 402 7 view .LVU313
 1066 000a FFF7FEFF 		bl	cc2400_spi
 1067              	.LVL60:
 403:../common/ubertooth.c **** }
 1068              		.loc 1 403 2 is_stmt 1 view .LVU314
 404:../common/ubertooth.c **** 
 1069              		.loc 1 404 1 is_stmt 0 view .LVU315
 1070 000e C0B2     		uxtb	r0, r0
 1071              	.LVL61:
 404:../common/ubertooth.c **** 
 1072              		.loc 1 404 1 view .LVU316
 1073 0010 08BD     		pop	{r3, pc}
 1074              		.cfi_endproc
 1075              	.LFE17:
 1077              		.section	.text.cc2400_set8,"ax",%progbits
 1078              		.align	1
ARM GAS  /tmp/ccQmV08g.s 			page 32


 1079              		.global	cc2400_set8
 1080              		.syntax unified
 1081              		.thumb
 1082              		.thumb_func
 1083              		.fpu softvfp
 1085              	cc2400_set8:
 1086              	.LVL62:
 1087              	.LFB18:
 408:../common/ubertooth.c **** 	u32 out = (reg << 8) | val;
 1088              		.loc 1 408 1 is_stmt 1 view -0
 1089              		.cfi_startproc
 1090              		@ args = 0, pretend = 0, frame = 0
 1091              		@ frame_needed = 0, uses_anonymous_args = 0
 1092              		@ link register save eliminated.
 408:../common/ubertooth.c **** 	u32 out = (reg << 8) | val;
 1093              		.loc 1 408 1 is_stmt 0 view .LVU318
 409:../common/ubertooth.c **** 	cc2400_spi(16, out);
 1094              		.loc 1 409 2 is_stmt 1 view .LVU319
 1095              	.LVL63:
 410:../common/ubertooth.c **** }
 1096              		.loc 1 410 2 view .LVU320
 1097 0000 41EA0021 		orr	r1, r1, r0, lsl #8
 1098              	.LVL64:
 410:../common/ubertooth.c **** }
 1099              		.loc 1 410 2 is_stmt 0 view .LVU321
 1100 0004 1020     		movs	r0, #16
 1101              	.LVL65:
 410:../common/ubertooth.c **** }
 1102              		.loc 1 410 2 view .LVU322
 1103 0006 FFF7FEBF 		b	cc2400_spi
 1104              	.LVL66:
 410:../common/ubertooth.c **** }
 1105              		.loc 1 410 2 view .LVU323
 1106              		.cfi_endproc
 1107              	.LFE18:
 1109              		.section	.text.cc2400_fifo_write,"ax",%progbits
 1110              		.align	1
 1111              		.global	cc2400_fifo_write
 1112              		.syntax unified
 1113              		.thumb
 1114              		.thumb_func
 1115              		.fpu softvfp
 1117              	cc2400_fifo_write:
 1118              	.LVL67:
 1119              	.LFB20:
 418:../common/ubertooth.c **** 
 419:../common/ubertooth.c **** /* write multiple bytes to SPI */
 420:../common/ubertooth.c **** void cc2400_fifo_write(u8 len, u8 *data) {
 1120              		.loc 1 420 42 is_stmt 1 view -0
 1121              		.cfi_startproc
 1122              		@ args = 0, pretend = 0, frame = 0
 1123              		@ frame_needed = 0, uses_anonymous_args = 0
 1124              		.loc 1 420 42 is_stmt 0 view .LVU325
 1125 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1126              		.cfi_def_cfa_offset 20
 1127              		.cfi_offset 4, -20
 1128              		.cfi_offset 5, -16
ARM GAS  /tmp/ccQmV08g.s 			page 33


 1129              		.cfi_offset 6, -12
 1130              		.cfi_offset 7, -8
 1131              		.cfi_offset 14, -4
 421:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 1132              		.loc 1 421 2 is_stmt 1 view .LVU326
 1133              	.LVL68:
 422:../common/ubertooth.c **** 	u8 reg = FIFOREG;
 1134              		.loc 1 422 2 view .LVU327
 423:../common/ubertooth.c **** 	u8 i, j, temp;
 1135              		.loc 1 423 2 view .LVU328
 424:../common/ubertooth.c **** 
 425:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 426:../common/ubertooth.c **** 	CSN_CLR;
 1136              		.loc 1 426 2 view .LVU329
 1137 0002 2022     		movs	r2, #32
 1138 0004 0824     		movs	r4, #8
 422:../common/ubertooth.c **** 	u8 i, j, temp;
 1139              		.loc 1 422 5 is_stmt 0 view .LVU330
 1140 0006 7025     		movs	r5, #112
 1141 0008 0127     		movs	r7, #1
 427:../common/ubertooth.c **** 
 428:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 429:../common/ubertooth.c **** 		if (reg & msb)
 430:../common/ubertooth.c **** 			MOSI_SET;
 431:../common/ubertooth.c **** 		else
 432:../common/ubertooth.c **** 			MOSI_CLR;
 433:../common/ubertooth.c **** 		reg <<= 1;
 434:../common/ubertooth.c **** 		SCLK_SET;
 1142              		.loc 1 434 3 view .LVU331
 1143 000a 1026     		movs	r6, #16
 426:../common/ubertooth.c **** 
 1144              		.loc 1 426 2 view .LVU332
 1145 000c 194B     		ldr	r3, .L77
 1146 000e 1A60     		str	r2, [r3]
 428:../common/ubertooth.c **** 		if (reg & msb)
 1147              		.loc 1 428 2 is_stmt 1 view .LVU333
 1148              	.LVL69:
 428:../common/ubertooth.c **** 		if (reg & msb)
 1149              		.loc 1 428 14 view .LVU334
 1150 0010 194A     		ldr	r2, .L77+4
 1151              	.LVL70:
 1152              	.L67:
 429:../common/ubertooth.c **** 			MOSI_SET;
 1153              		.loc 1 429 3 view .LVU335
 429:../common/ubertooth.c **** 			MOSI_SET;
 1154              		.loc 1 429 6 is_stmt 0 view .LVU336
 1155 0012 15F0800F 		tst	r5, #128
 430:../common/ubertooth.c **** 		else
 1156              		.loc 1 430 4 is_stmt 1 view .LVU337
 1157 0016 04F1FF34 		add	r4, r4, #-1
 1158              	.LVL71:
 430:../common/ubertooth.c **** 		else
 1159              		.loc 1 430 4 is_stmt 0 view .LVU338
 1160 001a 14BF     		ite	ne
 1161 001c 1760     		strne	r7, [r2]
 432:../common/ubertooth.c **** 		reg <<= 1;
 1162              		.loc 1 432 4 is_stmt 1 view .LVU339
ARM GAS  /tmp/ccQmV08g.s 			page 34


 1163 001e 1F60     		streq	r7, [r3]
 433:../common/ubertooth.c **** 		SCLK_SET;
 1164              		.loc 1 433 3 view .LVU340
 433:../common/ubertooth.c **** 		SCLK_SET;
 1165              		.loc 1 433 7 is_stmt 0 view .LVU341
 1166 0020 6D00     		lsls	r5, r5, #1
 1167              	.LVL72:
 428:../common/ubertooth.c **** 		if (reg & msb)
 1168              		.loc 1 428 2 view .LVU342
 1169 0022 14F0FF04 		ands	r4, r4, #255
 1170              		.loc 1 434 3 view .LVU343
 1171 0026 1660     		str	r6, [r2]
 433:../common/ubertooth.c **** 		SCLK_SET;
 1172              		.loc 1 433 7 view .LVU344
 1173 0028 EDB2     		uxtb	r5, r5
 1174              	.LVL73:
 1175              		.loc 1 434 3 is_stmt 1 view .LVU345
 435:../common/ubertooth.c **** 		SCLK_CLR;
 1176              		.loc 1 435 3 view .LVU346
 1177 002a 1E60     		str	r6, [r3]
 428:../common/ubertooth.c **** 		if (reg & msb)
 1178              		.loc 1 428 21 view .LVU347
 428:../common/ubertooth.c **** 		if (reg & msb)
 1179              		.loc 1 428 14 view .LVU348
 428:../common/ubertooth.c **** 		if (reg & msb)
 1180              		.loc 1 428 2 is_stmt 0 view .LVU349
 1181 002c F1D1     		bne	.L67
 1182 002e 0126     		movs	r6, #1
 436:../common/ubertooth.c **** 	}
 437:../common/ubertooth.c **** 
 438:../common/ubertooth.c **** 	for (i = 0; i < len; ++i) {
 439:../common/ubertooth.c **** 		temp = data[i];
 440:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 441:../common/ubertooth.c **** 			if (temp & msb)
 442:../common/ubertooth.c **** 				MOSI_SET;
 443:../common/ubertooth.c **** 			else
 444:../common/ubertooth.c **** 				MOSI_CLR;
 445:../common/ubertooth.c **** 			temp <<= 1;
 446:../common/ubertooth.c **** 			SCLK_SET;
 1183              		.loc 1 446 4 view .LVU350
 1184 0030 1027     		movs	r7, #16
 1185 0032 0844     		add	r0, r0, r1
 1186              	.LVL74:
 1187              	.L68:
 438:../common/ubertooth.c **** 		temp = data[i];
 1188              		.loc 1 438 14 is_stmt 1 discriminator 1 view .LVU351
 438:../common/ubertooth.c **** 		temp = data[i];
 1189              		.loc 1 438 2 is_stmt 0 discriminator 1 view .LVU352
 1190 0034 8842     		cmp	r0, r1
 1191 0036 0AD1     		bne	.L72
 1192 0038 0821     		movs	r1, #8
 1193              	.LVL75:
 447:../common/ubertooth.c **** 			SCLK_CLR;
 448:../common/ubertooth.c **** 		}
 449:../common/ubertooth.c **** 	}
 450:../common/ubertooth.c **** 
 451:../common/ubertooth.c **** 	// // this is necessary to clock in the last byte
ARM GAS  /tmp/ccQmV08g.s 			page 35


 452:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 453:../common/ubertooth.c **** 		SCLK_SET;
 1194              		.loc 1 453 3 view .LVU353
 1195 003a 1020     		movs	r0, #16
 1196              	.L73:
 1197              	.LVL76:
 1198              		.loc 1 453 3 is_stmt 1 discriminator 3 view .LVU354
 1199 003c 0139     		subs	r1, r1, #1
 1200              	.LVL77:
 452:../common/ubertooth.c **** 		SCLK_SET;
 1201              		.loc 1 452 2 is_stmt 0 discriminator 3 view .LVU355
 1202 003e 11F0FF01 		ands	r1, r1, #255
 1203              		.loc 1 453 3 discriminator 3 view .LVU356
 1204 0042 1060     		str	r0, [r2]
 454:../common/ubertooth.c **** 		SCLK_CLR;
 1205              		.loc 1 454 3 is_stmt 1 discriminator 3 view .LVU357
 1206 0044 1860     		str	r0, [r3]
 452:../common/ubertooth.c **** 		SCLK_SET;
 1207              		.loc 1 452 21 discriminator 3 view .LVU358
 452:../common/ubertooth.c **** 		SCLK_SET;
 1208              		.loc 1 452 14 discriminator 3 view .LVU359
 452:../common/ubertooth.c **** 		SCLK_SET;
 1209              		.loc 1 452 2 is_stmt 0 discriminator 3 view .LVU360
 1210 0046 F9D1     		bne	.L73
 455:../common/ubertooth.c **** 	}
 456:../common/ubertooth.c **** 	
 457:../common/ubertooth.c **** 	// spi_delay();
 458:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 459:../common/ubertooth.c **** 	CSN_SET;
 1211              		.loc 1 459 2 is_stmt 1 view .LVU361
 1212 0048 2023     		movs	r3, #32
 1213 004a 1360     		str	r3, [r2]
 460:../common/ubertooth.c **** }
 1214              		.loc 1 460 1 is_stmt 0 view .LVU362
 1215 004c F0BD     		pop	{r4, r5, r6, r7, pc}
 1216              	.LVL78:
 1217              	.L72:
 439:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 1218              		.loc 1 439 3 is_stmt 1 view .LVU363
 439:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 1219              		.loc 1 439 8 is_stmt 0 view .LVU364
 1220 004e 0824     		movs	r4, #8
 1221 0050 11F8015B 		ldrb	r5, [r1], #1	@ zero_extendqisi2
 1222              	.LVL79:
 440:../common/ubertooth.c **** 			if (temp & msb)
 1223              		.loc 1 440 3 is_stmt 1 view .LVU365
 440:../common/ubertooth.c **** 			if (temp & msb)
 1224              		.loc 1 440 15 view .LVU366
 1225              	.L71:
 441:../common/ubertooth.c **** 				MOSI_SET;
 1226              		.loc 1 441 4 view .LVU367
 441:../common/ubertooth.c **** 				MOSI_SET;
 1227              		.loc 1 441 7 is_stmt 0 view .LVU368
 1228 0054 15F0800F 		tst	r5, #128
 442:../common/ubertooth.c **** 			else
 1229              		.loc 1 442 5 is_stmt 1 view .LVU369
 1230 0058 04F1FF34 		add	r4, r4, #-1
ARM GAS  /tmp/ccQmV08g.s 			page 36


 1231              	.LVL80:
 442:../common/ubertooth.c **** 			else
 1232              		.loc 1 442 5 is_stmt 0 view .LVU370
 1233 005c 14BF     		ite	ne
 1234 005e 1660     		strne	r6, [r2]
 444:../common/ubertooth.c **** 			temp <<= 1;
 1235              		.loc 1 444 5 is_stmt 1 view .LVU371
 1236 0060 1E60     		streq	r6, [r3]
 445:../common/ubertooth.c **** 			SCLK_SET;
 1237              		.loc 1 445 4 view .LVU372
 445:../common/ubertooth.c **** 			SCLK_SET;
 1238              		.loc 1 445 9 is_stmt 0 view .LVU373
 1239 0062 6D00     		lsls	r5, r5, #1
 1240              	.LVL81:
 440:../common/ubertooth.c **** 			if (temp & msb)
 1241              		.loc 1 440 3 view .LVU374
 1242 0064 14F0FF04 		ands	r4, r4, #255
 446:../common/ubertooth.c **** 			SCLK_CLR;
 1243              		.loc 1 446 4 view .LVU375
 1244 0068 1760     		str	r7, [r2]
 445:../common/ubertooth.c **** 			SCLK_SET;
 1245              		.loc 1 445 9 view .LVU376
 1246 006a EDB2     		uxtb	r5, r5
 1247              	.LVL82:
 446:../common/ubertooth.c **** 			SCLK_CLR;
 1248              		.loc 1 446 4 is_stmt 1 view .LVU377
 447:../common/ubertooth.c **** 		}
 1249              		.loc 1 447 4 view .LVU378
 1250 006c 1F60     		str	r7, [r3]
 440:../common/ubertooth.c **** 			if (temp & msb)
 1251              		.loc 1 440 22 view .LVU379
 440:../common/ubertooth.c **** 			if (temp & msb)
 1252              		.loc 1 440 15 view .LVU380
 440:../common/ubertooth.c **** 			if (temp & msb)
 1253              		.loc 1 440 3 is_stmt 0 view .LVU381
 1254 006e F1D1     		bne	.L71
 1255 0070 E0E7     		b	.L68
 1256              	.L78:
 1257 0072 00BF     		.align	2
 1258              	.L77:
 1259 0074 5CC00920 		.word	537509980
 1260 0078 58C00920 		.word	537509976
 1261              		.cfi_endproc
 1262              	.LFE20:
 1264              		.section	.text.cc2400_fifo_continous_write,"ax",%progbits
 1265              		.align	1
 1266              		.global	cc2400_fifo_continous_write
 1267              		.syntax unified
 1268              		.thumb
 1269              		.thumb_func
 1270              		.fpu softvfp
 1272              	cc2400_fifo_continous_write:
 1273              	.LVL83:
 1274              	.LFB21:
 461:../common/ubertooth.c **** 
 462:../common/ubertooth.c **** void cc2400_fifo_continous_write(u8 len, u8 *data, uint32_t fifo_thres) {
 1275              		.loc 1 462 73 is_stmt 1 view -0
ARM GAS  /tmp/ccQmV08g.s 			page 37


 1276              		.cfi_startproc
 1277              		@ args = 0, pretend = 0, frame = 0
 1278              		@ frame_needed = 0, uses_anonymous_args = 0
 1279              		.loc 1 462 73 is_stmt 0 view .LVU383
 1280 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1281              		.cfi_def_cfa_offset 32
 1282              		.cfi_offset 3, -32
 1283              		.cfi_offset 4, -28
 1284              		.cfi_offset 5, -24
 1285              		.cfi_offset 6, -20
 1286              		.cfi_offset 7, -16
 1287              		.cfi_offset 8, -12
 1288              		.cfi_offset 9, -8
 1289              		.cfi_offset 14, -4
 463:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 1290              		.loc 1 463 2 is_stmt 1 view .LVU384
 1291              	.LVL84:
 464:../common/ubertooth.c **** 	u8 reg = FIFOREG;
 1292              		.loc 1 464 2 view .LVU385
 465:../common/ubertooth.c **** 	u8 i, j, temp, tx_len;
 1293              		.loc 1 465 2 view .LVU386
 466:../common/ubertooth.c **** 	uint32_t fifo_space = 32;
 1294              		.loc 1 466 2 view .LVU387
 467:../common/ubertooth.c **** 	u8 *ptr = data;
 1295              		.loc 1 467 2 view .LVU388
 468:../common/ubertooth.c **** 
 469:../common/ubertooth.c **** 	while (len != 0) {
 1296              		.loc 1 469 2 view .LVU389
 466:../common/ubertooth.c **** 	u8 *ptr = data;
 1297              		.loc 1 466 11 is_stmt 0 view .LVU390
 1298 0004 2023     		movs	r3, #32
 462:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 1299              		.loc 1 462 73 view .LVU391
 1300 0006 1746     		mov	r7, r2
 464:../common/ubertooth.c **** 	u8 i, j, temp, tx_len;
 1301              		.loc 1 464 5 view .LVU392
 1302 0008 7026     		movs	r6, #112
 470:../common/ubertooth.c **** 		while (!GIO6);
 1303              		.loc 1 470 11 view .LVU393
 1304 000a DFF8CC90 		ldr	r9, .L99+12
 471:../common/ubertooth.c **** 		if (len >= fifo_space) {
 472:../common/ubertooth.c **** 			len -= fifo_space;
 473:../common/ubertooth.c **** 			tx_len = fifo_space;
 474:../common/ubertooth.c **** 		}
 475:../common/ubertooth.c **** 		else {
 476:../common/ubertooth.c **** 			tx_len = len;
 477:../common/ubertooth.c **** 			len = 0;
 478:../common/ubertooth.c **** 		}
 479:../common/ubertooth.c **** 
 480:../common/ubertooth.c **** 		/* start transaction by dropping CSN */
 481:../common/ubertooth.c **** 		CSN_CLR;
 1305              		.loc 1 481 3 view .LVU394
 1306 000e 2F4C     		ldr	r4, .L99
 1307              	.LVL85:
 1308              	.L80:
 469:../common/ubertooth.c **** 		while (!GIO6);
 1309              		.loc 1 469 8 is_stmt 1 view .LVU395
ARM GAS  /tmp/ccQmV08g.s 			page 38


 1310 0010 08B9     		cbnz	r0, .L81
 482:../common/ubertooth.c **** 		for (i = 0; i < 8; ++i) {
 483:../common/ubertooth.c **** 			if (reg & msb)
 484:../common/ubertooth.c **** 				MOSI_SET;
 485:../common/ubertooth.c **** 			else
 486:../common/ubertooth.c **** 				MOSI_CLR;
 487:../common/ubertooth.c **** 			reg <<= 1;
 488:../common/ubertooth.c **** 			SCLK_SET;
 489:../common/ubertooth.c **** 			SCLK_CLR;
 490:../common/ubertooth.c **** 		}
 491:../common/ubertooth.c **** 
 492:../common/ubertooth.c **** 		// Transfer via SPI
 493:../common/ubertooth.c **** 		for (i = 0; i < tx_len; ++i) {
 494:../common/ubertooth.c **** 			temp = *ptr;
 495:../common/ubertooth.c **** 			for (j = 0; j < 8; ++j) {
 496:../common/ubertooth.c **** 				if (temp & msb)
 497:../common/ubertooth.c **** 					MOSI_SET;
 498:../common/ubertooth.c **** 				else
 499:../common/ubertooth.c **** 					MOSI_CLR;
 500:../common/ubertooth.c **** 				temp <<= 1;
 501:../common/ubertooth.c **** 				SCLK_SET;
 502:../common/ubertooth.c **** 				SCLK_CLR;
 503:../common/ubertooth.c **** 			}
 504:../common/ubertooth.c **** 			ptr++;
 505:../common/ubertooth.c **** 		}
 506:../common/ubertooth.c **** 		// this is necessary to clock in the last byte
 507:../common/ubertooth.c **** 		for (i = 0; i < 8; ++i) {
 508:../common/ubertooth.c **** 			SCLK_SET;
 509:../common/ubertooth.c **** 			SCLK_CLR;
 510:../common/ubertooth.c **** 		}
 511:../common/ubertooth.c **** 		spi_delay();
 512:../common/ubertooth.c **** 		/* end transaction by raising CSN */
 513:../common/ubertooth.c **** 		CSN_SET;
 514:../common/ubertooth.c **** 		TX_SET;
 515:../common/ubertooth.c **** 		RX_CLR;
 516:../common/ubertooth.c **** 		fifo_space = fifo_thres;
 517:../common/ubertooth.c **** 	}
 518:../common/ubertooth.c **** 
 519:../common/ubertooth.c **** 
 520:../common/ubertooth.c **** 
 521:../common/ubertooth.c **** 
 522:../common/ubertooth.c **** }
 1311              		.loc 1 522 1 is_stmt 0 view .LVU396
 1312 0012 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1313              	.LVL86:
 1314              	.L81:
 470:../common/ubertooth.c **** 		if (len >= fifo_space) {
 1315              		.loc 1 470 16 is_stmt 1 discriminator 1 view .LVU397
 470:../common/ubertooth.c **** 		if (len >= fifo_space) {
 1316              		.loc 1 470 9 discriminator 1 view .LVU398
 470:../common/ubertooth.c **** 		if (len >= fifo_space) {
 1317              		.loc 1 470 11 is_stmt 0 discriminator 1 view .LVU399
 1318 0016 D9F80020 		ldr	r2, [r9]
 470:../common/ubertooth.c **** 		if (len >= fifo_space) {
 1319              		.loc 1 470 9 discriminator 1 view .LVU400
 1320 001a 5207     		lsls	r2, r2, #29
 1321 001c FBD5     		bpl	.L81
ARM GAS  /tmp/ccQmV08g.s 			page 39


 471:../common/ubertooth.c **** 			len -= fifo_space;
 1322              		.loc 1 471 3 is_stmt 1 view .LVU401
 471:../common/ubertooth.c **** 			len -= fifo_space;
 1323              		.loc 1 471 6 is_stmt 0 view .LVU402
 1324 001e 9842     		cmp	r0, r3
 472:../common/ubertooth.c **** 			tx_len = fifo_space;
 1325              		.loc 1 472 4 is_stmt 1 view .LVU403
 472:../common/ubertooth.c **** 			tx_len = fifo_space;
 1326              		.loc 1 472 8 is_stmt 0 view .LVU404
 1327 0020 21BF     		itttt	cs
 1328 0022 DBB2     		uxtbcs	r3, r3
 1329              	.LVL87:
 472:../common/ubertooth.c **** 			tx_len = fifo_space;
 1330              		.loc 1 472 8 view .LVU405
 1331 0024 C01A     		subcs	r0, r0, r3
 1332              	.LVL88:
 472:../common/ubertooth.c **** 			tx_len = fifo_space;
 1333              		.loc 1 472 8 view .LVU406
 1334 0026 5FFA80F8 		uxtbcs	r8, r0
 1335              	.LVL89:
 473:../common/ubertooth.c **** 		}
 1336              		.loc 1 473 4 is_stmt 1 view .LVU407
 473:../common/ubertooth.c **** 		}
 1337              		.loc 1 473 11 is_stmt 0 view .LVU408
 1338 002a 1846     		movcs	r0, r3
 481:../common/ubertooth.c **** 		for (i = 0; i < 8; ++i) {
 1339              		.loc 1 481 3 view .LVU409
 1340 002c 4FF02003 		mov	r3, #32
 1341              	.LVL90:
 477:../common/ubertooth.c **** 		}
 1342              		.loc 1 477 8 view .LVU410
 1343 0030 38BF     		it	cc
 1344 0032 4FF00008 		movcc	r8, #0
 1345              	.LVL91:
 481:../common/ubertooth.c **** 		for (i = 0; i < 8; ++i) {
 1346              		.loc 1 481 3 is_stmt 1 view .LVU411
 1347 0036 2360     		str	r3, [r4]
 482:../common/ubertooth.c **** 			if (reg & msb)
 1348              		.loc 1 482 3 view .LVU412
 1349              	.LVL92:
 482:../common/ubertooth.c **** 			if (reg & msb)
 1350              		.loc 1 482 15 view .LVU413
 1351 0038 4FF0010C 		mov	ip, #1
 481:../common/ubertooth.c **** 		for (i = 0; i < 8; ++i) {
 1352              		.loc 1 481 3 is_stmt 0 view .LVU414
 1353 003c 0823     		movs	r3, #8
 488:../common/ubertooth.c **** 			SCLK_CLR;
 1354              		.loc 1 488 4 view .LVU415
 1355 003e 1022     		movs	r2, #16
 1356 0040 234D     		ldr	r5, .L99+4
 1357              	.LVL93:
 1358              	.L85:
 483:../common/ubertooth.c **** 				MOSI_SET;
 1359              		.loc 1 483 4 is_stmt 1 view .LVU416
 483:../common/ubertooth.c **** 				MOSI_SET;
 1360              		.loc 1 483 7 is_stmt 0 view .LVU417
 1361 0042 16F0800F 		tst	r6, #128
ARM GAS  /tmp/ccQmV08g.s 			page 40


 484:../common/ubertooth.c **** 			else
 1362              		.loc 1 484 5 is_stmt 1 view .LVU418
 1363 0046 03F1FF33 		add	r3, r3, #-1
 1364              	.LVL94:
 484:../common/ubertooth.c **** 			else
 1365              		.loc 1 484 5 is_stmt 0 view .LVU419
 1366 004a 14BF     		ite	ne
 1367 004c C5F800C0 		strne	ip, [r5]
 486:../common/ubertooth.c **** 			reg <<= 1;
 1368              		.loc 1 486 5 is_stmt 1 view .LVU420
 1369 0050 C4F800C0 		streq	ip, [r4]
 487:../common/ubertooth.c **** 			SCLK_SET;
 1370              		.loc 1 487 4 view .LVU421
 487:../common/ubertooth.c **** 			SCLK_SET;
 1371              		.loc 1 487 8 is_stmt 0 view .LVU422
 1372 0054 7600     		lsls	r6, r6, #1
 1373              	.LVL95:
 482:../common/ubertooth.c **** 			if (reg & msb)
 1374              		.loc 1 482 3 view .LVU423
 1375 0056 13F0FF03 		ands	r3, r3, #255
 488:../common/ubertooth.c **** 			SCLK_CLR;
 1376              		.loc 1 488 4 view .LVU424
 1377 005a 2A60     		str	r2, [r5]
 487:../common/ubertooth.c **** 			SCLK_SET;
 1378              		.loc 1 487 8 view .LVU425
 1379 005c F6B2     		uxtb	r6, r6
 1380              	.LVL96:
 488:../common/ubertooth.c **** 			SCLK_CLR;
 1381              		.loc 1 488 4 is_stmt 1 view .LVU426
 489:../common/ubertooth.c **** 		}
 1382              		.loc 1 489 4 view .LVU427
 1383 005e 2260     		str	r2, [r4]
 482:../common/ubertooth.c **** 			if (reg & msb)
 1384              		.loc 1 482 22 view .LVU428
 482:../common/ubertooth.c **** 			if (reg & msb)
 1385              		.loc 1 482 15 view .LVU429
 482:../common/ubertooth.c **** 			if (reg & msb)
 1386              		.loc 1 482 3 is_stmt 0 view .LVU430
 1387 0060 EFD1     		bne	.L85
 1388 0062 4FF0010C 		mov	ip, #1
 501:../common/ubertooth.c **** 				SCLK_CLR;
 1389              		.loc 1 501 5 view .LVU431
 1390 0066 4FF0100E 		mov	lr, #16
 1391 006a 0844     		add	r0, r0, r1
 1392              	.LVL97:
 1393              	.L86:
 493:../common/ubertooth.c **** 			temp = *ptr;
 1394              		.loc 1 493 15 is_stmt 1 discriminator 1 view .LVU432
 493:../common/ubertooth.c **** 			temp = *ptr;
 1395              		.loc 1 493 3 is_stmt 0 discriminator 1 view .LVU433
 1396 006c 8842     		cmp	r0, r1
 1397 006e 17D1     		bne	.L90
 1398              	.LVL98:
 493:../common/ubertooth.c **** 			temp = *ptr;
 1399              		.loc 1 493 3 discriminator 1 view .LVU434
 1400 0070 0146     		mov	r1, r0
 1401              	.LVL99:
ARM GAS  /tmp/ccQmV08g.s 			page 41


 493:../common/ubertooth.c **** 			temp = *ptr;
 1402              		.loc 1 493 3 view .LVU435
 1403 0072 0823     		movs	r3, #8
 508:../common/ubertooth.c **** 			SCLK_CLR;
 1404              		.loc 1 508 4 view .LVU436
 1405 0074 1022     		movs	r2, #16
 1406              	.L91:
 1407              	.LVL100:
 508:../common/ubertooth.c **** 			SCLK_CLR;
 1408              		.loc 1 508 4 is_stmt 1 discriminator 3 view .LVU437
 1409 0076 013B     		subs	r3, r3, #1
 1410              	.LVL101:
 507:../common/ubertooth.c **** 			SCLK_SET;
 1411              		.loc 1 507 3 is_stmt 0 discriminator 3 view .LVU438
 1412 0078 13F0FF03 		ands	r3, r3, #255
 508:../common/ubertooth.c **** 			SCLK_CLR;
 1413              		.loc 1 508 4 discriminator 3 view .LVU439
 1414 007c 2A60     		str	r2, [r5]
 509:../common/ubertooth.c **** 		}
 1415              		.loc 1 509 4 is_stmt 1 discriminator 3 view .LVU440
 1416 007e 2260     		str	r2, [r4]
 507:../common/ubertooth.c **** 			SCLK_SET;
 1417              		.loc 1 507 22 discriminator 3 view .LVU441
 507:../common/ubertooth.c **** 			SCLK_SET;
 1418              		.loc 1 507 15 discriminator 3 view .LVU442
 507:../common/ubertooth.c **** 			SCLK_SET;
 1419              		.loc 1 507 3 is_stmt 0 discriminator 3 view .LVU443
 1420 0080 F9D1     		bne	.L91
 511:../common/ubertooth.c **** 		/* end transaction by raising CSN */
 1421              		.loc 1 511 3 is_stmt 1 view .LVU444
 1422 0082 FFF7FEFF 		bl	spi_delay
 1423              	.LVL102:
 513:../common/ubertooth.c **** 		TX_SET;
 1424              		.loc 1 513 3 view .LVU445
 1425 0086 2023     		movs	r3, #32
 514:../common/ubertooth.c **** 		RX_CLR;
 1426              		.loc 1 514 3 is_stmt 0 view .LVU446
 1427 0088 4FF00052 		mov	r2, #536870912
 513:../common/ubertooth.c **** 		TX_SET;
 1428              		.loc 1 513 3 view .LVU447
 1429 008c 2B60     		str	r3, [r5]
 514:../common/ubertooth.c **** 		RX_CLR;
 1430              		.loc 1 514 3 is_stmt 1 view .LVU448
 1431 008e 114B     		ldr	r3, .L99+8
 515:../common/ubertooth.c **** 		fifo_space = fifo_thres;
 1432              		.loc 1 515 3 is_stmt 0 view .LVU449
 1433 0090 4046     		mov	r0, r8
 514:../common/ubertooth.c **** 		RX_CLR;
 1434              		.loc 1 514 3 view .LVU450
 1435 0092 1A60     		str	r2, [r3]
 515:../common/ubertooth.c **** 		fifo_space = fifo_thres;
 1436              		.loc 1 515 3 is_stmt 1 view .LVU451
 1437 0094 4FF40042 		mov	r2, #32768
 1438 0098 43F85C2C 		str	r2, [r3, #-92]
 516:../common/ubertooth.c **** 	}
 1439              		.loc 1 516 3 view .LVU452
 1440              	.LVL103:
ARM GAS  /tmp/ccQmV08g.s 			page 42


 516:../common/ubertooth.c **** 	}
 1441              		.loc 1 516 14 is_stmt 0 view .LVU453
 1442 009c 3B46     		mov	r3, r7
 1443 009e B7E7     		b	.L80
 1444              	.LVL104:
 1445              	.L90:
 494:../common/ubertooth.c **** 			for (j = 0; j < 8; ++j) {
 1446              		.loc 1 494 4 is_stmt 1 view .LVU454
 494:../common/ubertooth.c **** 			for (j = 0; j < 8; ++j) {
 1447              		.loc 1 494 9 is_stmt 0 view .LVU455
 1448 00a0 0823     		movs	r3, #8
 1449 00a2 11F8012B 		ldrb	r2, [r1], #1	@ zero_extendqisi2
 1450              	.LVL105:
 495:../common/ubertooth.c **** 				if (temp & msb)
 1451              		.loc 1 495 4 is_stmt 1 view .LVU456
 495:../common/ubertooth.c **** 				if (temp & msb)
 1452              		.loc 1 495 16 view .LVU457
 1453              	.L89:
 496:../common/ubertooth.c **** 					MOSI_SET;
 1454              		.loc 1 496 5 view .LVU458
 496:../common/ubertooth.c **** 					MOSI_SET;
 1455              		.loc 1 496 8 is_stmt 0 view .LVU459
 1456 00a6 12F0800F 		tst	r2, #128
 497:../common/ubertooth.c **** 				else
 1457              		.loc 1 497 6 is_stmt 1 view .LVU460
 1458 00aa 03F1FF33 		add	r3, r3, #-1
 1459              	.LVL106:
 497:../common/ubertooth.c **** 				else
 1460              		.loc 1 497 6 is_stmt 0 view .LVU461
 1461 00ae 14BF     		ite	ne
 1462 00b0 C5F800C0 		strne	ip, [r5]
 499:../common/ubertooth.c **** 				temp <<= 1;
 1463              		.loc 1 499 6 is_stmt 1 view .LVU462
 1464 00b4 C4F800C0 		streq	ip, [r4]
 500:../common/ubertooth.c **** 				SCLK_SET;
 1465              		.loc 1 500 5 view .LVU463
 500:../common/ubertooth.c **** 				SCLK_SET;
 1466              		.loc 1 500 10 is_stmt 0 view .LVU464
 1467 00b8 5200     		lsls	r2, r2, #1
 1468              	.LVL107:
 495:../common/ubertooth.c **** 				if (temp & msb)
 1469              		.loc 1 495 4 view .LVU465
 1470 00ba 13F0FF03 		ands	r3, r3, #255
 501:../common/ubertooth.c **** 				SCLK_CLR;
 1471              		.loc 1 501 5 view .LVU466
 1472 00be C5F800E0 		str	lr, [r5]
 500:../common/ubertooth.c **** 				SCLK_SET;
 1473              		.loc 1 500 10 view .LVU467
 1474 00c2 D2B2     		uxtb	r2, r2
 1475              	.LVL108:
 501:../common/ubertooth.c **** 				SCLK_CLR;
 1476              		.loc 1 501 5 is_stmt 1 view .LVU468
 502:../common/ubertooth.c **** 			}
 1477              		.loc 1 502 5 view .LVU469
 1478 00c4 C4F800E0 		str	lr, [r4]
 495:../common/ubertooth.c **** 				if (temp & msb)
 1479              		.loc 1 495 23 view .LVU470
ARM GAS  /tmp/ccQmV08g.s 			page 43


 495:../common/ubertooth.c **** 				if (temp & msb)
 1480              		.loc 1 495 16 view .LVU471
 495:../common/ubertooth.c **** 				if (temp & msb)
 1481              		.loc 1 495 4 is_stmt 0 view .LVU472
 1482 00c8 EDD1     		bne	.L89
 1483 00ca CFE7     		b	.L86
 1484              	.L100:
 1485              		.align	2
 1486              	.L99:
 1487 00cc 5CC00920 		.word	537509980
 1488 00d0 58C00920 		.word	537509976
 1489 00d4 98C00920 		.word	537510040
 1490 00d8 54C00920 		.word	537509972
 1491              		.cfi_endproc
 1492              	.LFE21:
 1494              		.section	.text.cc2400_fifo_read,"ax",%progbits
 1495              		.align	1
 1496              		.global	cc2400_fifo_read
 1497              		.syntax unified
 1498              		.thumb
 1499              		.thumb_func
 1500              		.fpu softvfp
 1502              	cc2400_fifo_read:
 1503              	.LVL109:
 1504              	.LFB22:
 523:../common/ubertooth.c **** 
 524:../common/ubertooth.c **** 
 525:../common/ubertooth.c **** // void cc2400_fifo_continous_write(u8 len, u8 *data, uint32_t fifo_thres) {
 526:../common/ubertooth.c **** // 	u8 msb = 1 << 7;
 527:../common/ubertooth.c **** // 	u8 reg = FIFOREG;
 528:../common/ubertooth.c **** // 	u8 i, j, temp, tx_len;
 529:../common/ubertooth.c **** // 	uint32_t fifo_space = 32;
 530:../common/ubertooth.c **** // 	u8 *ptr = data;
 531:../common/ubertooth.c **** 
 532:../common/ubertooth.c **** // 	/* start transaction by dropping CSN */
 533:../common/ubertooth.c **** // 	CSN_CLR;
 534:../common/ubertooth.c **** 
 535:../common/ubertooth.c **** // 	for (i = 0; i < 8; ++i) {
 536:../common/ubertooth.c **** // 		if (reg & msb)
 537:../common/ubertooth.c **** // 			MOSI_SET;
 538:../common/ubertooth.c **** // 		else
 539:../common/ubertooth.c **** // 			MOSI_CLR;
 540:../common/ubertooth.c **** // 		reg <<= 1;
 541:../common/ubertooth.c **** // 		SCLK_SET;
 542:../common/ubertooth.c **** // 		SCLK_CLR;
 543:../common/ubertooth.c **** // 	}
 544:../common/ubertooth.c **** 
 545:../common/ubertooth.c **** // 	while (len != 0) {
 546:../common/ubertooth.c **** // 		while (!GIO6);
 547:../common/ubertooth.c **** // 		if (len >= fifo_space) {
 548:../common/ubertooth.c **** // 			len -= fifo_space;
 549:../common/ubertooth.c **** // 			tx_len = fifo_space;
 550:../common/ubertooth.c **** // 		}
 551:../common/ubertooth.c **** // 		else {
 552:../common/ubertooth.c **** // 			tx_len = len;
 553:../common/ubertooth.c **** // 			len = 0;
 554:../common/ubertooth.c **** // 		}
ARM GAS  /tmp/ccQmV08g.s 			page 44


 555:../common/ubertooth.c **** 
 556:../common/ubertooth.c **** // 		// Transfer via SPI
 557:../common/ubertooth.c **** // 		for (i = 0; i < tx_len; ++i) {
 558:../common/ubertooth.c **** // 			temp = *ptr;
 559:../common/ubertooth.c **** // 			for (j = 0; j < 8; ++j) {
 560:../common/ubertooth.c **** // 				if (temp & msb)
 561:../common/ubertooth.c **** // 					MOSI_SET;
 562:../common/ubertooth.c **** // 				else
 563:../common/ubertooth.c **** // 					MOSI_CLR;
 564:../common/ubertooth.c **** // 				temp <<= 1;
 565:../common/ubertooth.c **** // 				SCLK_SET;
 566:../common/ubertooth.c **** // 				SCLK_CLR;
 567:../common/ubertooth.c **** // 			}
 568:../common/ubertooth.c **** // 			ptr++;
 569:../common/ubertooth.c **** // 		}
 570:../common/ubertooth.c **** // 		spi_delay();
 571:../common/ubertooth.c **** // 		fifo_space = fifo_thres;
 572:../common/ubertooth.c **** // 		TX_SET;
 573:../common/ubertooth.c **** // 		RX_CLR;
 574:../common/ubertooth.c **** // 	}
 575:../common/ubertooth.c **** 
 576:../common/ubertooth.c **** // 	// this is necessary to clock in the last byte
 577:../common/ubertooth.c **** // 	for (i = 0; i < 8; ++i) {
 578:../common/ubertooth.c **** // 		SCLK_SET;
 579:../common/ubertooth.c **** // 		SCLK_CLR;
 580:../common/ubertooth.c **** // 	}
 581:../common/ubertooth.c **** 
 582:../common/ubertooth.c **** 	
 583:../common/ubertooth.c **** 
 584:../common/ubertooth.c **** // 	/* end transaction by raising CSN */
 585:../common/ubertooth.c **** // 	CSN_SET;
 586:../common/ubertooth.c **** // }
 587:../common/ubertooth.c **** 
 588:../common/ubertooth.c **** 
 589:../common/ubertooth.c **** 
 590:../common/ubertooth.c **** /* read multiple bytes from SPI */
 591:../common/ubertooth.c **** void cc2400_fifo_read(u8 len, u8 *buf) {
 1505              		.loc 1 591 40 is_stmt 1 view -0
 1506              		.cfi_startproc
 1507              		@ args = 0, pretend = 0, frame = 0
 1508              		@ frame_needed = 0, uses_anonymous_args = 0
 1509              		.loc 1 591 40 is_stmt 0 view .LVU474
 1510 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1511              		.cfi_def_cfa_offset 32
 1512              		.cfi_offset 3, -32
 1513              		.cfi_offset 4, -28
 1514              		.cfi_offset 5, -24
 1515              		.cfi_offset 6, -20
 1516              		.cfi_offset 7, -16
 1517              		.cfi_offset 8, -12
 1518              		.cfi_offset 9, -8
 1519              		.cfi_offset 14, -4
 592:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 1520              		.loc 1 592 2 is_stmt 1 view .LVU475
 1521              	.LVL110:
 593:../common/ubertooth.c **** 	u8 i, j, temp, reg;
 1522              		.loc 1 593 2 view .LVU476
ARM GAS  /tmp/ccQmV08g.s 			page 45


 594:../common/ubertooth.c **** 	// Set first bit because it's a read
 595:../common/ubertooth.c **** 	reg = 0x80 | FIFOREG;
 1523              		.loc 1 595 2 view .LVU477
 596:../common/ubertooth.c **** 
 597:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 598:../common/ubertooth.c **** 	CSN_CLR;
 1524              		.loc 1 598 2 view .LVU478
 1525 0004 2023     		movs	r3, #32
 1526 0006 1E4D     		ldr	r5, .L114
 595:../common/ubertooth.c **** 
 1527              		.loc 1 595 6 is_stmt 0 view .LVU479
 1528 0008 F022     		movs	r2, #240
 1529              		.loc 1 598 2 view .LVU480
 1530 000a 2B60     		str	r3, [r5]
 599:../common/ubertooth.c **** 
 600:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 1531              		.loc 1 600 2 is_stmt 1 view .LVU481
 1532              	.LVL111:
 1533              		.loc 1 600 14 view .LVU482
 1534 000c 0126     		movs	r6, #1
 598:../common/ubertooth.c **** 
 1535              		.loc 1 598 2 is_stmt 0 view .LVU483
 1536 000e 0823     		movs	r3, #8
 601:../common/ubertooth.c **** 		if (reg & msb)
 602:../common/ubertooth.c **** 			MOSI_SET;
 603:../common/ubertooth.c **** 		else
 604:../common/ubertooth.c **** 			MOSI_CLR;
 605:../common/ubertooth.c **** 		reg <<= 1;
 606:../common/ubertooth.c **** 		SCLK_SET;
 1537              		.loc 1 606 3 view .LVU484
 1538 0010 1024     		movs	r4, #16
 1539 0012 1C4F     		ldr	r7, .L114+4
 1540              	.LVL112:
 1541              	.L104:
 601:../common/ubertooth.c **** 		if (reg & msb)
 1542              		.loc 1 601 3 is_stmt 1 view .LVU485
 601:../common/ubertooth.c **** 		if (reg & msb)
 1543              		.loc 1 601 6 is_stmt 0 view .LVU486
 1544 0014 12F0800F 		tst	r2, #128
 602:../common/ubertooth.c **** 		else
 1545              		.loc 1 602 4 is_stmt 1 view .LVU487
 1546 0018 03F1FF33 		add	r3, r3, #-1
 1547              	.LVL113:
 602:../common/ubertooth.c **** 		else
 1548              		.loc 1 602 4 is_stmt 0 view .LVU488
 1549 001c 14BF     		ite	ne
 1550 001e 3E60     		strne	r6, [r7]
 604:../common/ubertooth.c **** 		reg <<= 1;
 1551              		.loc 1 604 4 is_stmt 1 view .LVU489
 1552 0020 2E60     		streq	r6, [r5]
 605:../common/ubertooth.c **** 		SCLK_SET;
 1553              		.loc 1 605 3 view .LVU490
 605:../common/ubertooth.c **** 		SCLK_SET;
 1554              		.loc 1 605 7 is_stmt 0 view .LVU491
 1555 0022 5200     		lsls	r2, r2, #1
 1556              	.LVL114:
 600:../common/ubertooth.c **** 		if (reg & msb)
ARM GAS  /tmp/ccQmV08g.s 			page 46


 1557              		.loc 1 600 2 view .LVU492
 1558 0024 13F0FF03 		ands	r3, r3, #255
 1559              		.loc 1 606 3 view .LVU493
 1560 0028 3C60     		str	r4, [r7]
 605:../common/ubertooth.c **** 		SCLK_SET;
 1561              		.loc 1 605 7 view .LVU494
 1562 002a D2B2     		uxtb	r2, r2
 1563              	.LVL115:
 1564              		.loc 1 606 3 is_stmt 1 view .LVU495
 607:../common/ubertooth.c **** 		SCLK_CLR;
 1565              		.loc 1 607 3 view .LVU496
 1566 002c 2C60     		str	r4, [r5]
 600:../common/ubertooth.c **** 		if (reg & msb)
 1567              		.loc 1 600 21 view .LVU497
 600:../common/ubertooth.c **** 		if (reg & msb)
 1568              		.loc 1 600 14 view .LVU498
 600:../common/ubertooth.c **** 		if (reg & msb)
 1569              		.loc 1 600 2 is_stmt 0 view .LVU499
 1570 002e F1D1     		bne	.L104
 608:../common/ubertooth.c **** 	}
 609:../common/ubertooth.c **** 
 610:../common/ubertooth.c **** 	for (i = 0; i < len; ++i) {
 611:../common/ubertooth.c **** 		temp = 0;
 612:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 613:../common/ubertooth.c **** 			spi_delay();
 614:../common/ubertooth.c **** 			SCLK_SET;
 1571              		.loc 1 614 4 view .LVU500
 1572 0030 4FF01008 		mov	r8, #16
 615:../common/ubertooth.c **** 			temp <<= 1;
 616:../common/ubertooth.c **** 			if (MISO)
 1573              		.loc 1 616 8 view .LVU501
 1574 0034 DFF85090 		ldr	r9, .L114+8
 1575 0038 0844     		add	r0, r0, r1
 1576              	.LVL116:
 1577              	.L105:
 610:../common/ubertooth.c **** 		temp = 0;
 1578              		.loc 1 610 14 is_stmt 1 discriminator 1 view .LVU502
 610:../common/ubertooth.c **** 		temp = 0;
 1579              		.loc 1 610 2 is_stmt 0 discriminator 1 view .LVU503
 1580 003a 8142     		cmp	r1, r0
 1581 003c 05D1     		bne	.L108
 617:../common/ubertooth.c **** 				temp |= 1;
 618:../common/ubertooth.c **** 			spi_delay();
 619:../common/ubertooth.c **** 			SCLK_CLR;
 620:../common/ubertooth.c **** 		}
 621:../common/ubertooth.c **** 		buf[i] = temp;
 622:../common/ubertooth.c **** 	}
 623:../common/ubertooth.c **** 
 624:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 625:../common/ubertooth.c **** 	spi_delay();
 1582              		.loc 1 625 2 is_stmt 1 view .LVU504
 1583 003e FFF7FEFF 		bl	spi_delay
 1584              	.LVL117:
 626:../common/ubertooth.c **** 	CSN_SET;
 1585              		.loc 1 626 2 view .LVU505
 1586 0042 2023     		movs	r3, #32
 1587 0044 3B60     		str	r3, [r7]
ARM GAS  /tmp/ccQmV08g.s 			page 47


 627:../common/ubertooth.c **** }
 1588              		.loc 1 627 1 is_stmt 0 view .LVU506
 1589 0046 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1590              	.L108:
 611:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 1591              		.loc 1 611 8 view .LVU507
 1592 004a 0024     		movs	r4, #0
 1593 004c 0826     		movs	r6, #8
 1594              	.L107:
 1595              	.LVL118:
 613:../common/ubertooth.c **** 			SCLK_SET;
 1596              		.loc 1 613 4 is_stmt 1 view .LVU508
 1597 004e FFF7FEFF 		bl	spi_delay
 1598              	.LVL119:
 614:../common/ubertooth.c **** 			temp <<= 1;
 1599              		.loc 1 614 4 view .LVU509
 1600 0052 C7F80080 		str	r8, [r7]
 615:../common/ubertooth.c **** 			if (MISO)
 1601              		.loc 1 615 4 view .LVU510
 616:../common/ubertooth.c **** 				temp |= 1;
 1602              		.loc 1 616 8 is_stmt 0 view .LVU511
 1603 0056 D9F80030 		ldr	r3, [r9]
 615:../common/ubertooth.c **** 			if (MISO)
 1604              		.loc 1 615 9 view .LVU512
 1605 005a 6400     		lsls	r4, r4, #1
 1606              	.LVL120:
 616:../common/ubertooth.c **** 				temp |= 1;
 1607              		.loc 1 616 7 view .LVU513
 1608 005c 9B07     		lsls	r3, r3, #30
 615:../common/ubertooth.c **** 			if (MISO)
 1609              		.loc 1 615 9 view .LVU514
 1610 005e E4B2     		uxtb	r4, r4
 1611              	.LVL121:
 616:../common/ubertooth.c **** 				temp |= 1;
 1612              		.loc 1 616 4 is_stmt 1 view .LVU515
 617:../common/ubertooth.c **** 			spi_delay();
 1613              		.loc 1 617 5 view .LVU516
 1614 0060 06F1FF36 		add	r6, r6, #-1
 1615              	.LVL122:
 617:../common/ubertooth.c **** 			spi_delay();
 1616              		.loc 1 617 10 is_stmt 0 view .LVU517
 1617 0064 48BF     		it	mi
 1618 0066 44F00104 		orrmi	r4, r4, #1
 1619              	.LVL123:
 618:../common/ubertooth.c **** 			SCLK_CLR;
 1620              		.loc 1 618 4 is_stmt 1 view .LVU518
 1621 006a FFF7FEFF 		bl	spi_delay
 1622              	.LVL124:
 619:../common/ubertooth.c **** 		}
 1623              		.loc 1 619 4 view .LVU519
 612:../common/ubertooth.c **** 			spi_delay();
 1624              		.loc 1 612 3 is_stmt 0 view .LVU520
 1625 006e 16F0FF06 		ands	r6, r6, #255
 619:../common/ubertooth.c **** 		}
 1626              		.loc 1 619 4 view .LVU521
 1627 0072 C5F80080 		str	r8, [r5]
 612:../common/ubertooth.c **** 			spi_delay();
ARM GAS  /tmp/ccQmV08g.s 			page 48


 1628              		.loc 1 612 22 is_stmt 1 view .LVU522
 612:../common/ubertooth.c **** 			spi_delay();
 1629              		.loc 1 612 15 view .LVU523
 612:../common/ubertooth.c **** 			spi_delay();
 1630              		.loc 1 612 3 is_stmt 0 view .LVU524
 1631 0076 EAD1     		bne	.L107
 621:../common/ubertooth.c **** 	}
 1632              		.loc 1 621 3 is_stmt 1 discriminator 2 view .LVU525
 621:../common/ubertooth.c **** 	}
 1633              		.loc 1 621 10 is_stmt 0 discriminator 2 view .LVU526
 1634 0078 01F8014B 		strb	r4, [r1], #1
 1635              	.LVL125:
 610:../common/ubertooth.c **** 		temp = 0;
 1636              		.loc 1 610 23 is_stmt 1 discriminator 2 view .LVU527
 610:../common/ubertooth.c **** 		temp = 0;
 1637              		.loc 1 610 23 is_stmt 0 discriminator 2 view .LVU528
 1638 007c DDE7     		b	.L105
 1639              	.L115:
 1640 007e 00BF     		.align	2
 1641              	.L114:
 1642 0080 5CC00920 		.word	537509980
 1643 0084 58C00920 		.word	537509976
 1644 0088 54C00920 		.word	537509972
 1645              		.cfi_endproc
 1646              	.LFE22:
 1648              		.section	.text.cc2400_status,"ax",%progbits
 1649              		.align	1
 1650              		.global	cc2400_status
 1651              		.syntax unified
 1652              		.thumb
 1653              		.thumb_func
 1654              		.fpu softvfp
 1656              	cc2400_status:
 1657              	.LFB23:
 628:../common/ubertooth.c **** 
 629:../common/ubertooth.c **** /* get the status */
 630:../common/ubertooth.c **** u8 cc2400_status()
 631:../common/ubertooth.c **** {
 1658              		.loc 1 631 1 is_stmt 1 view -0
 1659              		.cfi_startproc
 1660              		@ args = 0, pretend = 0, frame = 0
 1661              		@ frame_needed = 0, uses_anonymous_args = 0
 1662 0000 08B5     		push	{r3, lr}
 1663              		.cfi_def_cfa_offset 8
 1664              		.cfi_offset 3, -8
 1665              		.cfi_offset 14, -4
 632:../common/ubertooth.c **** 	return cc2400_spi(8, 0);
 1666              		.loc 1 632 2 view .LVU530
 1667              		.loc 1 632 9 is_stmt 0 view .LVU531
 1668 0002 0021     		movs	r1, #0
 1669 0004 0820     		movs	r0, #8
 1670 0006 FFF7FEFF 		bl	cc2400_spi
 1671              	.LVL126:
 633:../common/ubertooth.c **** }
 1672              		.loc 1 633 1 view .LVU532
 1673 000a C0B2     		uxtb	r0, r0
 1674 000c 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccQmV08g.s 			page 49


 1675              		.cfi_endproc
 1676              	.LFE23:
 1678              		.section	.text.cc2400_strobe,"ax",%progbits
 1679              		.align	1
 1680              		.global	cc2400_strobe
 1681              		.syntax unified
 1682              		.thumb
 1683              		.thumb_func
 1684              		.fpu softvfp
 1686              	cc2400_strobe:
 1687              	.LVL127:
 1688              	.LFB24:
 634:../common/ubertooth.c **** 
 635:../common/ubertooth.c **** /* strobe register, return status */
 636:../common/ubertooth.c **** u8 cc2400_strobe(u8 reg)
 637:../common/ubertooth.c **** {
 1689              		.loc 1 637 1 is_stmt 1 view -0
 1690              		.cfi_startproc
 1691              		@ args = 0, pretend = 0, frame = 0
 1692              		@ frame_needed = 0, uses_anonymous_args = 0
 1693              		.loc 1 637 1 is_stmt 0 view .LVU534
 1694 0000 08B5     		push	{r3, lr}
 1695              		.cfi_def_cfa_offset 8
 1696              		.cfi_offset 3, -8
 1697              		.cfi_offset 14, -4
 638:../common/ubertooth.c **** 	return cc2400_spi(8, reg);
 1698              		.loc 1 638 2 is_stmt 1 view .LVU535
 637:../common/ubertooth.c **** 	return cc2400_spi(8, reg);
 1699              		.loc 1 637 1 is_stmt 0 view .LVU536
 1700 0002 0146     		mov	r1, r0
 1701              		.loc 1 638 9 view .LVU537
 1702 0004 0820     		movs	r0, #8
 1703              	.LVL128:
 1704              		.loc 1 638 9 view .LVU538
 1705 0006 FFF7FEFF 		bl	cc2400_spi
 1706              	.LVL129:
 639:../common/ubertooth.c **** }
 1707              		.loc 1 639 1 view .LVU539
 1708 000a C0B2     		uxtb	r0, r0
 1709 000c 08BD     		pop	{r3, pc}
 1710              		.cfi_endproc
 1711              	.LFE24:
 1713              		.section	.text.cc2400_reset,"ax",%progbits
 1714              		.align	1
 1715              		.global	cc2400_reset
 1716              		.syntax unified
 1717              		.thumb
 1718              		.thumb_func
 1719              		.fpu softvfp
 1721              	cc2400_reset:
 1722              	.LFB25:
 640:../common/ubertooth.c **** 
 641:../common/ubertooth.c **** /*
 642:../common/ubertooth.c ****  * Warning: This should only be called when running on the internal oscillator.
 643:../common/ubertooth.c ****  * Otherwise use clock_start().
 644:../common/ubertooth.c ****  */
 645:../common/ubertooth.c **** void cc2400_reset()
ARM GAS  /tmp/ccQmV08g.s 			page 50


 646:../common/ubertooth.c **** {
 1723              		.loc 1 646 1 is_stmt 1 view -0
 1724              		.cfi_startproc
 1725              		@ args = 0, pretend = 0, frame = 0
 1726              		@ frame_needed = 0, uses_anonymous_args = 0
 1727 0000 08B5     		push	{r3, lr}
 1728              		.cfi_def_cfa_offset 8
 1729              		.cfi_offset 3, -8
 1730              		.cfi_offset 14, -4
 647:../common/ubertooth.c **** 	cc2400_set(MAIN, 0x0000);
 1731              		.loc 1 647 2 view .LVU541
 1732              	.LVL130:
 1733              	.LBB18:
 1734              	.LBI18:
 390:../common/ubertooth.c **** {
 1735              		.loc 1 390 6 view .LVU542
 1736              	.LBB19:
 392:../common/ubertooth.c **** 	cc2400_spi(24, out);
 1737              		.loc 1 392 2 view .LVU543
 393:../common/ubertooth.c **** }
 1738              		.loc 1 393 2 view .LVU544
 1739 0002 0021     		movs	r1, #0
 1740 0004 1820     		movs	r0, #24
 1741 0006 FFF7FEFF 		bl	cc2400_spi
 1742              	.LVL131:
 1743              	.L119:
 393:../common/ubertooth.c **** }
 1744              		.loc 1 393 2 is_stmt 0 view .LVU545
 1745              	.LBE19:
 1746              	.LBE18:
 648:../common/ubertooth.c **** 	while (cc2400_get(MAIN) != 0x0000);
 1747              		.loc 1 648 36 is_stmt 1 discriminator 1 view .LVU546
 1748              		.loc 1 648 8 discriminator 1 view .LVU547
 1749              		.loc 1 648 9 is_stmt 0 discriminator 1 view .LVU548
 1750 000a 0020     		movs	r0, #0
 1751 000c FFF7FEFF 		bl	cc2400_get
 1752              	.LVL132:
 1753              		.loc 1 648 8 discriminator 1 view .LVU549
 1754 0010 0028     		cmp	r0, #0
 1755 0012 FAD1     		bne	.L119
 649:../common/ubertooth.c **** 	cc2400_set(MAIN, 0x8000);
 1756              		.loc 1 649 2 is_stmt 1 view .LVU550
 1757              	.LVL133:
 1758              	.LBB20:
 1759              	.LBI20:
 390:../common/ubertooth.c **** {
 1760              		.loc 1 390 6 view .LVU551
 1761              	.LBB21:
 392:../common/ubertooth.c **** 	cc2400_spi(24, out);
 1762              		.loc 1 392 2 view .LVU552
 393:../common/ubertooth.c **** }
 1763              		.loc 1 393 2 view .LVU553
 1764 0014 4FF40041 		mov	r1, #32768
 1765 0018 1820     		movs	r0, #24
 1766 001a FFF7FEFF 		bl	cc2400_spi
 1767              	.LVL134:
 1768              	.L120:
ARM GAS  /tmp/ccQmV08g.s 			page 51


 393:../common/ubertooth.c **** }
 1769              		.loc 1 393 2 is_stmt 0 view .LVU554
 1770              	.LBE21:
 1771              	.LBE20:
 650:../common/ubertooth.c **** 	while (cc2400_get(MAIN) != 0x8000);
 1772              		.loc 1 650 36 is_stmt 1 discriminator 1 view .LVU555
 1773              		.loc 1 650 8 discriminator 1 view .LVU556
 1774              		.loc 1 650 9 is_stmt 0 discriminator 1 view .LVU557
 1775 001e 0020     		movs	r0, #0
 1776 0020 FFF7FEFF 		bl	cc2400_get
 1777              	.LVL135:
 1778              		.loc 1 650 8 discriminator 1 view .LVU558
 1779 0024 B0F5004F 		cmp	r0, #32768
 1780 0028 F9D1     		bne	.L120
 651:../common/ubertooth.c **** }
 1781              		.loc 1 651 1 view .LVU559
 1782 002a 08BD     		pop	{r3, pc}
 1783              		.cfi_endproc
 1784              	.LFE25:
 1786              		.section	.text.clock_start,"ax",%progbits
 1787              		.align	1
 1788              		.global	clock_start
 1789              		.syntax unified
 1790              		.thumb
 1791              		.thumb_func
 1792              		.fpu softvfp
 1794              	clock_start:
 1795              	.LFB26:
 652:../common/ubertooth.c **** 
 653:../common/ubertooth.c **** /* activate the CC2400's 16 MHz oscillator and sync LPC175x to it */
 654:../common/ubertooth.c **** void clock_start()
 655:../common/ubertooth.c **** {
 1796              		.loc 1 655 1 is_stmt 1 view -0
 1797              		.cfi_startproc
 1798              		@ args = 0, pretend = 0, frame = 0
 1799              		@ frame_needed = 0, uses_anonymous_args = 0
 1800 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1801              		.cfi_def_cfa_offset 24
 1802              		.cfi_offset 4, -24
 1803              		.cfi_offset 5, -20
 1804              		.cfi_offset 6, -16
 1805              		.cfi_offset 7, -12
 1806              		.cfi_offset 8, -8
 1807              		.cfi_offset 14, -4
 656:../common/ubertooth.c **** 	/* configure flash accelerator for higher clock rate */
 657:../common/ubertooth.c **** 	FLASHCFG = (0x03A | (FLASHTIM << 12));
 1808              		.loc 1 657 2 view .LVU561
 1809              		.loc 1 657 11 is_stmt 0 view .LVU562
 1810 0004 44F23A02 		movw	r2, #16442
 1811 0008 404B     		ldr	r3, .L149
 658:../common/ubertooth.c **** 
 659:../common/ubertooth.c **** 	/* switch to the internal oscillator if necessary */
 660:../common/ubertooth.c **** 	CLKSRCSEL = 0;
 1812              		.loc 1 660 12 view .LVU563
 1813 000a 414E     		ldr	r6, .L149+4
 657:../common/ubertooth.c **** 
 1814              		.loc 1 657 11 view .LVU564
ARM GAS  /tmp/ccQmV08g.s 			page 52


 1815 000c 1A60     		str	r2, [r3]
 1816              		.loc 1 660 2 is_stmt 1 view .LVU565
 1817              		.loc 1 660 12 is_stmt 0 view .LVU566
 1818 000e 0023     		movs	r3, #0
 661:../common/ubertooth.c **** 
 662:../common/ubertooth.c **** 	/* disconnect PLL0 */
 663:../common/ubertooth.c **** 	PLL0CON &= ~PLL0CON_PLLC0;
 1819              		.loc 1 663 10 view .LVU567
 1820 0010 404D     		ldr	r5, .L149+8
 660:../common/ubertooth.c **** 
 1821              		.loc 1 660 12 view .LVU568
 1822 0012 3360     		str	r3, [r6]
 1823              		.loc 1 663 2 is_stmt 1 view .LVU569
 1824              		.loc 1 663 10 is_stmt 0 view .LVU570
 1825 0014 2B68     		ldr	r3, [r5]
 664:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1826              		.loc 1 664 2 view .LVU571
 1827 0016 404C     		ldr	r4, .L149+12
 663:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1828              		.loc 1 663 10 view .LVU572
 1829 0018 23F00203 		bic	r3, r3, #2
 1830 001c 2B60     		str	r3, [r5]
 1831              		.loc 1 664 2 is_stmt 1 view .LVU573
 1832 001e AA23     		movs	r3, #170
 1833 0020 2360     		str	r3, [r4]
 1834              		.loc 1 664 2 view .LVU574
 1835 0022 5523     		movs	r3, #85
 1836 0024 2360     		str	r3, [r4]
 665:../common/ubertooth.c **** 	while (PLL0STAT & PLL0STAT_PLLC0_STAT);
 1837              		.loc 1 665 2 view .LVU575
 1838              		.loc 1 665 9 is_stmt 0 view .LVU576
 1839 0026 3D4B     		ldr	r3, .L149+16
 1840 0028 1F46     		mov	r7, r3
 1841              	.L124:
 1842              		.loc 1 665 40 is_stmt 1 discriminator 1 view .LVU577
 1843              		.loc 1 665 8 discriminator 1 view .LVU578
 1844              		.loc 1 665 9 is_stmt 0 discriminator 1 view .LVU579
 1845 002a 1A68     		ldr	r2, [r3]
 1846              		.loc 1 665 8 discriminator 1 view .LVU580
 1847 002c 9001     		lsls	r0, r2, #6
 1848 002e FCD4     		bmi	.L124
 666:../common/ubertooth.c **** 
 667:../common/ubertooth.c **** 	/* turn off PLL0 */
 668:../common/ubertooth.c **** 	PLL0CON &= ~PLL0CON_PLLE0;
 1849              		.loc 1 668 2 is_stmt 1 view .LVU581
 1850              		.loc 1 668 10 is_stmt 0 view .LVU582
 1851 0030 2B68     		ldr	r3, [r5]
 1852 0032 23F00103 		bic	r3, r3, #1
 1853 0036 2B60     		str	r3, [r5]
 669:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1854              		.loc 1 669 2 is_stmt 1 view .LVU583
 1855 0038 AA23     		movs	r3, #170
 1856 003a 2360     		str	r3, [r4]
 1857              		.loc 1 669 2 view .LVU584
 1858 003c 5523     		movs	r3, #85
 1859 003e 2360     		str	r3, [r4]
 670:../common/ubertooth.c **** 	while (PLL0STAT & PLL0STAT_PLLE0_STAT);
ARM GAS  /tmp/ccQmV08g.s 			page 53


 1860              		.loc 1 670 2 view .LVU585
 1861              	.L125:
 1862              		.loc 1 670 40 discriminator 1 view .LVU586
 1863              		.loc 1 670 8 discriminator 1 view .LVU587
 1864              		.loc 1 670 9 is_stmt 0 discriminator 1 view .LVU588
 1865 0040 3B68     		ldr	r3, [r7]
 1866              		.loc 1 670 8 discriminator 1 view .LVU589
 1867 0042 13F08073 		ands	r3, r3, #16777216
 1868 0046 FBD1     		bne	.L125
 671:../common/ubertooth.c **** 
 672:../common/ubertooth.c **** 	/* temporarily set CPU clock divider to 1 */
 673:../common/ubertooth.c **** 	CCLKCFG = 0;
 1869              		.loc 1 673 2 is_stmt 1 view .LVU590
 1870              		.loc 1 673 10 is_stmt 0 view .LVU591
 1871 0048 DFF8F480 		ldr	r8, .L149+52
 1872 004c C8F80030 		str	r3, [r8]
 674:../common/ubertooth.c **** 
 675:../common/ubertooth.c **** 	/* configure CC2400 oscillator, output carrier sense on GIO6 */
 676:../common/ubertooth.c **** 	cc2400_reset();
 1873              		.loc 1 676 2 is_stmt 1 view .LVU592
 1874 0050 FFF7FEFF 		bl	cc2400_reset
 1875              	.LVL136:
 677:../common/ubertooth.c **** 	cc2400_set(IOCFG, (GIO_CARRIER_SENSE_N << 9) | (GIO_CLK_16M << 3));
 1876              		.loc 1 677 2 view .LVU593
 1877              	.LBB22:
 1878              	.LBI22:
 390:../common/ubertooth.c **** {
 1879              		.loc 1 390 6 view .LVU594
 1880              	.LBB23:
 392:../common/ubertooth.c **** 	cc2400_spi(24, out);
 1881              		.loc 1 392 2 view .LVU595
 393:../common/ubertooth.c **** }
 1882              		.loc 1 393 2 view .LVU596
 1883 0054 1820     		movs	r0, #24
 1884 0056 3249     		ldr	r1, .L149+20
 1885 0058 FFF7FEFF 		bl	cc2400_spi
 1886              	.LVL137:
 393:../common/ubertooth.c **** }
 1887              		.loc 1 393 2 is_stmt 0 view .LVU597
 1888              	.LBE23:
 1889              	.LBE22:
 678:../common/ubertooth.c **** 	cc2400_strobe(SXOSCON);
 1890              		.loc 1 678 2 is_stmt 1 view .LVU598
 1891 005c 6020     		movs	r0, #96
 1892 005e FFF7FEFF 		bl	cc2400_strobe
 1893              	.LVL138:
 679:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1894              		.loc 1 679 2 view .LVU599
 1895              	.L126:
 1896              		.loc 1 679 45 discriminator 1 view .LVU600
 1897              		.loc 1 679 8 discriminator 1 view .LVU601
 1898              		.loc 1 679 11 is_stmt 0 discriminator 1 view .LVU602
 1899 0062 FFF7FEFF 		bl	cc2400_status
 1900              	.LVL139:
 1901              		.loc 1 679 8 discriminator 1 view .LVU603
 1902 0066 4106     		lsls	r1, r0, #25
 1903 0068 FBD5     		bpl	.L126
ARM GAS  /tmp/ccQmV08g.s 			page 54


 680:../common/ubertooth.c **** 
 681:../common/ubertooth.c **** 	/* activate main oscillator */
 682:../common/ubertooth.c **** 	SCS = SCS_OSCEN;
 1904              		.loc 1 682 2 is_stmt 1 view .LVU604
 1905              		.loc 1 682 6 is_stmt 0 view .LVU605
 1906 006a 2022     		movs	r2, #32
 1907 006c 2D4B     		ldr	r3, .L149+24
 1908 006e 1A60     		str	r2, [r3]
 683:../common/ubertooth.c **** 	while (!(SCS & SCS_OSCSTAT));
 1909              		.loc 1 683 2 is_stmt 1 view .LVU606
 1910              	.L127:
 1911              		.loc 1 683 30 discriminator 1 view .LVU607
 1912              		.loc 1 683 8 discriminator 1 view .LVU608
 1913              		.loc 1 683 11 is_stmt 0 discriminator 1 view .LVU609
 1914 0070 1A68     		ldr	r2, [r3]
 1915              		.loc 1 683 8 discriminator 1 view .LVU610
 1916 0072 5206     		lsls	r2, r2, #25
 1917 0074 FCD5     		bpl	.L127
 684:../common/ubertooth.c **** 
 685:../common/ubertooth.c **** 	/*
 686:../common/ubertooth.c **** 	 * errata sheet says we must select peripheral clock before enabling and
 687:../common/ubertooth.c **** 	 * connecting PLL0
 688:../common/ubertooth.c ****  	 */
 689:../common/ubertooth.c **** #ifdef TC13BADGE
 690:../common/ubertooth.c **** 	PCLKSEL0  = (1 << 2); /* TIMER0 at cclk (30 MHz) */
 691:../common/ubertooth.c **** 	PCLKSEL1  = 0;
 692:../common/ubertooth.c **** #else
 693:../common/ubertooth.c ****     // XXX here
 694:../common/ubertooth.c **** 	// PCLKSEL0  = (2 << 2) | (2 << 4); /* TIMER0 and TIMER1 at cclk/2 (50 MHz) */
 695:../common/ubertooth.c **** 	PCLKSEL0  = (1 << 2) | (1 << 4); /* TIMER0 and TIMER1 at cclk (100 MHz) */
 1918              		.loc 1 695 2 is_stmt 1 view .LVU611
 1919              		.loc 1 695 12 is_stmt 0 view .LVU612
 1920 0076 1422     		movs	r2, #20
 1921 0078 2B4B     		ldr	r3, .L149+28
 696:../common/ubertooth.c **** 	PCLKSEL1  = (2 << 12); /* TIMER2 at cclk/2 (50 MHz) */
 697:../common/ubertooth.c **** #endif
 698:../common/ubertooth.c **** 
 699:../common/ubertooth.c **** 	/* switch to main oscillator */
 700:../common/ubertooth.c **** 	CLKSRCSEL = 1;
 701:../common/ubertooth.c **** 
 702:../common/ubertooth.c **** 	/* configure PLL0 */
 703:../common/ubertooth.c **** 	PLL0CFG = (MSEL0 << 0) | (NSEL0 << 16);
 704:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1922              		.loc 1 704 2 view .LVU613
 1923 007a AA21     		movs	r1, #170
 695:../common/ubertooth.c **** 	PCLKSEL1  = (2 << 12); /* TIMER2 at cclk/2 (50 MHz) */
 1924              		.loc 1 695 12 view .LVU614
 1925 007c 1A60     		str	r2, [r3]
 696:../common/ubertooth.c **** 	PCLKSEL1  = (2 << 12); /* TIMER2 at cclk/2 (50 MHz) */
 1926              		.loc 1 696 2 is_stmt 1 view .LVU615
 696:../common/ubertooth.c **** 	PCLKSEL1  = (2 << 12); /* TIMER2 at cclk/2 (50 MHz) */
 1927              		.loc 1 696 12 is_stmt 0 view .LVU616
 1928 007e 4FF40052 		mov	r2, #8192
 1929 0082 5A60     		str	r2, [r3, #4]
 700:../common/ubertooth.c **** 
 1930              		.loc 1 700 2 is_stmt 1 view .LVU617
 700:../common/ubertooth.c **** 
ARM GAS  /tmp/ccQmV08g.s 			page 55


 1931              		.loc 1 700 12 is_stmt 0 view .LVU618
 1932 0084 0123     		movs	r3, #1
 703:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1933              		.loc 1 703 10 view .LVU619
 1934 0086 294A     		ldr	r2, .L149+32
 700:../common/ubertooth.c **** 
 1935              		.loc 1 700 12 view .LVU620
 1936 0088 3360     		str	r3, [r6]
 703:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1937              		.loc 1 703 2 is_stmt 1 view .LVU621
 703:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1938              		.loc 1 703 10 is_stmt 0 view .LVU622
 1939 008a 294B     		ldr	r3, .L149+36
 1940 008c 1A60     		str	r2, [r3]
 1941              		.loc 1 704 2 is_stmt 1 view .LVU623
 1942 008e 5522     		movs	r2, #85
 1943 0090 2160     		str	r1, [r4]
 1944              		.loc 1 704 2 view .LVU624
 1945 0092 2260     		str	r2, [r4]
 705:../common/ubertooth.c **** 
 706:../common/ubertooth.c **** 	/* turn on PLL0 */
 707:../common/ubertooth.c **** 	PLL0CON |= PLL0CON_PLLE0;
 1946              		.loc 1 707 2 view .LVU625
 1947              		.loc 1 707 10 is_stmt 0 view .LVU626
 1948 0094 2B68     		ldr	r3, [r5]
 1949 0096 43F00103 		orr	r3, r3, #1
 1950 009a 2B60     		str	r3, [r5]
 708:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1951              		.loc 1 708 2 is_stmt 1 view .LVU627
 1952 009c 2160     		str	r1, [r4]
 1953              		.loc 1 708 2 view .LVU628
 1954 009e 2260     		str	r2, [r4]
 709:../common/ubertooth.c **** 	while (!(PLL0STAT & PLL0STAT_PLLE0_STAT));
 1955              		.loc 1 709 2 view .LVU629
 1956              	.L128:
 1957              		.loc 1 709 43 discriminator 1 view .LVU630
 1958              		.loc 1 709 8 discriminator 1 view .LVU631
 1959              		.loc 1 709 11 is_stmt 0 discriminator 1 view .LVU632
 1960 00a0 3B68     		ldr	r3, [r7]
 1961              		.loc 1 709 8 discriminator 1 view .LVU633
 1962 00a2 DE01     		lsls	r6, r3, #7
 1963 00a4 FCD5     		bpl	.L128
 710:../common/ubertooth.c **** 
 711:../common/ubertooth.c **** 	/* set CPU clock divider */
 712:../common/ubertooth.c **** 	CCLKCFG = CCLKSEL;
 1964              		.loc 1 712 2 is_stmt 1 view .LVU634
 1965              		.loc 1 712 10 is_stmt 0 view .LVU635
 1966 00a6 0323     		movs	r3, #3
 1967 00a8 C8F80030 		str	r3, [r8]
 713:../common/ubertooth.c **** 
 714:../common/ubertooth.c **** 	/* connect PLL0 */
 715:../common/ubertooth.c **** 	PLL0CON |= PLL0CON_PLLC0;
 1968              		.loc 1 715 2 is_stmt 1 view .LVU636
 1969              		.loc 1 715 10 is_stmt 0 view .LVU637
 1970 00ac 2B68     		ldr	r3, [r5]
 1971 00ae 43F00203 		orr	r3, r3, #2
 1972 00b2 2B60     		str	r3, [r5]
ARM GAS  /tmp/ccQmV08g.s 			page 56


 716:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1973              		.loc 1 716 2 is_stmt 1 view .LVU638
 1974 00b4 AA23     		movs	r3, #170
 1975 00b6 2360     		str	r3, [r4]
 1976              		.loc 1 716 2 view .LVU639
 1977 00b8 5523     		movs	r3, #85
 1978 00ba 2360     		str	r3, [r4]
 717:../common/ubertooth.c **** 	while (!(PLL0STAT & PLL0STAT_PLLC0_STAT));
 1979              		.loc 1 717 2 view .LVU640
 1980              	.L129:
 1981              		.loc 1 717 43 discriminator 1 view .LVU641
 1982              		.loc 1 717 8 discriminator 1 view .LVU642
 1983              		.loc 1 717 11 is_stmt 0 discriminator 1 view .LVU643
 1984 00bc 3B68     		ldr	r3, [r7]
 1985              		.loc 1 717 8 discriminator 1 view .LVU644
 1986 00be 9D01     		lsls	r5, r3, #6
 1987 00c0 FCD5     		bpl	.L129
 718:../common/ubertooth.c **** 
 719:../common/ubertooth.c **** 	/* configure PLL1 */
 720:../common/ubertooth.c **** 	PLL1CFG = (MSEL1 << 0) | (PSEL1 << 5);
 1988              		.loc 1 720 2 is_stmt 1 view .LVU645
 1989              		.loc 1 720 10 is_stmt 0 view .LVU646
 1990 00c2 2222     		movs	r2, #34
 721:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1991              		.loc 1 721 2 view .LVU647
 1992 00c4 5520     		movs	r0, #85
 1993 00c6 AA24     		movs	r4, #170
 720:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1994              		.loc 1 720 10 view .LVU648
 1995 00c8 1A4B     		ldr	r3, .L149+40
 1996 00ca 1A60     		str	r2, [r3]
 1997              		.loc 1 721 2 is_stmt 1 view .LVU649
 722:../common/ubertooth.c **** 
 723:../common/ubertooth.c **** 	/* turn on PLL1 */
 724:../common/ubertooth.c **** 	PLL1CON |= PLL1CON_PLLE1;
 1998              		.loc 1 724 10 is_stmt 0 view .LVU650
 1999 00cc 1A4A     		ldr	r2, .L149+44
 721:../common/ubertooth.c **** 
 2000              		.loc 1 721 2 view .LVU651
 2001 00ce 9C60     		str	r4, [r3, #8]
 721:../common/ubertooth.c **** 
 2002              		.loc 1 721 2 is_stmt 1 view .LVU652
 2003 00d0 9860     		str	r0, [r3, #8]
 2004              		.loc 1 724 2 view .LVU653
 2005              		.loc 1 724 10 is_stmt 0 view .LVU654
 2006 00d2 1168     		ldr	r1, [r2]
 721:../common/ubertooth.c **** 
 2007              		.loc 1 721 2 view .LVU655
 2008 00d4 0833     		adds	r3, r3, #8
 2009              		.loc 1 724 10 view .LVU656
 2010 00d6 41F00101 		orr	r1, r1, #1
 2011 00da 1160     		str	r1, [r2]
 725:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 2012              		.loc 1 725 2 is_stmt 1 view .LVU657
 726:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLLE1_STAT));
 2013              		.loc 1 726 11 is_stmt 0 view .LVU658
 2014 00dc 1749     		ldr	r1, .L149+48
ARM GAS  /tmp/ccQmV08g.s 			page 57


 725:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 2015              		.loc 1 725 2 view .LVU659
 2016 00de 1C60     		str	r4, [r3]
 725:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 2017              		.loc 1 725 2 is_stmt 1 view .LVU660
 2018 00e0 1860     		str	r0, [r3]
 2019              		.loc 1 726 2 view .LVU661
 2020 00e2 0846     		mov	r0, r1
 2021              	.L130:
 2022              		.loc 1 726 43 discriminator 1 view .LVU662
 2023              		.loc 1 726 8 discriminator 1 view .LVU663
 2024              		.loc 1 726 11 is_stmt 0 discriminator 1 view .LVU664
 2025 00e4 0C68     		ldr	r4, [r1]
 2026              		.loc 1 726 8 discriminator 1 view .LVU665
 2027 00e6 E405     		lsls	r4, r4, #23
 2028 00e8 FCD5     		bpl	.L130
 2029              	.L131:
 727:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLOCK1));
 2030              		.loc 1 727 39 is_stmt 1 discriminator 1 view .LVU666
 2031              		.loc 1 727 8 discriminator 1 view .LVU667
 2032              		.loc 1 727 11 is_stmt 0 discriminator 1 view .LVU668
 2033 00ea 0168     		ldr	r1, [r0]
 2034              		.loc 1 727 8 discriminator 1 view .LVU669
 2035 00ec 4905     		lsls	r1, r1, #21
 2036 00ee FCD5     		bpl	.L131
 728:../common/ubertooth.c **** 
 729:../common/ubertooth.c **** 	/* connect PLL1 */
 730:../common/ubertooth.c **** 	PLL1CON |= PLL1CON_PLLC1;
 2037              		.loc 1 730 2 is_stmt 1 view .LVU670
 2038              		.loc 1 730 10 is_stmt 0 view .LVU671
 2039 00f0 1168     		ldr	r1, [r2]
 2040 00f2 41F00201 		orr	r1, r1, #2
 2041 00f6 1160     		str	r1, [r2]
 731:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 2042              		.loc 1 731 2 is_stmt 1 view .LVU672
 2043 00f8 AA22     		movs	r2, #170
 2044 00fa 1A60     		str	r2, [r3]
 2045              		.loc 1 731 2 view .LVU673
 2046 00fc 5522     		movs	r2, #85
 2047 00fe 1A60     		str	r2, [r3]
 732:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLLC1_STAT));
 2048              		.loc 1 732 2 view .LVU674
 2049              	.L132:
 2050              		.loc 1 732 43 discriminator 1 view .LVU675
 2051              		.loc 1 732 8 discriminator 1 view .LVU676
 2052              		.loc 1 732 11 is_stmt 0 discriminator 1 view .LVU677
 2053 0100 0368     		ldr	r3, [r0]
 2054              		.loc 1 732 8 discriminator 1 view .LVU678
 2055 0102 9B05     		lsls	r3, r3, #22
 2056 0104 FCD5     		bpl	.L132
 733:../common/ubertooth.c **** }
 2057              		.loc 1 733 1 view .LVU679
 2058 0106 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2059              	.L150:
 2060 010a 00BF     		.align	2
 2061              	.L149:
 2062 010c 00C00F40 		.word	1074774016
ARM GAS  /tmp/ccQmV08g.s 			page 58


 2063 0110 0CC10F40 		.word	1074774284
 2064 0114 80C00F40 		.word	1074774144
 2065 0118 8CC00F40 		.word	1074774156
 2066 011c 88C00F40 		.word	1074774152
 2067 0120 70150800 		.word	529776
 2068 0124 A0C10F40 		.word	1074774432
 2069 0128 A8C10F40 		.word	1074774440
 2070 012c 18000100 		.word	65560
 2071 0130 84C00F40 		.word	1074774148
 2072 0134 A4C00F40 		.word	1074774180
 2073 0138 A0C00F40 		.word	1074774176
 2074 013c A8C00F40 		.word	1074774184
 2075 0140 04C10F40 		.word	1074774276
 2076              		.cfi_endproc
 2077              	.LFE26:
 2079              		.section	.text.ubertooth_init,"ax",%progbits
 2080              		.align	1
 2081              		.global	ubertooth_init
 2082              		.syntax unified
 2083              		.thumb
 2084              		.thumb_func
 2085              		.fpu softvfp
 2087              	ubertooth_init:
 2088              	.LFB7:
 168:../common/ubertooth.c **** 	int i;
 2089              		.loc 1 168 1 is_stmt 1 view -0
 2090              		.cfi_startproc
 2091              		@ args = 0, pretend = 0, frame = 0
 2092              		@ frame_needed = 0, uses_anonymous_args = 0
 2093 0000 08B5     		push	{r3, lr}
 2094              		.cfi_def_cfa_offset 8
 2095              		.cfi_offset 3, -8
 2096              		.cfi_offset 14, -4
 169:../common/ubertooth.c **** 	for (i = 0; i < 16; i++) {
 2097              		.loc 1 169 2 view .LVU681
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2098              		.loc 1 170 2 view .LVU682
 2099              	.LVL140:
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2100              		.loc 1 170 14 view .LVU683
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2101              		.loc 1 170 9 is_stmt 0 view .LVU684
 2102 0002 0023     		movs	r3, #0
 171:../common/ubertooth.c **** 	}
 2103              		.loc 1 171 18 view .LVU685
 2104 0004 0120     		movs	r0, #1
 2105 0006 084A     		ldr	r2, .L154
 2106              	.LVL141:
 2107              	.L152:
 171:../common/ubertooth.c **** 	}
 2108              		.loc 1 171 3 is_stmt 1 discriminator 3 view .LVU686
 171:../common/ubertooth.c **** 	}
 2109              		.loc 1 171 18 is_stmt 0 discriminator 3 view .LVU687
 2110 0008 00FA03F1 		lsl	r1, r0, r3
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2111              		.loc 1 170 23 discriminator 3 view .LVU688
 2112 000c 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccQmV08g.s 			page 59


 2113              	.LVL142:
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2114              		.loc 1 170 2 discriminator 3 view .LVU689
 2115 000e 102B     		cmp	r3, #16
 171:../common/ubertooth.c **** 	}
 2116              		.loc 1 171 14 discriminator 3 view .LVU690
 2117 0010 22F80219 		strh	r1, [r2], #-2	@ movhi
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2118              		.loc 1 170 22 is_stmt 1 discriminator 3 view .LVU691
 2119              	.LVL143:
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2120              		.loc 1 170 14 discriminator 3 view .LVU692
 170:../common/ubertooth.c **** 		msbs[15-i] = 1 << i;
 2121              		.loc 1 170 2 is_stmt 0 discriminator 3 view .LVU693
 2122 0014 F8D1     		bne	.L152
 173:../common/ubertooth.c **** 	cc2400_init();
 2123              		.loc 1 173 2 is_stmt 1 view .LVU694
 2124 0016 FFF7FEFF 		bl	gpio_init
 2125              	.LVL144:
 174:../common/ubertooth.c **** 	clock_start();
 2126              		.loc 1 174 2 view .LVU695
 2127 001a FFF7FEFF 		bl	cc2400_init
 2128              	.LVL145:
 175:../common/ubertooth.c **** 
 2129              		.loc 1 175 2 view .LVU696
 177:../common/ubertooth.c **** 
 2130              		.loc 1 177 1 is_stmt 0 view .LVU697
 2131 001e BDE80840 		pop	{r3, lr}
 2132              		.cfi_restore 14
 2133              		.cfi_restore 3
 2134              		.cfi_def_cfa_offset 0
 175:../common/ubertooth.c **** 
 2135              		.loc 1 175 2 view .LVU698
 2136 0022 FFF7FEBF 		b	clock_start
 2137              	.LVL146:
 2138              	.L155:
 2139 0026 00BF     		.align	2
 2140              	.L154:
 2141 0028 1E000000 		.word	msbs+30
 2142              		.cfi_endproc
 2143              	.LFE7:
 2145              		.section	.text.reset,"ax",%progbits
 2146              		.align	1
 2147              		.global	reset
 2148              		.syntax unified
 2149              		.thumb
 2150              		.thumb_func
 2151              		.fpu softvfp
 2153              	reset:
 2154              	.LFB27:
 734:../common/ubertooth.c **** 
 735:../common/ubertooth.c **** /* reset the LPC17xx, the cc2400 will be handled by the boot code */
 736:../common/ubertooth.c **** void reset()
 737:../common/ubertooth.c **** {
 2155              		.loc 1 737 1 is_stmt 1 view -0
 2156              		.cfi_startproc
 2157              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccQmV08g.s 			page 60


 2158              		@ frame_needed = 0, uses_anonymous_args = 0
 2159 0000 08B5     		push	{r3, lr}
 2160              		.cfi_def_cfa_offset 8
 2161              		.cfi_offset 3, -8
 2162              		.cfi_offset 14, -4
 738:../common/ubertooth.c **** 	all_pins_off();
 2163              		.loc 1 738 2 view .LVU700
 2164 0002 FFF7FEFF 		bl	all_pins_off
 2165              	.LVL147:
 739:../common/ubertooth.c **** 
 740:../common/ubertooth.c **** 	/* Enable the watchdog with reset enabled */
 741:../common/ubertooth.c **** 	USRLED_CLR;
 2166              		.loc 1 741 2 view .LVU701
 2167 0006 0222     		movs	r2, #2
 2168 0008 084B     		ldr	r3, .L157
 2169              	.LBB24:
 2170              	.LBB25:
  36:../common/ubertooth.c **** }
 2171              		.loc 1 36 2 is_stmt 0 view .LVU702
 2172 000a 0948     		ldr	r0, .L157+4
 2173              	.LBE25:
 2174              	.LBE24:
 2175              		.loc 1 741 2 view .LVU703
 2176 000c 1A60     		str	r2, [r3]
 742:../common/ubertooth.c **** 	WDMOD |= WDMOD_WDEN | WDMOD_WDRESET;
 2177              		.loc 1 742 2 is_stmt 1 view .LVU704
 2178              		.loc 1 742 8 is_stmt 0 view .LVU705
 2179 000e 4FF08042 		mov	r2, #1073741824
 2180 0012 1368     		ldr	r3, [r2]
 2181 0014 43F00303 		orr	r3, r3, #3
 2182 0018 1360     		str	r3, [r2]
 743:../common/ubertooth.c **** 	WDFEED_SEQUENCE;
 2183              		.loc 1 743 2 is_stmt 1 view .LVU706
 2184 001a AA22     		movs	r2, #170
 2185 001c 054B     		ldr	r3, .L157+8
 2186 001e 1A60     		str	r2, [r3]
 2187              		.loc 1 743 2 view .LVU707
 2188 0020 5522     		movs	r2, #85
 2189 0022 1A60     		str	r2, [r3]
 744:../common/ubertooth.c **** 	
 745:../common/ubertooth.c **** 	/* Set watchdog timeout to 256us (minimum) */
 746:../common/ubertooth.c **** 	
 747:../common/ubertooth.c **** 	/* sleep for 1s (minimum) */
 748:../common/ubertooth.c **** 	wait(1);
 2190              		.loc 1 748 2 view .LVU708
 2191              	.LVL148:
 2192              	.LBB28:
 2193              	.LBI24:
  34:../common/ubertooth.c **** {
 2194              		.loc 1 34 6 view .LVU709
 2195              	.LBB26:
  36:../common/ubertooth.c **** }
 2196              		.loc 1 36 2 view .LVU710
 2197              	.LBE26:
 2198              	.LBE28:
 749:../common/ubertooth.c **** }
 2199              		.loc 1 749 1 is_stmt 0 view .LVU711
ARM GAS  /tmp/ccQmV08g.s 			page 61


 2200 0024 BDE80840 		pop	{r3, lr}
 2201              		.cfi_restore 14
 2202              		.cfi_restore 3
 2203              		.cfi_def_cfa_offset 0
 2204              	.LBB29:
 2205              	.LBB27:
  36:../common/ubertooth.c **** }
 2206              		.loc 1 36 2 view .LVU712
 2207 0028 FFF7FEBF 		b	wait_us
 2208              	.LVL149:
 2209              	.L158:
 2210              		.align	2
 2211              	.L157:
 2212 002c 3CC00920 		.word	537509948
 2213 0030 40420F00 		.word	1000000
 2214 0034 08000040 		.word	1073741832
 2215              	.LBE27:
 2216              	.LBE29:
 2217              		.cfi_endproc
 2218              	.LFE27:
 2220              		.section	.text.cc2400_tune_rx,"ax",%progbits
 2221              		.align	1
 2222              		.global	cc2400_tune_rx
 2223              		.syntax unified
 2224              		.thumb
 2225              		.thumb_func
 2226              		.fpu softvfp
 2228              	cc2400_tune_rx:
 2229              	.LVL150:
 2230              	.LFB28:
 750:../common/ubertooth.c **** 
 751:../common/ubertooth.c **** /* take control of R8C microcontroller and CC2400 on the ToorCon 13 badge */
 752:../common/ubertooth.c **** #ifdef TC13BADGE
 753:../common/ubertooth.c **** void r8c_takeover(void)
 754:../common/ubertooth.c **** {
 755:../common/ubertooth.c **** 	/* wait until user presses SW1 while USB is connected */
 756:../common/ubertooth.c **** 	while (SW1 || !VBUS) {
 757:../common/ubertooth.c **** 		/* turn off power to all peripherals except GPIO */
 758:../common/ubertooth.c **** 		PCONP = PCONP_PCGPIO;
 759:../common/ubertooth.c **** 
 760:../common/ubertooth.c **** 		/* enable interrupt on falling edge of P2.8 (SW1) */
 761:../common/ubertooth.c **** 		IO2IntEnF |= (0x1 << 8);
 762:../common/ubertooth.c **** 		ISER0 |= ISER0_ISE_EINT3;
 763:../common/ubertooth.c **** 
 764:../common/ubertooth.c **** 		/* go into power-down mode and wait for interrupt */
 765:../common/ubertooth.c **** 		SCB_SCR = SCB_SCR_SLEEPDEEP;
 766:../common/ubertooth.c **** 		PCON = (PCON_PM0 | PCON_BOGD);
 767:../common/ubertooth.c **** 		asm("WFI");
 768:../common/ubertooth.c **** 
 769:../common/ubertooth.c **** 		/* disable interrupt */
 770:../common/ubertooth.c **** 		IO2IntEnF &= ~(0x1 << 8);
 771:../common/ubertooth.c **** 		ICER0 |= ICER0_ICE_EINT3;
 772:../common/ubertooth.c **** 
 773:../common/ubertooth.c **** 		/* turn power back on for peripherals we use */
 774:../common/ubertooth.c **** 		PCONP = (PCONP_PCTIM0 | PCONP_PCSSP1 | PCONP_PCGPIO | PCONP_PCSSP0);
 775:../common/ubertooth.c **** 	}
 776:../common/ubertooth.c **** 
ARM GAS  /tmp/ccQmV08g.s 			page 62


 777:../common/ubertooth.c **** 	/* drop R8C_CTL to let the R8C know we are taking over */
 778:../common/ubertooth.c **** 	R8C_CTL_CLR;
 779:../common/ubertooth.c **** 
 780:../common/ubertooth.c **** 	/* wait for the R8C to acknowledge the takeover */
 781:../common/ubertooth.c **** 	while (R8C_ACK);
 782:../common/ubertooth.c **** }
 783:../common/ubertooth.c **** 
 784:../common/ubertooth.c **** /* interrupt handler for SW1 */
 785:../common/ubertooth.c **** void EINT3_IRQHandler(void)
 786:../common/ubertooth.c **** {
 787:../common/ubertooth.c **** 	/* clear interrupt */
 788:../common/ubertooth.c **** 	IO2IntClr |= (0x1 << 8);
 789:../common/ubertooth.c **** }
 790:../common/ubertooth.c **** #endif
 791:../common/ubertooth.c **** 
 792:../common/ubertooth.c **** /*
 793:../common/ubertooth.c ****  * Tune the CC2400 to a frequency in MHz for RX.  The calling function should
 794:../common/ubertooth.c ****  * ensure that the CC2400 is in the IDLE state.
 795:../common/ubertooth.c ****  */
 796:../common/ubertooth.c **** void cc2400_tune_rx(uint16_t channel)
 797:../common/ubertooth.c **** {
 2231              		.loc 1 797 1 is_stmt 1 view -0
 2232              		.cfi_startproc
 2233              		@ args = 0, pretend = 0, frame = 0
 2234              		@ frame_needed = 0, uses_anonymous_args = 0
 2235              		@ link register save eliminated.
 2236              		.loc 1 797 1 is_stmt 0 view .LVU714
 798:../common/ubertooth.c **** 	cc2400_set(FSDIV, channel - 1);
 2237              		.loc 1 798 2 is_stmt 1 view .LVU715
 2238 0000 411E     		subs	r1, r0, #1
 2239 0002 89B2     		uxth	r1, r1
 2240 0004 0220     		movs	r0, #2
 2241              	.LVL151:
 2242              		.loc 1 798 2 is_stmt 0 view .LVU716
 2243 0006 FFF7FEBF 		b	cc2400_set
 2244              	.LVL152:
 2245              		.cfi_endproc
 2246              	.LFE28:
 2248              		.section	.text.cc2400_tune_tx,"ax",%progbits
 2249              		.align	1
 2250              		.global	cc2400_tune_tx
 2251              		.syntax unified
 2252              		.thumb
 2253              		.thumb_func
 2254              		.fpu softvfp
 2256              	cc2400_tune_tx:
 2257              	.LVL153:
 2258              	.LFB29:
 799:../common/ubertooth.c **** }
 800:../common/ubertooth.c **** 
 801:../common/ubertooth.c **** /*
 802:../common/ubertooth.c ****  * Tune the CC2400 to a frequency in MHz for TX.  The calling function should
 803:../common/ubertooth.c ****  * ensure that the CC2400 is in the IDLE state.
 804:../common/ubertooth.c ****  */
 805:../common/ubertooth.c **** void cc2400_tune_tx(uint16_t channel)
 806:../common/ubertooth.c **** {
 2259              		.loc 1 806 1 is_stmt 1 view -0
ARM GAS  /tmp/ccQmV08g.s 			page 63


 2260              		.cfi_startproc
 2261              		@ args = 0, pretend = 0, frame = 0
 2262              		@ frame_needed = 0, uses_anonymous_args = 0
 2263              		@ link register save eliminated.
 2264              		.loc 1 806 1 is_stmt 0 view .LVU718
 807:../common/ubertooth.c **** 	cc2400_set(FSDIV, channel);
 2265              		.loc 1 807 2 is_stmt 1 view .LVU719
 806:../common/ubertooth.c **** 	cc2400_set(FSDIV, channel);
 2266              		.loc 1 806 1 is_stmt 0 view .LVU720
 2267 0000 0146     		mov	r1, r0
 2268              		.loc 1 807 2 view .LVU721
 2269 0002 0220     		movs	r0, #2
 2270              	.LVL154:
 2271              		.loc 1 807 2 view .LVU722
 2272 0004 FFF7FEBF 		b	cc2400_set
 2273              	.LVL155:
 2274              		.cfi_endproc
 2275              	.LFE29:
 2277              		.section	.text.cc2400_hop_rx,"ax",%progbits
 2278              		.align	1
 2279              		.global	cc2400_hop_rx
 2280              		.syntax unified
 2281              		.thumb
 2282              		.thumb_func
 2283              		.fpu softvfp
 2285              	cc2400_hop_rx:
 2286              	.LVL156:
 2287              	.LFB30:
 808:../common/ubertooth.c **** }
 809:../common/ubertooth.c **** 
 810:../common/ubertooth.c **** /* Hop to a new RX frequency in MHz.  Assumes starting from RX or TX state. */
 811:../common/ubertooth.c **** void cc2400_hop_rx(uint16_t channel)
 812:../common/ubertooth.c **** {
 2288              		.loc 1 812 1 is_stmt 1 view -0
 2289              		.cfi_startproc
 2290              		@ args = 0, pretend = 0, frame = 0
 2291              		@ frame_needed = 0, uses_anonymous_args = 0
 2292              		.loc 1 812 1 is_stmt 0 view .LVU724
 2293 0000 10B5     		push	{r4, lr}
 2294              		.cfi_def_cfa_offset 8
 2295              		.cfi_offset 4, -8
 2296              		.cfi_offset 14, -4
 813:../common/ubertooth.c **** 	cc2400_strobe(SRFOFF);
 2297              		.loc 1 813 2 is_stmt 1 view .LVU725
 812:../common/ubertooth.c **** 	cc2400_strobe(SRFOFF);
 2298              		.loc 1 812 1 is_stmt 0 view .LVU726
 2299 0002 0446     		mov	r4, r0
 2300              		.loc 1 813 2 view .LVU727
 2301 0004 6420     		movs	r0, #100
 2302              	.LVL157:
 2303              		.loc 1 813 2 view .LVU728
 2304 0006 FFF7FEFF 		bl	cc2400_strobe
 2305              	.LVL158:
 814:../common/ubertooth.c **** 	while ((cc2400_status() & FS_LOCK));
 2306              		.loc 1 814 2 is_stmt 1 view .LVU729
 2307              	.L162:
 2308              		.loc 1 814 37 discriminator 1 view .LVU730
ARM GAS  /tmp/ccQmV08g.s 			page 64


 2309              		.loc 1 814 8 discriminator 1 view .LVU731
 2310              		.loc 1 814 10 is_stmt 0 discriminator 1 view .LVU732
 2311 000a FFF7FEFF 		bl	cc2400_status
 2312              	.LVL159:
 2313              		.loc 1 814 8 discriminator 1 view .LVU733
 2314 000e 4107     		lsls	r1, r0, #29
 2315 0010 FBD4     		bmi	.L162
 815:../common/ubertooth.c **** 	cc2400_tune_rx(channel);
 2316              		.loc 1 815 2 is_stmt 1 view .LVU734
 2317 0012 2046     		mov	r0, r4
 2318 0014 FFF7FEFF 		bl	cc2400_tune_rx
 2319              	.LVL160:
 816:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 2320              		.loc 1 816 2 view .LVU735
 2321              	.L163:
 2322              		.loc 1 816 45 discriminator 1 view .LVU736
 2323              		.loc 1 816 8 discriminator 1 view .LVU737
 2324              		.loc 1 816 11 is_stmt 0 discriminator 1 view .LVU738
 2325 0018 FFF7FEFF 		bl	cc2400_status
 2326              	.LVL161:
 2327              		.loc 1 816 8 discriminator 1 view .LVU739
 2328 001c 4206     		lsls	r2, r0, #25
 2329 001e FBD5     		bpl	.L163
 817:../common/ubertooth.c **** 	cc2400_strobe(SFSON);
 2330              		.loc 1 817 2 is_stmt 1 view .LVU740
 2331 0020 6120     		movs	r0, #97
 2332 0022 FFF7FEFF 		bl	cc2400_strobe
 2333              	.LVL162:
 818:../common/ubertooth.c **** 	while (!(cc2400_status() & FS_LOCK));
 2334              		.loc 1 818 2 view .LVU741
 2335              	.L164:
 2336              		.loc 1 818 38 discriminator 1 view .LVU742
 2337              		.loc 1 818 8 discriminator 1 view .LVU743
 2338              		.loc 1 818 11 is_stmt 0 discriminator 1 view .LVU744
 2339 0026 FFF7FEFF 		bl	cc2400_status
 2340              	.LVL163:
 2341              		.loc 1 818 8 discriminator 1 view .LVU745
 2342 002a 4307     		lsls	r3, r0, #29
 2343 002c FBD5     		bpl	.L164
 819:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 2344              		.loc 1 819 2 is_stmt 1 view .LVU746
 820:../common/ubertooth.c **** }
 2345              		.loc 1 820 1 is_stmt 0 view .LVU747
 2346 002e BDE81040 		pop	{r4, lr}
 2347              		.cfi_restore 14
 2348              		.cfi_restore 4
 2349              		.cfi_def_cfa_offset 0
 819:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 2350              		.loc 1 819 2 view .LVU748
 2351 0032 6220     		movs	r0, #98
 2352 0034 FFF7FEBF 		b	cc2400_strobe
 2353              	.LVL164:
 2354              		.cfi_endproc
 2355              	.LFE30:
 2357              		.section	.text.cc2400_hop_tx,"ax",%progbits
 2358              		.align	1
 2359              		.global	cc2400_hop_tx
ARM GAS  /tmp/ccQmV08g.s 			page 65


 2360              		.syntax unified
 2361              		.thumb
 2362              		.thumb_func
 2363              		.fpu softvfp
 2365              	cc2400_hop_tx:
 2366              	.LFB38:
 2367              		.cfi_startproc
 2368              		@ args = 0, pretend = 0, frame = 0
 2369              		@ frame_needed = 0, uses_anonymous_args = 0
 2370              		@ link register save eliminated.
 2371 0000 FFF7FEBF 		b	cc2400_hop_rx
 2372              		.cfi_endproc
 2373              	.LFE38:
 2375              		.section	.text.get_part_num,"ax",%progbits
 2376              		.align	1
 2377              		.global	get_part_num
 2378              		.syntax unified
 2379              		.thumb
 2380              		.thumb_func
 2381              		.fpu softvfp
 2383              	get_part_num:
 2384              	.LVL165:
 2385              	.LFB32:
 821:../common/ubertooth.c **** 
 822:../common/ubertooth.c **** /* Hop to a new TX frequency in MHz.  Assumes starting from RX or TX state. */
 823:../common/ubertooth.c **** void cc2400_hop_tx(uint16_t channel)
 824:../common/ubertooth.c **** {
 825:../common/ubertooth.c **** 	cc2400_strobe(SRFOFF);
 826:../common/ubertooth.c **** 	while ((cc2400_status() & FS_LOCK));
 827:../common/ubertooth.c **** 	cc2400_tune_rx(channel);
 828:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 829:../common/ubertooth.c **** 	cc2400_strobe(SFSON);
 830:../common/ubertooth.c **** 	while (!(cc2400_status() & FS_LOCK));
 831:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 832:../common/ubertooth.c **** }
 833:../common/ubertooth.c **** 
 834:../common/ubertooth.c **** void get_part_num(uint8_t *buffer, int *len)
 835:../common/ubertooth.c **** {
 2386              		.loc 1 835 1 is_stmt 1 view -0
 2387              		.cfi_startproc
 2388              		@ args = 0, pretend = 0, frame = 40
 2389              		@ frame_needed = 0, uses_anonymous_args = 0
 2390              		.loc 1 835 1 is_stmt 0 view .LVU750
 2391 0000 30B5     		push	{r4, r5, lr}
 2392              		.cfi_def_cfa_offset 12
 2393              		.cfi_offset 4, -12
 2394              		.cfi_offset 5, -8
 2395              		.cfi_offset 14, -4
 2396 0002 8BB0     		sub	sp, sp, #44
 2397              		.cfi_def_cfa_offset 56
 836:../common/ubertooth.c **** 	u32 command[5];
 2398              		.loc 1 836 2 is_stmt 1 view .LVU751
 837:../common/ubertooth.c **** 	u32 result[5];
 2399              		.loc 1 837 2 view .LVU752
 838:../common/ubertooth.c **** 	command[0] = 54; /* read part number */
 2400              		.loc 1 838 2 view .LVU753
 2401              		.loc 1 838 13 is_stmt 0 view .LVU754
ARM GAS  /tmp/ccQmV08g.s 			page 66


 2402 0004 3623     		movs	r3, #54
 835:../common/ubertooth.c **** 	u32 command[5];
 2403              		.loc 1 835 1 view .LVU755
 2404 0006 0446     		mov	r4, r0
 2405 0008 0D46     		mov	r5, r1
 2406              		.loc 1 838 13 view .LVU756
 2407 000a 0093     		str	r3, [sp]
 839:../common/ubertooth.c **** 	iap_entry(command, result);
 2408              		.loc 1 839 2 is_stmt 1 view .LVU757
 2409 000c 6846     		mov	r0, sp
 2410              	.LVL166:
 2411              		.loc 1 839 2 is_stmt 0 view .LVU758
 2412 000e 084B     		ldr	r3, .L172
 2413 0010 05A9     		add	r1, sp, #20
 2414              	.LVL167:
 2415              		.loc 1 839 2 view .LVU759
 2416 0012 9847     		blx	r3
 2417              	.LVL168:
 840:../common/ubertooth.c **** 	buffer[0] = result[0] & 0xFF; /* status */
 2418              		.loc 1 840 2 is_stmt 1 view .LVU760
 2419              		.loc 1 840 12 is_stmt 0 view .LVU761
 2420 0014 059B     		ldr	r3, [sp, #20]
 2421 0016 2370     		strb	r3, [r4]
 841:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 2422              		.loc 1 841 2 is_stmt 1 view .LVU762
 2423              		.loc 1 841 20 is_stmt 0 view .LVU763
 2424 0018 069B     		ldr	r3, [sp, #24]
 842:../common/ubertooth.c **** 	buffer[2] = (result[1] >> 8) & 0xFF;
 2425              		.loc 1 842 25 view .LVU764
 2426 001a 1A0A     		lsrs	r2, r3, #8
 841:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 2427              		.loc 1 841 12 view .LVU765
 2428 001c 6370     		strb	r3, [r4, #1]
 2429              		.loc 1 842 2 is_stmt 1 view .LVU766
 2430              		.loc 1 842 12 is_stmt 0 view .LVU767
 2431 001e A270     		strb	r2, [r4, #2]
 843:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 2432              		.loc 1 843 2 is_stmt 1 view .LVU768
 2433              		.loc 1 843 25 is_stmt 0 view .LVU769
 2434 0020 1A0C     		lsrs	r2, r3, #16
 844:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 2435              		.loc 1 844 25 view .LVU770
 2436 0022 1B0E     		lsrs	r3, r3, #24
 2437              		.loc 1 844 12 view .LVU771
 2438 0024 2371     		strb	r3, [r4, #4]
 845:../common/ubertooth.c **** 	*len = 5;
 2439              		.loc 1 845 7 view .LVU772
 2440 0026 0523     		movs	r3, #5
 843:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 2441              		.loc 1 843 12 view .LVU773
 2442 0028 E270     		strb	r2, [r4, #3]
 844:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 2443              		.loc 1 844 2 is_stmt 1 view .LVU774
 2444              		.loc 1 845 2 view .LVU775
 2445              		.loc 1 845 7 is_stmt 0 view .LVU776
 2446 002a 2B60     		str	r3, [r5]
 846:../common/ubertooth.c **** 	
ARM GAS  /tmp/ccQmV08g.s 			page 67


 847:../common/ubertooth.c **** }
 2447              		.loc 1 847 1 view .LVU777
 2448 002c 0BB0     		add	sp, sp, #44
 2449              		.cfi_def_cfa_offset 12
 2450              		@ sp needed
 2451 002e 30BD     		pop	{r4, r5, pc}
 2452              	.LVL169:
 2453              	.L173:
 2454              		.loc 1 847 1 view .LVU778
 2455              		.align	2
 2456              	.L172:
 2457 0030 F11FFF1F 		.word	536813553
 2458              		.cfi_endproc
 2459              	.LFE32:
 2461              		.section	.text.get_device_serial,"ax",%progbits
 2462              		.align	1
 2463              		.global	get_device_serial
 2464              		.syntax unified
 2465              		.thumb
 2466              		.thumb_func
 2467              		.fpu softvfp
 2469              	get_device_serial:
 2470              	.LVL170:
 2471              	.LFB33:
 848:../common/ubertooth.c **** 
 849:../common/ubertooth.c **** void get_device_serial(uint8_t *buffer, int *len)
 850:../common/ubertooth.c **** {
 2472              		.loc 1 850 1 is_stmt 1 view -0
 2473              		.cfi_startproc
 2474              		@ args = 0, pretend = 0, frame = 40
 2475              		@ frame_needed = 0, uses_anonymous_args = 0
 2476              		.loc 1 850 1 is_stmt 0 view .LVU780
 2477 0000 30B5     		push	{r4, r5, lr}
 2478              		.cfi_def_cfa_offset 12
 2479              		.cfi_offset 4, -12
 2480              		.cfi_offset 5, -8
 2481              		.cfi_offset 14, -4
 2482 0002 8BB0     		sub	sp, sp, #44
 2483              		.cfi_def_cfa_offset 56
 851:../common/ubertooth.c **** 	u32 command[5];
 2484              		.loc 1 851 2 is_stmt 1 view .LVU781
 852:../common/ubertooth.c **** 	u32 result[5];
 2485              		.loc 1 852 2 view .LVU782
 853:../common/ubertooth.c **** 	command[0] = 58; /* read device serial number */
 2486              		.loc 1 853 2 view .LVU783
 2487              		.loc 1 853 13 is_stmt 0 view .LVU784
 2488 0004 3A23     		movs	r3, #58
 850:../common/ubertooth.c **** 	u32 command[5];
 2489              		.loc 1 850 1 view .LVU785
 2490 0006 0446     		mov	r4, r0
 2491 0008 0D46     		mov	r5, r1
 2492              		.loc 1 853 13 view .LVU786
 2493 000a 0093     		str	r3, [sp]
 854:../common/ubertooth.c **** 	iap_entry(command, result);
 2494              		.loc 1 854 2 is_stmt 1 view .LVU787
 2495 000c 6846     		mov	r0, sp
 2496              	.LVL171:
ARM GAS  /tmp/ccQmV08g.s 			page 68


 2497              		.loc 1 854 2 is_stmt 0 view .LVU788
 2498 000e 144B     		ldr	r3, .L175
 2499 0010 05A9     		add	r1, sp, #20
 2500              	.LVL172:
 2501              		.loc 1 854 2 view .LVU789
 2502 0012 9847     		blx	r3
 2503              	.LVL173:
 855:../common/ubertooth.c **** 	buffer[0] = result[0] & 0xFF; /* status */
 2504              		.loc 1 855 2 is_stmt 1 view .LVU790
 2505              		.loc 1 855 12 is_stmt 0 view .LVU791
 2506 0014 059B     		ldr	r3, [sp, #20]
 2507 0016 2370     		strb	r3, [r4]
 856:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 2508              		.loc 1 856 2 is_stmt 1 view .LVU792
 2509              		.loc 1 856 20 is_stmt 0 view .LVU793
 2510 0018 069B     		ldr	r3, [sp, #24]
 857:../common/ubertooth.c **** 	buffer[2] = (result[1] >> 8) & 0xFF;
 2511              		.loc 1 857 25 view .LVU794
 2512 001a 1A0A     		lsrs	r2, r3, #8
 856:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 2513              		.loc 1 856 12 view .LVU795
 2514 001c 6370     		strb	r3, [r4, #1]
 2515              		.loc 1 857 2 is_stmt 1 view .LVU796
 2516              		.loc 1 857 12 is_stmt 0 view .LVU797
 2517 001e A270     		strb	r2, [r4, #2]
 858:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 2518              		.loc 1 858 2 is_stmt 1 view .LVU798
 2519              		.loc 1 858 25 is_stmt 0 view .LVU799
 2520 0020 1A0C     		lsrs	r2, r3, #16
 859:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 2521              		.loc 1 859 25 view .LVU800
 2522 0022 1B0E     		lsrs	r3, r3, #24
 2523              		.loc 1 859 12 view .LVU801
 2524 0024 2371     		strb	r3, [r4, #4]
 860:../common/ubertooth.c **** 	buffer[5] = result[2] & 0xFF;
 2525              		.loc 1 860 20 view .LVU802
 2526 0026 079B     		ldr	r3, [sp, #28]
 858:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 2527              		.loc 1 858 12 view .LVU803
 2528 0028 E270     		strb	r2, [r4, #3]
 859:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 2529              		.loc 1 859 2 is_stmt 1 view .LVU804
 2530              		.loc 1 860 2 view .LVU805
 861:../common/ubertooth.c **** 	buffer[6] = (result[2] >> 8) & 0xFF;
 2531              		.loc 1 861 25 is_stmt 0 view .LVU806
 2532 002a 1A0A     		lsrs	r2, r3, #8
 860:../common/ubertooth.c **** 	buffer[5] = result[2] & 0xFF;
 2533              		.loc 1 860 12 view .LVU807
 2534 002c 6371     		strb	r3, [r4, #5]
 2535              		.loc 1 861 2 is_stmt 1 view .LVU808
 2536              		.loc 1 861 12 is_stmt 0 view .LVU809
 2537 002e A271     		strb	r2, [r4, #6]
 862:../common/ubertooth.c **** 	buffer[7] = (result[2] >> 16) & 0xFF;
 2538              		.loc 1 862 2 is_stmt 1 view .LVU810
 2539              		.loc 1 862 25 is_stmt 0 view .LVU811
 2540 0030 1A0C     		lsrs	r2, r3, #16
 863:../common/ubertooth.c **** 	buffer[8] = (result[2] >> 24) & 0xFF;
ARM GAS  /tmp/ccQmV08g.s 			page 69


 2541              		.loc 1 863 25 view .LVU812
 2542 0032 1B0E     		lsrs	r3, r3, #24
 2543              		.loc 1 863 12 view .LVU813
 2544 0034 2372     		strb	r3, [r4, #8]
 864:../common/ubertooth.c **** 	buffer[9] = result[3] & 0xFF;
 2545              		.loc 1 864 20 view .LVU814
 2546 0036 089B     		ldr	r3, [sp, #32]
 862:../common/ubertooth.c **** 	buffer[7] = (result[2] >> 16) & 0xFF;
 2547              		.loc 1 862 12 view .LVU815
 2548 0038 E271     		strb	r2, [r4, #7]
 863:../common/ubertooth.c **** 	buffer[8] = (result[2] >> 24) & 0xFF;
 2549              		.loc 1 863 2 is_stmt 1 view .LVU816
 2550              		.loc 1 864 2 view .LVU817
 865:../common/ubertooth.c **** 	buffer[10] = (result[3] >> 8) & 0xFF;
 2551              		.loc 1 865 26 is_stmt 0 view .LVU818
 2552 003a 1A0A     		lsrs	r2, r3, #8
 864:../common/ubertooth.c **** 	buffer[9] = result[3] & 0xFF;
 2553              		.loc 1 864 12 view .LVU819
 2554 003c 6372     		strb	r3, [r4, #9]
 2555              		.loc 1 865 2 is_stmt 1 view .LVU820
 2556              		.loc 1 865 13 is_stmt 0 view .LVU821
 2557 003e A272     		strb	r2, [r4, #10]
 866:../common/ubertooth.c **** 	buffer[11] = (result[3] >> 16) & 0xFF;
 2558              		.loc 1 866 2 is_stmt 1 view .LVU822
 2559              		.loc 1 866 26 is_stmt 0 view .LVU823
 2560 0040 1A0C     		lsrs	r2, r3, #16
 867:../common/ubertooth.c **** 	buffer[12] = (result[3] >> 24) & 0xFF;
 2561              		.loc 1 867 26 view .LVU824
 2562 0042 1B0E     		lsrs	r3, r3, #24
 2563              		.loc 1 867 13 view .LVU825
 2564 0044 2373     		strb	r3, [r4, #12]
 868:../common/ubertooth.c **** 	buffer[13] = result[4] & 0xFF;
 2565              		.loc 1 868 21 view .LVU826
 2566 0046 099B     		ldr	r3, [sp, #36]
 866:../common/ubertooth.c **** 	buffer[11] = (result[3] >> 16) & 0xFF;
 2567              		.loc 1 866 13 view .LVU827
 2568 0048 E272     		strb	r2, [r4, #11]
 867:../common/ubertooth.c **** 	buffer[12] = (result[3] >> 24) & 0xFF;
 2569              		.loc 1 867 2 is_stmt 1 view .LVU828
 2570              		.loc 1 868 2 view .LVU829
 869:../common/ubertooth.c **** 	buffer[14] = (result[4] >> 8) & 0xFF;
 2571              		.loc 1 869 26 is_stmt 0 view .LVU830
 2572 004a 1A0A     		lsrs	r2, r3, #8
 868:../common/ubertooth.c **** 	buffer[13] = result[4] & 0xFF;
 2573              		.loc 1 868 13 view .LVU831
 2574 004c 6373     		strb	r3, [r4, #13]
 2575              		.loc 1 869 2 is_stmt 1 view .LVU832
 2576              		.loc 1 869 13 is_stmt 0 view .LVU833
 2577 004e A273     		strb	r2, [r4, #14]
 870:../common/ubertooth.c **** 	buffer[15] = (result[4] >> 16) & 0xFF;
 2578              		.loc 1 870 2 is_stmt 1 view .LVU834
 2579              		.loc 1 870 26 is_stmt 0 view .LVU835
 2580 0050 1A0C     		lsrs	r2, r3, #16
 871:../common/ubertooth.c **** 	buffer[16] = (result[4] >> 24) & 0xFF;
 2581              		.loc 1 871 26 view .LVU836
 2582 0052 1B0E     		lsrs	r3, r3, #24
 2583              		.loc 1 871 13 view .LVU837
ARM GAS  /tmp/ccQmV08g.s 			page 70


 2584 0054 2374     		strb	r3, [r4, #16]
 872:../common/ubertooth.c **** 	*len = 17;
 2585              		.loc 1 872 7 view .LVU838
 2586 0056 1123     		movs	r3, #17
 870:../common/ubertooth.c **** 	buffer[15] = (result[4] >> 16) & 0xFF;
 2587              		.loc 1 870 13 view .LVU839
 2588 0058 E273     		strb	r2, [r4, #15]
 871:../common/ubertooth.c **** 	buffer[16] = (result[4] >> 24) & 0xFF;
 2589              		.loc 1 871 2 is_stmt 1 view .LVU840
 2590              		.loc 1 872 2 view .LVU841
 2591              		.loc 1 872 7 is_stmt 0 view .LVU842
 2592 005a 2B60     		str	r3, [r5]
 873:../common/ubertooth.c **** }
 2593              		.loc 1 873 1 view .LVU843
 2594 005c 0BB0     		add	sp, sp, #44
 2595              		.cfi_def_cfa_offset 12
 2596              		@ sp needed
 2597 005e 30BD     		pop	{r4, r5, pc}
 2598              	.LVL174:
 2599              	.L176:
 2600              		.loc 1 873 1 view .LVU844
 2601              		.align	2
 2602              	.L175:
 2603 0060 F11FFF1F 		.word	536813553
 2604              		.cfi_endproc
 2605              	.LFE33:
 2607              		.section	.text.set_isp,"ax",%progbits
 2608              		.align	1
 2609              		.global	set_isp
 2610              		.syntax unified
 2611              		.thumb
 2612              		.thumb_func
 2613              		.fpu softvfp
 2615              	set_isp:
 2616              	.LFB34:
 874:../common/ubertooth.c **** 
 875:../common/ubertooth.c **** void set_isp(void)
 876:../common/ubertooth.c **** {
 2617              		.loc 1 876 1 is_stmt 1 view -0
 2618              		.cfi_startproc
 2619              		@ args = 0, pretend = 0, frame = 40
 2620              		@ frame_needed = 0, uses_anonymous_args = 0
 2621 0000 00B5     		push	{lr}
 2622              		.cfi_def_cfa_offset 4
 2623              		.cfi_offset 14, -4
 2624 0002 8BB0     		sub	sp, sp, #44
 2625              		.cfi_def_cfa_offset 48
 877:../common/ubertooth.c **** 	u32 command[5];
 2626              		.loc 1 877 2 view .LVU846
 878:../common/ubertooth.c **** 	u32 result[5];
 2627              		.loc 1 878 2 view .LVU847
 879:../common/ubertooth.c **** 	command[0] = 57;
 2628              		.loc 1 879 2 view .LVU848
 2629              		.loc 1 879 13 is_stmt 0 view .LVU849
 2630 0004 3923     		movs	r3, #57
 880:../common/ubertooth.c **** 	iap_entry(command, result);
 2631              		.loc 1 880 2 view .LVU850
ARM GAS  /tmp/ccQmV08g.s 			page 71


 2632 0006 6846     		mov	r0, sp
 879:../common/ubertooth.c **** 	command[0] = 57;
 2633              		.loc 1 879 13 view .LVU851
 2634 0008 0093     		str	r3, [sp]
 2635              		.loc 1 880 2 is_stmt 1 view .LVU852
 2636 000a 05A9     		add	r1, sp, #20
 2637 000c 024B     		ldr	r3, .L178
 2638 000e 9847     		blx	r3
 2639              	.LVL175:
 881:../common/ubertooth.c **** }
 2640              		.loc 1 881 1 is_stmt 0 view .LVU853
 2641 0010 0BB0     		add	sp, sp, #44
 2642              		.cfi_def_cfa_offset 4
 2643              		@ sp needed
 2644 0012 5DF804FB 		ldr	pc, [sp], #4
 2645              	.L179:
 2646 0016 00BF     		.align	2
 2647              	.L178:
 2648 0018 F11FFF1F 		.word	536813553
 2649              		.cfi_endproc
 2650              	.LFE34:
 2652              		.section	.text.int_to_bit6,"ax",%progbits
 2653              		.align	1
 2654              		.global	int_to_bit6
 2655              		.syntax unified
 2656              		.thumb
 2657              		.thumb_func
 2658              		.fpu softvfp
 2660              	int_to_bit6:
 2661              	.LVL176:
 2662              	.LFB35:
 882:../common/ubertooth.c **** 
 883:../common/ubertooth.c **** uint8_t int_to_bit6(int16_t i)
 884:../common/ubertooth.c **** {
 2663              		.loc 1 884 1 is_stmt 1 view -0
 2664              		.cfi_startproc
 2665              		@ args = 0, pretend = 0, frame = 0
 2666              		@ frame_needed = 0, uses_anonymous_args = 0
 2667              		@ link register save eliminated.
 2668              		.loc 1 884 1 is_stmt 0 view .LVU855
 885:../common/ubertooth.c **** 	uint8_t val = 0;
 2669              		.loc 1 885 2 is_stmt 1 view .LVU856
 2670              	.LVL177:
 886:../common/ubertooth.c **** 	/* This is negative */
 887:../common/ubertooth.c **** 	if (i < 0) {
 2671              		.loc 1 887 2 view .LVU857
 2672              		.loc 1 887 5 is_stmt 0 view .LVU858
 2673 0000 0028     		cmp	r0, #0
 2674              	.LVL178:
 888:../common/ubertooth.c **** 		val |= 32;
 2675              		.loc 1 888 7 view .LVU859
 2676 0002 ACBF     		ite	ge
 2677 0004 0023     		movge	r3, #0
 2678 0006 2023     		movlt	r3, #32
 2679              	.LVL179:
 889:../common/ubertooth.c **** 	}
 890:../common/ubertooth.c **** 	val |= (i & 0x1f);
ARM GAS  /tmp/ccQmV08g.s 			page 72


 2680              		.loc 1 890 2 is_stmt 1 view .LVU860
 2681              		.loc 1 890 12 is_stmt 0 view .LVU861
 2682 0008 00F01F00 		and	r0, r0, #31
 2683              	.LVL180:
 891:../common/ubertooth.c **** 	return val;
 2684              		.loc 1 891 2 is_stmt 1 view .LVU862
 892:../common/ubertooth.c **** }
 2685              		.loc 1 892 1 is_stmt 0 view .LVU863
 2686 000c 1843     		orrs	r0, r0, r3
 2687              	.LVL181:
 2688              		.loc 1 892 1 view .LVU864
 2689 000e 7047     		bx	lr
 2690              		.cfi_endproc
 2691              	.LFE35:
 2693              		.section	.text.bit6_to_int,"ax",%progbits
 2694              		.align	1
 2695              		.global	bit6_to_int
 2696              		.syntax unified
 2697              		.thumb
 2698              		.thumb_func
 2699              		.fpu softvfp
 2701              	bit6_to_int:
 2702              	.LVL182:
 2703              	.LFB36:
 893:../common/ubertooth.c **** 
 894:../common/ubertooth.c **** int16_t bit6_to_int(uint8_t i) 
 895:../common/ubertooth.c **** {
 2704              		.loc 1 895 1 is_stmt 1 view -0
 2705              		.cfi_startproc
 2706              		@ args = 0, pretend = 0, frame = 0
 2707              		@ frame_needed = 0, uses_anonymous_args = 0
 2708              		@ link register save eliminated.
 2709              		.loc 1 895 1 is_stmt 0 view .LVU866
 896:../common/ubertooth.c **** 	int16_t val = 0;
 2710              		.loc 1 896 2 is_stmt 1 view .LVU867
 2711              	.LVL183:
 897:../common/ubertooth.c **** 	if (i & (1 << 5)) {
 2712              		.loc 1 897 2 view .LVU868
 2713              		.loc 1 897 5 is_stmt 0 view .LVU869
 2714 0000 10F0200F 		tst	r0, #32
 898:../common/ubertooth.c **** 		val |= 1 << 15;
 2715              		.loc 1 898 7 view .LVU870
 2716 0004 034B     		ldr	r3, .L186
 2717 0006 08BF     		it	eq
 2718 0008 0023     		moveq	r3, #0
 2719              	.LVL184:
 899:../common/ubertooth.c **** 	}
 900:../common/ubertooth.c **** 	val |= (i & 0x1f);
 2720              		.loc 1 900 2 is_stmt 1 view .LVU871
 901:../common/ubertooth.c **** 	return val;
 2721              		.loc 1 901 2 view .LVU872
 900:../common/ubertooth.c **** 	return val;
 2722              		.loc 1 900 12 is_stmt 0 view .LVU873
 2723 000a 00F01F00 		and	r0, r0, #31
 2724              	.LVL185:
 902:../common/ubertooth.c **** }
 2725              		.loc 1 902 1 view .LVU874
ARM GAS  /tmp/ccQmV08g.s 			page 73


 2726 000e 1843     		orrs	r0, r0, r3
 2727 0010 7047     		bx	lr
 2728              	.L187:
 2729 0012 00BF     		.align	2
 2730              	.L186:
 2731 0014 0080FFFF 		.word	-32768
 2732              		.cfi_endproc
 2733              	.LFE36:
 2735              		.global	cur_reg
 2736              		.comm	msbs,32,2
 2737              		.global	msb16
 2738              		.global	msb8
 2739              		.global	iap_entry
 2740              		.section	.rodata
 2741              		.align	2
 2744              	iap_entry:
 2745 0000 F11FFF1F 		.word	536813553
 2746              		.data
 2747              		.align	2
 2748              		.set	.LANCHOR1,. + 0
 2751              	msb8:
 2752 0000 80000000 		.word	128
 2755              	msb16:
 2756 0004 0080     		.short	-32768
 2757              		.bss
 2758              		.align	2
 2759              		.set	.LANCHOR0,. + 0
 2762              	delay_counter:
 2763 0000 00000000 		.space	4
 2766              	wait_us_counter:
 2767 0004 00000000 		.space	4
 2770              	cur_reg:
 2771 0008 00       		.space	1
 2772              		.text
 2773              	.Letext0:
 2774              		.file 2 "/backup/ZEPHYR/AVATAR/root/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none-eabi/9.3.1
 2775              		.file 3 "../common/ubertooth.h"
ARM GAS  /tmp/ccQmV08g.s 			page 74


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ubertooth.c
     /tmp/ccQmV08g.s:16     .text.spi_delay:0000000000000000 $t
     /tmp/ccQmV08g.s:23     .text.spi_delay:0000000000000000 spi_delay
     /tmp/ccQmV08g.s:52     .text.spi_delay:0000000000000014 $d
     /tmp/ccQmV08g.s:57     .text.rbit:0000000000000000 $t
     /tmp/ccQmV08g.s:64     .text.rbit:0000000000000000 rbit
     /tmp/ccQmV08g.s:90     .text.rbit8:0000000000000000 $t
     /tmp/ccQmV08g.s:97     .text.rbit8:0000000000000000 rbit8
     /tmp/ccQmV08g.s:126    .text.wait_us:0000000000000000 $t
     /tmp/ccQmV08g.s:133    .text.wait_us:0000000000000000 wait_us
     /tmp/ccQmV08g.s:175    .text.wait_us:0000000000000028 $d
     /tmp/ccQmV08g.s:180    .text.wait:0000000000000000 $t
     /tmp/ccQmV08g.s:187    .text.wait:0000000000000000 wait
     /tmp/ccQmV08g.s:206    .text.wait:0000000000000008 $d
     /tmp/ccQmV08g.s:211    .text.wait_ms:0000000000000000 $t
     /tmp/ccQmV08g.s:218    .text.wait_ms:0000000000000000 wait_ms
     /tmp/ccQmV08g.s:238    .text.all_pins_off:0000000000000000 $t
     /tmp/ccQmV08g.s:245    .text.all_pins_off:0000000000000000 all_pins_off
     /tmp/ccQmV08g.s:337    .text.all_pins_off:0000000000000044 $d
     /tmp/ccQmV08g.s:345    .text.gpio_init:0000000000000000 $t
     /tmp/ccQmV08g.s:352    .text.gpio_init:0000000000000000 gpio_init
     /tmp/ccQmV08g.s:408    .text.gpio_init:0000000000000030 $d
     /tmp/ccQmV08g.s:413    .text.dio_ssp_init:0000000000000000 $t
     /tmp/ccQmV08g.s:420    .text.dio_ssp_init:0000000000000000 dio_ssp_init
     /tmp/ccQmV08g.s:488    .text.dio_ssp_init:0000000000000050 $d
     /tmp/ccQmV08g.s:496    .text.atest_init:0000000000000000 $t
     /tmp/ccQmV08g.s:503    .text.atest_init:0000000000000000 atest_init
     /tmp/ccQmV08g.s:538    .text.atest_init:0000000000000028 $d
     /tmp/ccQmV08g.s:545    .text.cc2400_spi:0000000000000000 $t
     /tmp/ccQmV08g.s:552    .text.cc2400_spi:0000000000000000 cc2400_spi
     /tmp/ccQmV08g.s:642    .text.cc2400_spi:0000000000000044 $d
     /tmp/ccQmV08g.s:649    .text.cc2400_init:0000000000000000 $t
     /tmp/ccQmV08g.s:656    .text.cc2400_init:0000000000000000 cc2400_init
     /tmp/ccQmV08g.s:717    .text.cc2400_init:000000000000002c $d
     /tmp/ccQmV08g.s:726    .text.cc2400_spi_continue_write_start:0000000000000000 $t
     /tmp/ccQmV08g.s:733    .text.cc2400_spi_continue_write_start:0000000000000000 cc2400_spi_continue_write_start
     /tmp/ccQmV08g.s:842    .text.cc2400_spi_continue_write_start:0000000000000054 $d
     /tmp/ccQmV08g.s:850    .text.cc2400_spi_continue_write:0000000000000000 $t
     /tmp/ccQmV08g.s:857    .text.cc2400_spi_continue_write:0000000000000000 cc2400_spi_continue_write
     /tmp/ccQmV08g.s:921    .text.cc2400_spi_continue_write:0000000000000028 $d
     /tmp/ccQmV08g.s:928    .text.cc2400_spi_continue_write_stop:0000000000000000 $t
     /tmp/ccQmV08g.s:935    .text.cc2400_spi_continue_write_stop:0000000000000000 cc2400_spi_continue_write_stop
     /tmp/ccQmV08g.s:956    .text.cc2400_spi_continue_write_stop:0000000000000010 $d
     /tmp/ccQmV08g.s:962    .text.cc2400_get:0000000000000000 $t
     /tmp/ccQmV08g.s:969    .text.cc2400_get:0000000000000000 cc2400_get
     /tmp/ccQmV08g.s:1004   .text.cc2400_set:0000000000000000 $t
     /tmp/ccQmV08g.s:1011   .text.cc2400_set:0000000000000000 cc2400_set
     /tmp/ccQmV08g.s:1036   .text.cc2400_get8:0000000000000000 $t
     /tmp/ccQmV08g.s:1043   .text.cc2400_get8:0000000000000000 cc2400_get8
     /tmp/ccQmV08g.s:1078   .text.cc2400_set8:0000000000000000 $t
     /tmp/ccQmV08g.s:1085   .text.cc2400_set8:0000000000000000 cc2400_set8
     /tmp/ccQmV08g.s:1110   .text.cc2400_fifo_write:0000000000000000 $t
     /tmp/ccQmV08g.s:1117   .text.cc2400_fifo_write:0000000000000000 cc2400_fifo_write
     /tmp/ccQmV08g.s:1259   .text.cc2400_fifo_write:0000000000000074 $d
     /tmp/ccQmV08g.s:1265   .text.cc2400_fifo_continous_write:0000000000000000 $t
     /tmp/ccQmV08g.s:1272   .text.cc2400_fifo_continous_write:0000000000000000 cc2400_fifo_continous_write
ARM GAS  /tmp/ccQmV08g.s 			page 75


     /tmp/ccQmV08g.s:1487   .text.cc2400_fifo_continous_write:00000000000000cc $d
     /tmp/ccQmV08g.s:1495   .text.cc2400_fifo_read:0000000000000000 $t
     /tmp/ccQmV08g.s:1502   .text.cc2400_fifo_read:0000000000000000 cc2400_fifo_read
     /tmp/ccQmV08g.s:1642   .text.cc2400_fifo_read:0000000000000080 $d
     /tmp/ccQmV08g.s:1649   .text.cc2400_status:0000000000000000 $t
     /tmp/ccQmV08g.s:1656   .text.cc2400_status:0000000000000000 cc2400_status
     /tmp/ccQmV08g.s:1679   .text.cc2400_strobe:0000000000000000 $t
     /tmp/ccQmV08g.s:1686   .text.cc2400_strobe:0000000000000000 cc2400_strobe
     /tmp/ccQmV08g.s:1714   .text.cc2400_reset:0000000000000000 $t
     /tmp/ccQmV08g.s:1721   .text.cc2400_reset:0000000000000000 cc2400_reset
     /tmp/ccQmV08g.s:1787   .text.clock_start:0000000000000000 $t
     /tmp/ccQmV08g.s:1794   .text.clock_start:0000000000000000 clock_start
     /tmp/ccQmV08g.s:2062   .text.clock_start:000000000000010c $d
     /tmp/ccQmV08g.s:2080   .text.ubertooth_init:0000000000000000 $t
     /tmp/ccQmV08g.s:2087   .text.ubertooth_init:0000000000000000 ubertooth_init
     /tmp/ccQmV08g.s:2141   .text.ubertooth_init:0000000000000028 $d
                            *COM*:0000000000000020 msbs
     /tmp/ccQmV08g.s:2146   .text.reset:0000000000000000 $t
     /tmp/ccQmV08g.s:2153   .text.reset:0000000000000000 reset
     /tmp/ccQmV08g.s:2212   .text.reset:000000000000002c $d
     /tmp/ccQmV08g.s:2221   .text.cc2400_tune_rx:0000000000000000 $t
     /tmp/ccQmV08g.s:2228   .text.cc2400_tune_rx:0000000000000000 cc2400_tune_rx
     /tmp/ccQmV08g.s:2249   .text.cc2400_tune_tx:0000000000000000 $t
     /tmp/ccQmV08g.s:2256   .text.cc2400_tune_tx:0000000000000000 cc2400_tune_tx
     /tmp/ccQmV08g.s:2278   .text.cc2400_hop_rx:0000000000000000 $t
     /tmp/ccQmV08g.s:2285   .text.cc2400_hop_rx:0000000000000000 cc2400_hop_rx
     /tmp/ccQmV08g.s:2358   .text.cc2400_hop_tx:0000000000000000 $t
     /tmp/ccQmV08g.s:2365   .text.cc2400_hop_tx:0000000000000000 cc2400_hop_tx
     /tmp/ccQmV08g.s:2376   .text.get_part_num:0000000000000000 $t
     /tmp/ccQmV08g.s:2383   .text.get_part_num:0000000000000000 get_part_num
     /tmp/ccQmV08g.s:2457   .text.get_part_num:0000000000000030 $d
     /tmp/ccQmV08g.s:2462   .text.get_device_serial:0000000000000000 $t
     /tmp/ccQmV08g.s:2469   .text.get_device_serial:0000000000000000 get_device_serial
     /tmp/ccQmV08g.s:2603   .text.get_device_serial:0000000000000060 $d
     /tmp/ccQmV08g.s:2608   .text.set_isp:0000000000000000 $t
     /tmp/ccQmV08g.s:2615   .text.set_isp:0000000000000000 set_isp
     /tmp/ccQmV08g.s:2648   .text.set_isp:0000000000000018 $d
     /tmp/ccQmV08g.s:2653   .text.int_to_bit6:0000000000000000 $t
     /tmp/ccQmV08g.s:2660   .text.int_to_bit6:0000000000000000 int_to_bit6
     /tmp/ccQmV08g.s:2694   .text.bit6_to_int:0000000000000000 $t
     /tmp/ccQmV08g.s:2701   .text.bit6_to_int:0000000000000000 bit6_to_int
     /tmp/ccQmV08g.s:2731   .text.bit6_to_int:0000000000000014 $d
     /tmp/ccQmV08g.s:2770   .bss:0000000000000008 cur_reg
     /tmp/ccQmV08g.s:2755   .data:0000000000000004 msb16
     /tmp/ccQmV08g.s:2751   .data:0000000000000000 msb8
     /tmp/ccQmV08g.s:2744   .rodata:0000000000000000 iap_entry
     /tmp/ccQmV08g.s:2741   .rodata:0000000000000000 $d
     /tmp/ccQmV08g.s:2747   .data:0000000000000000 $d
     /tmp/ccQmV08g.s:2758   .bss:0000000000000000 $d
     /tmp/ccQmV08g.s:2762   .bss:0000000000000000 delay_counter
     /tmp/ccQmV08g.s:2766   .bss:0000000000000004 wait_us_counter

NO UNDEFINED SYMBOLS
