ARM GAS  /tmp/cc5dVR7o.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"usbcontrol.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.DataIn,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	DataIn:
  24              	.LFB2:
  25              		.file 1 "../common/lpcusb/target/usbcontrol.c"
   1:../common/lpcusb/target/usbcontrol.c **** /*
   2:../common/lpcusb/target/usbcontrol.c **** 	LPCUSB, an USB device driver for LPC microcontrollers	
   3:../common/lpcusb/target/usbcontrol.c **** 	Copyright (C) 2006 Bertrik Sikken (bertrik@sikken.nl)
   4:../common/lpcusb/target/usbcontrol.c **** 
   5:../common/lpcusb/target/usbcontrol.c **** 	Redistribution and use in source and binary forms, with or without
   6:../common/lpcusb/target/usbcontrol.c **** 	modification, are permitted provided that the following conditions are met:
   7:../common/lpcusb/target/usbcontrol.c **** 
   8:../common/lpcusb/target/usbcontrol.c **** 	1. Redistributions of source code must retain the above copyright
   9:../common/lpcusb/target/usbcontrol.c **** 	   notice, this list of conditions and the following disclaimer.
  10:../common/lpcusb/target/usbcontrol.c **** 	2. Redistributions in binary form must reproduce the above copyright
  11:../common/lpcusb/target/usbcontrol.c **** 	   notice, this list of conditions and the following disclaimer in the
  12:../common/lpcusb/target/usbcontrol.c **** 	   documentation and/or other materials provided with the distribution.
  13:../common/lpcusb/target/usbcontrol.c **** 	3. The name of the author may not be used to endorse or promote products
  14:../common/lpcusb/target/usbcontrol.c **** 	   derived from this software without specific prior written permission.
  15:../common/lpcusb/target/usbcontrol.c **** 
  16:../common/lpcusb/target/usbcontrol.c **** 	THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
  17:../common/lpcusb/target/usbcontrol.c **** 	IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
  18:../common/lpcusb/target/usbcontrol.c **** 	OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
  19:../common/lpcusb/target/usbcontrol.c **** 	IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, 
  20:../common/lpcusb/target/usbcontrol.c **** 	INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
  21:../common/lpcusb/target/usbcontrol.c **** 	NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  22:../common/lpcusb/target/usbcontrol.c **** 	DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  23:../common/lpcusb/target/usbcontrol.c **** 	THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  24:../common/lpcusb/target/usbcontrol.c **** 	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  25:../common/lpcusb/target/usbcontrol.c **** 	THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  26:../common/lpcusb/target/usbcontrol.c **** */
  27:../common/lpcusb/target/usbcontrol.c **** 
  28:../common/lpcusb/target/usbcontrol.c **** 
  29:../common/lpcusb/target/usbcontrol.c **** /** @file
  30:../common/lpcusb/target/usbcontrol.c **** 	Control transfer handler.
  31:../common/lpcusb/target/usbcontrol.c **** 	
  32:../common/lpcusb/target/usbcontrol.c **** 	This module handles control transfers and is normally installed on the
  33:../common/lpcusb/target/usbcontrol.c **** 	endpoint 0 callback.
ARM GAS  /tmp/cc5dVR7o.s 			page 2


  34:../common/lpcusb/target/usbcontrol.c **** 	
  35:../common/lpcusb/target/usbcontrol.c **** 	Control transfers can be of the following type:
  36:../common/lpcusb/target/usbcontrol.c **** 	0 Standard;
  37:../common/lpcusb/target/usbcontrol.c **** 	1 Class;
  38:../common/lpcusb/target/usbcontrol.c **** 	2 Vendor;
  39:../common/lpcusb/target/usbcontrol.c **** 	3 Reserved.
  40:../common/lpcusb/target/usbcontrol.c **** 
  41:../common/lpcusb/target/usbcontrol.c **** 	A callback can be installed for each of these control transfers using
  42:../common/lpcusb/target/usbcontrol.c **** 	USBRegisterRequestHandler.
  43:../common/lpcusb/target/usbcontrol.c **** 	When an OUT request arrives, data is collected in the data store provided
  44:../common/lpcusb/target/usbcontrol.c **** 	with the USBRegisterRequestHandler call. When the transfer is done, the
  45:../common/lpcusb/target/usbcontrol.c **** 	callback is called.
  46:../common/lpcusb/target/usbcontrol.c **** 	When an IN request arrives, the callback is called immediately to either
  47:../common/lpcusb/target/usbcontrol.c **** 	put the control transfer data in the data store, or to get a pointer to
  48:../common/lpcusb/target/usbcontrol.c **** 	control transfer data. The data is then packetised and sent to the host.
  49:../common/lpcusb/target/usbcontrol.c **** */
  50:../common/lpcusb/target/usbcontrol.c **** 
  51:../common/lpcusb/target/usbcontrol.c **** #include "type.h"
  52:../common/lpcusb/target/usbcontrol.c **** #include "debug.h"
  53:../common/lpcusb/target/usbcontrol.c **** 
  54:../common/lpcusb/target/usbcontrol.c **** #include "usbstruct.h"
  55:../common/lpcusb/target/usbcontrol.c **** #include "usbapi.h"
  56:../common/lpcusb/target/usbcontrol.c **** 
  57:../common/lpcusb/target/usbcontrol.c **** 
  58:../common/lpcusb/target/usbcontrol.c **** 
  59:../common/lpcusb/target/usbcontrol.c **** #define	MAX_CONTROL_SIZE	128	/**< maximum total size of control transfer data */
  60:../common/lpcusb/target/usbcontrol.c **** #define	MAX_REQ_HANDLERS	4	/**< standard, class, vendor, reserved */
  61:../common/lpcusb/target/usbcontrol.c **** 
  62:../common/lpcusb/target/usbcontrol.c **** static TSetupPacket		Setup;	/**< setup packet */
  63:../common/lpcusb/target/usbcontrol.c **** 
  64:../common/lpcusb/target/usbcontrol.c **** static U8				*pbData;	/**< pointer to data buffer */
  65:../common/lpcusb/target/usbcontrol.c **** static int				iResidue;	/**< remaining bytes in buffer */
  66:../common/lpcusb/target/usbcontrol.c **** static int				iLen;		/**< total length of control transfer */
  67:../common/lpcusb/target/usbcontrol.c **** 
  68:../common/lpcusb/target/usbcontrol.c **** /** Array of installed request handler callbacks */
  69:../common/lpcusb/target/usbcontrol.c **** static TFnHandleRequest *apfnReqHandlers[4] = {NULL, NULL, NULL, NULL};
  70:../common/lpcusb/target/usbcontrol.c **** /** Array of installed request data pointers */
  71:../common/lpcusb/target/usbcontrol.c **** static U8				*apbDataStore[4] = {NULL, NULL, NULL, NULL};
  72:../common/lpcusb/target/usbcontrol.c **** 
  73:../common/lpcusb/target/usbcontrol.c **** 
  74:../common/lpcusb/target/usbcontrol.c **** /** Internal function filtering Vendor requests to handle OS Descriptors */
  75:../common/lpcusb/target/usbcontrol.c **** BOOL USBFilterOsVendorMessage(TSetupPacket *pSetup, BOOL *pfSuccess, int *piLen, U8 **ppbData);
  76:../common/lpcusb/target/usbcontrol.c **** 
  77:../common/lpcusb/target/usbcontrol.c **** 
  78:../common/lpcusb/target/usbcontrol.c **** 
  79:../common/lpcusb/target/usbcontrol.c **** /**
  80:../common/lpcusb/target/usbcontrol.c **** 	Local function to handle a request by calling one of the installed
  81:../common/lpcusb/target/usbcontrol.c **** 	request handlers.
  82:../common/lpcusb/target/usbcontrol.c **** 		
  83:../common/lpcusb/target/usbcontrol.c **** 	In case of data going from host to device, the data is at *ppbData.
  84:../common/lpcusb/target/usbcontrol.c **** 	In case of data going from device to host, the handler can either
  85:../common/lpcusb/target/usbcontrol.c **** 	choose to write its data at *ppbData or update the data pointer.
  86:../common/lpcusb/target/usbcontrol.c **** 		
  87:../common/lpcusb/target/usbcontrol.c **** 	@param [in]		pSetup		The setup packet
  88:../common/lpcusb/target/usbcontrol.c **** 	@param [in,out]	*piLen		Pointer to data length
  89:../common/lpcusb/target/usbcontrol.c **** 	@param [in,out]	ppbData		Data buffer.
  90:../common/lpcusb/target/usbcontrol.c **** 
ARM GAS  /tmp/cc5dVR7o.s 			page 3


  91:../common/lpcusb/target/usbcontrol.c **** 	@return TRUE if the request was handles successfully
  92:../common/lpcusb/target/usbcontrol.c ****  */
  93:../common/lpcusb/target/usbcontrol.c **** static BOOL _HandleRequest(TSetupPacket *pSetup, int *piLen, U8 **ppbData)
  94:../common/lpcusb/target/usbcontrol.c **** {
  95:../common/lpcusb/target/usbcontrol.c **** 	TFnHandleRequest *pfnHandler;
  96:../common/lpcusb/target/usbcontrol.c **** 	int iType;
  97:../common/lpcusb/target/usbcontrol.c **** 	
  98:../common/lpcusb/target/usbcontrol.c **** 	iType = REQTYPE_GET_TYPE(pSetup->bmRequestType);
  99:../common/lpcusb/target/usbcontrol.c **** 	
 100:../common/lpcusb/target/usbcontrol.c **** 	if(iType == REQTYPE_TYPE_VENDOR) {
 101:../common/lpcusb/target/usbcontrol.c **** 		BOOL fFilterStatus = FALSE;
 102:../common/lpcusb/target/usbcontrol.c **** 		if(USBFilterOsVendorMessage(pSetup, &fFilterStatus, piLen, ppbData)) {
 103:../common/lpcusb/target/usbcontrol.c **** 			return fFilterStatus;
 104:../common/lpcusb/target/usbcontrol.c **** 		}
 105:../common/lpcusb/target/usbcontrol.c **** 	}
 106:../common/lpcusb/target/usbcontrol.c **** 	
 107:../common/lpcusb/target/usbcontrol.c **** 	pfnHandler = apfnReqHandlers[iType];
 108:../common/lpcusb/target/usbcontrol.c **** 	if (pfnHandler == NULL) {
 109:../common/lpcusb/target/usbcontrol.c **** 		DBG("No handler for reqtype %d\n", iType);
 110:../common/lpcusb/target/usbcontrol.c **** 		return FALSE;
 111:../common/lpcusb/target/usbcontrol.c **** 	}
 112:../common/lpcusb/target/usbcontrol.c **** 
 113:../common/lpcusb/target/usbcontrol.c **** 	return pfnHandler(pSetup, piLen, ppbData);
 114:../common/lpcusb/target/usbcontrol.c **** }
 115:../common/lpcusb/target/usbcontrol.c **** 
 116:../common/lpcusb/target/usbcontrol.c **** 
 117:../common/lpcusb/target/usbcontrol.c **** /**
 118:../common/lpcusb/target/usbcontrol.c **** 	Local function to stall the control endpoint
 119:../common/lpcusb/target/usbcontrol.c **** 	
 120:../common/lpcusb/target/usbcontrol.c **** 	@param [in]	bEPStat	Endpoint status
 121:../common/lpcusb/target/usbcontrol.c ****  */
 122:../common/lpcusb/target/usbcontrol.c **** static void StallControlPipe(U8 bEPStat)
 123:../common/lpcusb/target/usbcontrol.c **** {
 124:../common/lpcusb/target/usbcontrol.c **** 	U8	*pb;
 125:../common/lpcusb/target/usbcontrol.c **** 	int	i;
 126:../common/lpcusb/target/usbcontrol.c **** 
 127:../common/lpcusb/target/usbcontrol.c **** 	USBHwEPStall(0x80, TRUE);
 128:../common/lpcusb/target/usbcontrol.c **** 
 129:../common/lpcusb/target/usbcontrol.c **** // dump setup packet
 130:../common/lpcusb/target/usbcontrol.c **** 	DBG("STALL on [");
 131:../common/lpcusb/target/usbcontrol.c **** 	pb = (U8 *)&Setup;
 132:../common/lpcusb/target/usbcontrol.c **** 	for (i = 0; i < 8; i++) {
 133:../common/lpcusb/target/usbcontrol.c **** 		DBG(" %02x", *pb++);
 134:../common/lpcusb/target/usbcontrol.c **** 	}
 135:../common/lpcusb/target/usbcontrol.c **** 	DBG("] stat=%x\n", bEPStat);
 136:../common/lpcusb/target/usbcontrol.c **** }
 137:../common/lpcusb/target/usbcontrol.c **** 
 138:../common/lpcusb/target/usbcontrol.c **** 
 139:../common/lpcusb/target/usbcontrol.c **** /**
 140:../common/lpcusb/target/usbcontrol.c **** 	Sends next chunk of data (possibly 0 bytes) to host
 141:../common/lpcusb/target/usbcontrol.c ****  */
 142:../common/lpcusb/target/usbcontrol.c **** static void DataIn(void)
 143:../common/lpcusb/target/usbcontrol.c **** {
  26              		.loc 1 143 1 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/cc5dVR7o.s 			page 4


  30 0000 38B5     		push	{r3, r4, r5, lr}
  31              		.cfi_def_cfa_offset 16
  32              		.cfi_offset 3, -16
  33              		.cfi_offset 4, -12
  34              		.cfi_offset 5, -8
  35              		.cfi_offset 14, -4
 144:../common/lpcusb/target/usbcontrol.c **** 	int iChunk;
  36              		.loc 1 144 2 view .LVU1
 145:../common/lpcusb/target/usbcontrol.c **** 
 146:../common/lpcusb/target/usbcontrol.c **** 	iChunk = MIN(MAX_PACKET_SIZE0, iResidue);
  37              		.loc 1 146 2 view .LVU2
  38              		.loc 1 146 11 is_stmt 0 view .LVU3
  39 0002 084C     		ldr	r4, .L2
 147:../common/lpcusb/target/usbcontrol.c **** 	USBHwEPWrite(0x80, pbData, iChunk);
  40              		.loc 1 147 2 view .LVU4
  41 0004 8020     		movs	r0, #128
 146:../common/lpcusb/target/usbcontrol.c **** 	USBHwEPWrite(0x80, pbData, iChunk);
  42              		.loc 1 146 9 view .LVU5
  43 0006 2568     		ldr	r5, [r4]
  44              		.loc 1 147 2 view .LVU6
  45 0008 6168     		ldr	r1, [r4, #4]
 146:../common/lpcusb/target/usbcontrol.c **** 	USBHwEPWrite(0x80, pbData, iChunk);
  46              		.loc 1 146 9 view .LVU7
  47 000a 402D     		cmp	r5, #64
  48 000c A8BF     		it	ge
  49 000e 4025     		movge	r5, #64
  50              	.LVL0:
  51              		.loc 1 147 2 is_stmt 1 view .LVU8
  52 0010 2A46     		mov	r2, r5
  53 0012 FFF7FEFF 		bl	USBHwEPWrite
  54              	.LVL1:
 148:../common/lpcusb/target/usbcontrol.c **** 	pbData += iChunk;
  55              		.loc 1 148 2 view .LVU9
  56              		.loc 1 148 9 is_stmt 0 view .LVU10
  57 0016 6368     		ldr	r3, [r4, #4]
 149:../common/lpcusb/target/usbcontrol.c **** 	iResidue -= iChunk;
  58              		.loc 1 149 11 view .LVU11
  59 0018 2268     		ldr	r2, [r4]
 148:../common/lpcusb/target/usbcontrol.c **** 	pbData += iChunk;
  60              		.loc 1 148 9 view .LVU12
  61 001a 2B44     		add	r3, r3, r5
  62              		.loc 1 149 11 view .LVU13
  63 001c 521B     		subs	r2, r2, r5
 148:../common/lpcusb/target/usbcontrol.c **** 	pbData += iChunk;
  64              		.loc 1 148 9 view .LVU14
  65 001e 6360     		str	r3, [r4, #4]
  66              		.loc 1 149 2 is_stmt 1 view .LVU15
  67              		.loc 1 149 11 is_stmt 0 view .LVU16
  68 0020 2260     		str	r2, [r4]
 150:../common/lpcusb/target/usbcontrol.c **** }
  69              		.loc 1 150 1 view .LVU17
  70 0022 38BD     		pop	{r3, r4, r5, pc}
  71              	.LVL2:
  72              	.L3:
  73              		.loc 1 150 1 view .LVU18
  74              		.align	2
  75              	.L2:
ARM GAS  /tmp/cc5dVR7o.s 			page 5


  76 0024 00000000 		.word	.LANCHOR0
  77              		.cfi_endproc
  78              	.LFE2:
  80              		.section	.text._HandleRequest.constprop.0,"ax",%progbits
  81              		.align	1
  82              		.syntax unified
  83              		.thumb
  84              		.thumb_func
  85              		.fpu softvfp
  87              	_HandleRequest.constprop.0:
  88              	.LFB6:
  93:../common/lpcusb/target/usbcontrol.c **** {
  89              		.loc 1 93 13 is_stmt 1 view -0
  90              		.cfi_startproc
  91              		@ args = 0, pretend = 0, frame = 8
  92              		@ frame_needed = 0, uses_anonymous_args = 0
  93 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
  94              		.cfi_def_cfa_offset 24
  95              		.cfi_offset 4, -12
  96              		.cfi_offset 5, -8
  97              		.cfi_offset 14, -4
  98              	.LVL3:
  95:../common/lpcusb/target/usbcontrol.c **** 	int iType;
  99              		.loc 1 95 2 view .LVU20
  96:../common/lpcusb/target/usbcontrol.c **** 	
 100              		.loc 1 96 2 view .LVU21
  98:../common/lpcusb/target/usbcontrol.c **** 	
 101              		.loc 1 98 2 view .LVU22
  98:../common/lpcusb/target/usbcontrol.c **** 	
 102              		.loc 1 98 10 is_stmt 0 view .LVU23
 103 0002 1048     		ldr	r0, .L12
 104 0004 047A     		ldrb	r4, [r0, #8]	@ zero_extendqisi2
 105 0006 0546     		mov	r5, r0
 106 0008 C4F34114 		ubfx	r4, r4, #5, #2
 107              	.LVL4:
 100:../common/lpcusb/target/usbcontrol.c **** 		BOOL fFilterStatus = FALSE;
 108              		.loc 1 100 2 is_stmt 1 view .LVU24
 100:../common/lpcusb/target/usbcontrol.c **** 		BOOL fFilterStatus = FALSE;
 109              		.loc 1 100 4 is_stmt 0 view .LVU25
 110 000c 022C     		cmp	r4, #2
 111 000e 0CD1     		bne	.L5
 112              	.LBB3:
 101:../common/lpcusb/target/usbcontrol.c **** 		if(USBFilterOsVendorMessage(pSetup, &fFilterStatus, piLen, ppbData)) {
 113              		.loc 1 101 3 is_stmt 1 view .LVU26
 101:../common/lpcusb/target/usbcontrol.c **** 		if(USBFilterOsVendorMessage(pSetup, &fFilterStatus, piLen, ppbData)) {
 114              		.loc 1 101 8 is_stmt 0 view .LVU27
 115 0010 0023     		movs	r3, #0
 102:../common/lpcusb/target/usbcontrol.c **** 			return fFilterStatus;
 116              		.loc 1 102 6 view .LVU28
 117 0012 00F11002 		add	r2, r0, #16
 101:../common/lpcusb/target/usbcontrol.c **** 		if(USBFilterOsVendorMessage(pSetup, &fFilterStatus, piLen, ppbData)) {
 118              		.loc 1 101 8 view .LVU29
 119 0016 0193     		str	r3, [sp, #4]
 102:../common/lpcusb/target/usbcontrol.c **** 			return fFilterStatus;
 120              		.loc 1 102 3 is_stmt 1 view .LVU30
 102:../common/lpcusb/target/usbcontrol.c **** 			return fFilterStatus;
 121              		.loc 1 102 6 is_stmt 0 view .LVU31
ARM GAS  /tmp/cc5dVR7o.s 			page 6


 122 0018 01A9     		add	r1, sp, #4
 123 001a 031D     		adds	r3, r0, #4
 124 001c 0830     		adds	r0, r0, #8
 125 001e FFF7FEFF 		bl	USBFilterOsVendorMessage
 126              	.LVL5:
 102:../common/lpcusb/target/usbcontrol.c **** 			return fFilterStatus;
 127              		.loc 1 102 5 view .LVU32
 128 0022 10B1     		cbz	r0, .L5
 103:../common/lpcusb/target/usbcontrol.c **** 		}
 129              		.loc 1 103 4 is_stmt 1 view .LVU33
 103:../common/lpcusb/target/usbcontrol.c **** 		}
 130              		.loc 1 103 11 is_stmt 0 view .LVU34
 131 0024 0198     		ldr	r0, [sp, #4]
 132              	.LVL6:
 133              	.L4:
 103:../common/lpcusb/target/usbcontrol.c **** 		}
 134              		.loc 1 103 11 view .LVU35
 135              	.LBE3:
 114:../common/lpcusb/target/usbcontrol.c **** 
 136              		.loc 1 114 1 view .LVU36
 137 0026 03B0     		add	sp, sp, #12
 138              		.cfi_remember_state
 139              		.cfi_def_cfa_offset 12
 140              		@ sp needed
 141 0028 30BD     		pop	{r4, r5, pc}
 142              	.LVL7:
 143              	.L5:
 144              		.cfi_restore_state
 107:../common/lpcusb/target/usbcontrol.c **** 	if (pfnHandler == NULL) {
 145              		.loc 1 107 2 is_stmt 1 view .LVU37
 107:../common/lpcusb/target/usbcontrol.c **** 	if (pfnHandler == NULL) {
 146              		.loc 1 107 13 is_stmt 0 view .LVU38
 147 002a 05EB8404 		add	r4, r5, r4, lsl #2
 148              	.LVL8:
 107:../common/lpcusb/target/usbcontrol.c **** 	if (pfnHandler == NULL) {
 149              		.loc 1 107 13 view .LVU39
 150 002e 6369     		ldr	r3, [r4, #20]
 151              	.LVL9:
 108:../common/lpcusb/target/usbcontrol.c **** 		DBG("No handler for reqtype %d\n", iType);
 152              		.loc 1 108 2 is_stmt 1 view .LVU40
 108:../common/lpcusb/target/usbcontrol.c **** 		DBG("No handler for reqtype %d\n", iType);
 153              		.loc 1 108 5 is_stmt 0 view .LVU41
 154 0030 2BB1     		cbz	r3, .L8
 113:../common/lpcusb/target/usbcontrol.c **** }
 155              		.loc 1 113 2 is_stmt 1 view .LVU42
 113:../common/lpcusb/target/usbcontrol.c **** }
 156              		.loc 1 113 9 is_stmt 0 view .LVU43
 157 0032 054A     		ldr	r2, .L12+4
 158 0034 02F10C01 		add	r1, r2, #12
 159 0038 101D     		adds	r0, r2, #4
 160 003a 9847     		blx	r3
 161              	.LVL10:
 113:../common/lpcusb/target/usbcontrol.c **** }
 162              		.loc 1 113 9 view .LVU44
 163 003c F3E7     		b	.L4
 164              	.LVL11:
 165              	.L8:
ARM GAS  /tmp/cc5dVR7o.s 			page 7


 110:../common/lpcusb/target/usbcontrol.c **** 	}
 166              		.loc 1 110 10 view .LVU45
 167 003e 1846     		mov	r0, r3
 168 0040 F1E7     		b	.L4
 169              	.L13:
 170 0042 00BF     		.align	2
 171              	.L12:
 172 0044 00000000 		.word	.LANCHOR0
 173 0048 04000000 		.word	.LANCHOR0+4
 174              		.cfi_endproc
 175              	.LFE6:
 177              		.section	.text.USBHandleControlTransfer,"ax",%progbits
 178              		.align	1
 179              		.global	USBHandleControlTransfer
 180              		.syntax unified
 181              		.thumb
 182              		.thumb_func
 183              		.fpu softvfp
 185              	USBHandleControlTransfer:
 186              	.LVL12:
 187              	.LFB3:
 151:../common/lpcusb/target/usbcontrol.c **** 
 152:../common/lpcusb/target/usbcontrol.c **** 
 153:../common/lpcusb/target/usbcontrol.c **** /**
 154:../common/lpcusb/target/usbcontrol.c ****  *	Handles IN/OUT transfers on EP0
 155:../common/lpcusb/target/usbcontrol.c ****  *
 156:../common/lpcusb/target/usbcontrol.c ****  *	@param [in]	bEP		Endpoint address
 157:../common/lpcusb/target/usbcontrol.c ****  *	@param [in]	bEPStat	Endpoint status
 158:../common/lpcusb/target/usbcontrol.c ****  */
 159:../common/lpcusb/target/usbcontrol.c **** void USBHandleControlTransfer(U8 bEP, U8 bEPStat)
 160:../common/lpcusb/target/usbcontrol.c **** {
 188              		.loc 1 160 1 is_stmt 1 view -0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192              		.loc 1 160 1 is_stmt 0 view .LVU47
 193 0000 10B5     		push	{r4, lr}
 194              		.cfi_def_cfa_offset 8
 195              		.cfi_offset 4, -8
 196              		.cfi_offset 14, -4
 161:../common/lpcusb/target/usbcontrol.c **** 	int iChunk, iType;
 197              		.loc 1 161 2 is_stmt 1 view .LVU48
 162:../common/lpcusb/target/usbcontrol.c **** 
 163:../common/lpcusb/target/usbcontrol.c **** 	if (bEP == 0x00) {
 198              		.loc 1 163 2 view .LVU49
 199              		.loc 1 163 5 is_stmt 0 view .LVU50
 200 0002 0028     		cmp	r0, #0
 201 0004 47D1     		bne	.L15
 164:../common/lpcusb/target/usbcontrol.c **** 		// OUT transfer
 165:../common/lpcusb/target/usbcontrol.c **** 		if (bEPStat & EP_STATUS_SETUP) {
 202              		.loc 1 165 3 is_stmt 1 view .LVU51
 203              		.loc 1 165 6 is_stmt 0 view .LVU52
 204 0006 11F00401 		ands	r1, r1, #4
 205              	.LVL13:
 206              		.loc 1 165 6 view .LVU53
 207 000a 244C     		ldr	r4, .L33
 208 000c 23D0     		beq	.L16
ARM GAS  /tmp/cc5dVR7o.s 			page 8


 166:../common/lpcusb/target/usbcontrol.c **** 			// setup packet, reset request message state machine
 167:../common/lpcusb/target/usbcontrol.c **** 			USBHwEPRead(0x00, (U8 *)&Setup, sizeof(Setup));
 209              		.loc 1 167 4 is_stmt 1 view .LVU54
 210 000e 0822     		movs	r2, #8
 211 0010 A118     		adds	r1, r4, r2
 212 0012 FFF7FEFF 		bl	USBHwEPRead
 213              	.LVL14:
 168:../common/lpcusb/target/usbcontrol.c **** 			DBG("S%x", Setup.bRequest);
 214              		.loc 1 168 30 view .LVU55
 169:../common/lpcusb/target/usbcontrol.c **** 
 170:../common/lpcusb/target/usbcontrol.c **** 			// defaults for data pointer and residue
 171:../common/lpcusb/target/usbcontrol.c **** 			iType = REQTYPE_GET_TYPE(Setup.bmRequestType);
 215              		.loc 1 171 4 view .LVU56
 216              		.loc 1 171 12 is_stmt 0 view .LVU57
 217 0016 227A     		ldrb	r2, [r4, #8]	@ zero_extendqisi2
 218              	.LVL15:
 172:../common/lpcusb/target/usbcontrol.c **** 			pbData = apbDataStore[iType];
 219              		.loc 1 172 4 is_stmt 1 view .LVU58
 171:../common/lpcusb/target/usbcontrol.c **** 			pbData = apbDataStore[iType];
 220              		.loc 1 171 10 is_stmt 0 view .LVU59
 221 0018 C2F34113 		ubfx	r3, r2, #5, #2
 222              		.loc 1 172 25 view .LVU60
 223 001c 04EB8303 		add	r3, r4, r3, lsl #2
 224              		.loc 1 172 11 view .LVU61
 225 0020 5B6A     		ldr	r3, [r3, #36]
 226 0022 6360     		str	r3, [r4, #4]
 173:../common/lpcusb/target/usbcontrol.c **** 			iResidue = Setup.wLength;
 227              		.loc 1 173 4 is_stmt 1 view .LVU62
 228              		.loc 1 173 20 is_stmt 0 view .LVU63
 229 0024 E389     		ldrh	r3, [r4, #14]
 230              		.loc 1 173 13 view .LVU64
 231 0026 2360     		str	r3, [r4]
 174:../common/lpcusb/target/usbcontrol.c **** 			iLen = Setup.wLength;
 232              		.loc 1 174 4 is_stmt 1 view .LVU65
 233              		.loc 1 174 9 is_stmt 0 view .LVU66
 234 0028 2361     		str	r3, [r4, #16]
 175:../common/lpcusb/target/usbcontrol.c **** 
 176:../common/lpcusb/target/usbcontrol.c **** 			if ((Setup.wLength == 0) ||
 235              		.loc 1 176 4 is_stmt 1 view .LVU67
 236              		.loc 1 176 7 is_stmt 0 view .LVU68
 237 002a 0BB1     		cbz	r3, .L17
 238              		.loc 1 176 29 discriminator 1 view .LVU69
 239 002c D309     		lsrs	r3, r2, #7
 240 002e 34D0     		beq	.L14
 241              	.L17:
 177:../common/lpcusb/target/usbcontrol.c **** 				(REQTYPE_GET_DIR(Setup.bmRequestType) == REQTYPE_DIR_TO_HOST)) {
 178:../common/lpcusb/target/usbcontrol.c **** 				// ask installed handler to process request
 179:../common/lpcusb/target/usbcontrol.c **** 				if (!_HandleRequest(&Setup, &iLen, &pbData)) {
 242              		.loc 1 179 5 is_stmt 1 view .LVU70
 243              		.loc 1 179 10 is_stmt 0 view .LVU71
 244 0030 FFF7FEFF 		bl	_HandleRequest.constprop.0
 245              	.LVL16:
 246              		.loc 1 179 8 view .LVU72
 247 0034 28B9     		cbnz	r0, .L19
 248              	.L21:
 180:../common/lpcusb/target/usbcontrol.c **** 					DBG("_HandleRequest1 failed\n");
 249              		.loc 1 180 37 is_stmt 1 view .LVU73
ARM GAS  /tmp/cc5dVR7o.s 			page 9


 181:../common/lpcusb/target/usbcontrol.c **** 					StallControlPipe(bEPStat);
 250              		.loc 1 181 6 view .LVU74
 251              	.LBB10:
 252              	.LBI10:
 122:../common/lpcusb/target/usbcontrol.c **** {
 253              		.loc 1 122 13 view .LVU75
 254              	.LVL17:
 255              	.LBB11:
 124:../common/lpcusb/target/usbcontrol.c **** 	int	i;
 256              		.loc 1 124 2 view .LVU76
 125:../common/lpcusb/target/usbcontrol.c **** 
 257              		.loc 1 125 2 view .LVU77
 127:../common/lpcusb/target/usbcontrol.c **** 
 258              		.loc 1 127 2 view .LVU78
 259              	.LBE11:
 260              	.LBE10:
 182:../common/lpcusb/target/usbcontrol.c **** 					return;
 183:../common/lpcusb/target/usbcontrol.c **** 				}
 184:../common/lpcusb/target/usbcontrol.c **** 				// send smallest of requested and offered length
 185:../common/lpcusb/target/usbcontrol.c **** 				iResidue = MIN(iLen, Setup.wLength);
 186:../common/lpcusb/target/usbcontrol.c **** 				// send first part (possibly a zero-length status message)
 187:../common/lpcusb/target/usbcontrol.c **** 				DataIn();
 188:../common/lpcusb/target/usbcontrol.c **** 			}
 189:../common/lpcusb/target/usbcontrol.c **** 		}
 190:../common/lpcusb/target/usbcontrol.c **** 		else {		
 191:../common/lpcusb/target/usbcontrol.c **** 			if (iResidue > 0) {
 192:../common/lpcusb/target/usbcontrol.c **** 				// store data
 193:../common/lpcusb/target/usbcontrol.c **** 				iChunk = USBHwEPRead(0x00, pbData, iResidue);
 194:../common/lpcusb/target/usbcontrol.c **** 				if (iChunk < 0) {
 195:../common/lpcusb/target/usbcontrol.c **** 					StallControlPipe(bEPStat);
 196:../common/lpcusb/target/usbcontrol.c **** 					return;
 197:../common/lpcusb/target/usbcontrol.c **** 				}
 198:../common/lpcusb/target/usbcontrol.c **** 				pbData += iChunk;
 199:../common/lpcusb/target/usbcontrol.c **** 				iResidue -= iChunk;
 200:../common/lpcusb/target/usbcontrol.c **** 				if (iResidue == 0) {
 201:../common/lpcusb/target/usbcontrol.c **** 					// received all, send data to handler
 202:../common/lpcusb/target/usbcontrol.c **** 					iType = REQTYPE_GET_TYPE(Setup.bmRequestType);
 203:../common/lpcusb/target/usbcontrol.c **** 					pbData = apbDataStore[iType];
 204:../common/lpcusb/target/usbcontrol.c **** 					if (!_HandleRequest(&Setup, &iLen, &pbData)) {
 205:../common/lpcusb/target/usbcontrol.c **** 						DBG("_HandleRequest2 failed\n");
 206:../common/lpcusb/target/usbcontrol.c **** 						StallControlPipe(bEPStat);
 207:../common/lpcusb/target/usbcontrol.c **** 						return;
 208:../common/lpcusb/target/usbcontrol.c **** 					}
 209:../common/lpcusb/target/usbcontrol.c **** 					// send status to host
 210:../common/lpcusb/target/usbcontrol.c **** 					DataIn();
 211:../common/lpcusb/target/usbcontrol.c **** 				}
 212:../common/lpcusb/target/usbcontrol.c **** 			}
 213:../common/lpcusb/target/usbcontrol.c **** 			else {
 214:../common/lpcusb/target/usbcontrol.c **** 				// absorb zero-length status message
 215:../common/lpcusb/target/usbcontrol.c **** 				iChunk = USBHwEPRead(0x00, NULL, 0);
 216:../common/lpcusb/target/usbcontrol.c **** 				DBG(iChunk > 0 ? "?" : "");
 217:../common/lpcusb/target/usbcontrol.c **** 			}
 218:../common/lpcusb/target/usbcontrol.c **** 		}
 219:../common/lpcusb/target/usbcontrol.c **** 	}
 220:../common/lpcusb/target/usbcontrol.c **** 	else if (bEP == 0x80) {
 221:../common/lpcusb/target/usbcontrol.c **** 		// IN transfer
 222:../common/lpcusb/target/usbcontrol.c **** 		// send more data if available (possibly a 0-length packet)
ARM GAS  /tmp/cc5dVR7o.s 			page 10


 223:../common/lpcusb/target/usbcontrol.c **** 		DataIn();
 224:../common/lpcusb/target/usbcontrol.c **** 	}
 225:../common/lpcusb/target/usbcontrol.c **** 	else {
 226:../common/lpcusb/target/usbcontrol.c **** 		ASSERT(FALSE);
 227:../common/lpcusb/target/usbcontrol.c **** 	}
 228:../common/lpcusb/target/usbcontrol.c **** }
 261              		.loc 1 228 1 is_stmt 0 view .LVU79
 262 0036 BDE81040 		pop	{r4, lr}
 263              		.cfi_remember_state
 264              		.cfi_restore 14
 265              		.cfi_restore 4
 266              		.cfi_def_cfa_offset 0
 267              	.LBB13:
 268              	.LBB12:
 127:../common/lpcusb/target/usbcontrol.c **** 
 269              		.loc 1 127 2 view .LVU80
 270 003a 0121     		movs	r1, #1
 271 003c 8020     		movs	r0, #128
 272 003e FFF7FEBF 		b	USBHwEPStall
 273              	.LVL18:
 274              	.L19:
 275              		.cfi_restore_state
 127:../common/lpcusb/target/usbcontrol.c **** 
 276              		.loc 1 127 2 view .LVU81
 277              	.LBE12:
 278              	.LBE13:
 185:../common/lpcusb/target/usbcontrol.c **** 				// send first part (possibly a zero-length status message)
 279              		.loc 1 185 5 is_stmt 1 view .LVU82
 185:../common/lpcusb/target/usbcontrol.c **** 				// send first part (possibly a zero-length status message)
 280              		.loc 1 185 16 is_stmt 0 view .LVU83
 281 0042 E289     		ldrh	r2, [r4, #14]
 282 0044 2369     		ldr	r3, [r4, #16]
 185:../common/lpcusb/target/usbcontrol.c **** 				// send first part (possibly a zero-length status message)
 283              		.loc 1 185 14 view .LVU84
 284 0046 9A42     		cmp	r2, r3
 285 0048 D4BF     		ite	le
 286 004a 2260     		strle	r2, [r4]
 287 004c 2360     		strgt	r3, [r4]
 187:../common/lpcusb/target/usbcontrol.c **** 			}
 288              		.loc 1 187 5 is_stmt 1 view .LVU85
 289              	.L23:
 210:../common/lpcusb/target/usbcontrol.c **** 				}
 290              		.loc 1 210 6 view .LVU86
 291              		.loc 1 228 1 is_stmt 0 view .LVU87
 292 004e BDE81040 		pop	{r4, lr}
 293              		.cfi_remember_state
 294              		.cfi_restore 14
 295              		.cfi_restore 4
 296              		.cfi_def_cfa_offset 0
 210:../common/lpcusb/target/usbcontrol.c **** 				}
 297              		.loc 1 210 6 view .LVU88
 298 0052 FFF7FEBF 		b	DataIn
 299              	.LVL19:
 300              	.L16:
 301              		.cfi_restore_state
 191:../common/lpcusb/target/usbcontrol.c **** 				// store data
 302              		.loc 1 191 4 is_stmt 1 view .LVU89
ARM GAS  /tmp/cc5dVR7o.s 			page 11


 191:../common/lpcusb/target/usbcontrol.c **** 				// store data
 303              		.loc 1 191 17 is_stmt 0 view .LVU90
 304 0056 2268     		ldr	r2, [r4]
 191:../common/lpcusb/target/usbcontrol.c **** 				// store data
 305              		.loc 1 191 7 view .LVU91
 306 0058 002A     		cmp	r2, #0
 307 005a 17DD     		ble	.L20
 193:../common/lpcusb/target/usbcontrol.c **** 				if (iChunk < 0) {
 308              		.loc 1 193 5 is_stmt 1 view .LVU92
 193:../common/lpcusb/target/usbcontrol.c **** 				if (iChunk < 0) {
 309              		.loc 1 193 14 is_stmt 0 view .LVU93
 310 005c 6168     		ldr	r1, [r4, #4]
 311 005e FFF7FEFF 		bl	USBHwEPRead
 312              	.LVL20:
 194:../common/lpcusb/target/usbcontrol.c **** 					StallControlPipe(bEPStat);
 313              		.loc 1 194 5 is_stmt 1 view .LVU94
 194:../common/lpcusb/target/usbcontrol.c **** 					StallControlPipe(bEPStat);
 314              		.loc 1 194 8 is_stmt 0 view .LVU95
 315 0062 0028     		cmp	r0, #0
 194:../common/lpcusb/target/usbcontrol.c **** 					StallControlPipe(bEPStat);
 316              		.loc 1 194 8 view .LVU96
 317 0064 E7DB     		blt	.L21
 198:../common/lpcusb/target/usbcontrol.c **** 				iResidue -= iChunk;
 318              		.loc 1 198 5 is_stmt 1 view .LVU97
 198:../common/lpcusb/target/usbcontrol.c **** 				iResidue -= iChunk;
 319              		.loc 1 198 12 is_stmt 0 view .LVU98
 320 0066 6368     		ldr	r3, [r4, #4]
 321 0068 0344     		add	r3, r3, r0
 322 006a 6360     		str	r3, [r4, #4]
 199:../common/lpcusb/target/usbcontrol.c **** 				if (iResidue == 0) {
 323              		.loc 1 199 5 is_stmt 1 view .LVU99
 199:../common/lpcusb/target/usbcontrol.c **** 				if (iResidue == 0) {
 324              		.loc 1 199 14 is_stmt 0 view .LVU100
 325 006c 2368     		ldr	r3, [r4]
 326 006e 181A     		subs	r0, r3, r0
 327              	.LVL21:
 199:../common/lpcusb/target/usbcontrol.c **** 				if (iResidue == 0) {
 328              		.loc 1 199 14 view .LVU101
 329 0070 2060     		str	r0, [r4]
 200:../common/lpcusb/target/usbcontrol.c **** 					// received all, send data to handler
 330              		.loc 1 200 5 is_stmt 1 view .LVU102
 200:../common/lpcusb/target/usbcontrol.c **** 					// received all, send data to handler
 331              		.loc 1 200 8 is_stmt 0 view .LVU103
 332 0072 90B9     		cbnz	r0, .L14
 202:../common/lpcusb/target/usbcontrol.c **** 					pbData = apbDataStore[iType];
 333              		.loc 1 202 6 is_stmt 1 view .LVU104
 334              	.LVL22:
 203:../common/lpcusb/target/usbcontrol.c **** 					if (!_HandleRequest(&Setup, &iLen, &pbData)) {
 335              		.loc 1 203 6 view .LVU105
 202:../common/lpcusb/target/usbcontrol.c **** 					pbData = apbDataStore[iType];
 336              		.loc 1 202 14 is_stmt 0 view .LVU106
 337 0074 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
 202:../common/lpcusb/target/usbcontrol.c **** 					pbData = apbDataStore[iType];
 338              		.loc 1 202 12 view .LVU107
 339 0076 C3F34113 		ubfx	r3, r3, #5, #2
 203:../common/lpcusb/target/usbcontrol.c **** 					if (!_HandleRequest(&Setup, &iLen, &pbData)) {
 340              		.loc 1 203 27 view .LVU108
ARM GAS  /tmp/cc5dVR7o.s 			page 12


 341 007a 04EB8303 		add	r3, r4, r3, lsl #2
 203:../common/lpcusb/target/usbcontrol.c **** 					if (!_HandleRequest(&Setup, &iLen, &pbData)) {
 342              		.loc 1 203 13 view .LVU109
 343 007e 5B6A     		ldr	r3, [r3, #36]
 344 0080 6360     		str	r3, [r4, #4]
 204:../common/lpcusb/target/usbcontrol.c **** 						DBG("_HandleRequest2 failed\n");
 345              		.loc 1 204 6 is_stmt 1 view .LVU110
 204:../common/lpcusb/target/usbcontrol.c **** 						DBG("_HandleRequest2 failed\n");
 346              		.loc 1 204 11 is_stmt 0 view .LVU111
 347 0082 FFF7FEFF 		bl	_HandleRequest.constprop.0
 348              	.LVL23:
 204:../common/lpcusb/target/usbcontrol.c **** 						DBG("_HandleRequest2 failed\n");
 349              		.loc 1 204 9 view .LVU112
 350 0086 0028     		cmp	r0, #0
 351 0088 E1D1     		bne	.L23
 352 008a D4E7     		b	.L21
 353              	.LVL24:
 354              	.L20:
 215:../common/lpcusb/target/usbcontrol.c **** 				DBG(iChunk > 0 ? "?" : "");
 355              		.loc 1 215 5 is_stmt 1 view .LVU113
 215:../common/lpcusb/target/usbcontrol.c **** 				DBG(iChunk > 0 ? "?" : "");
 356              		.loc 1 215 14 is_stmt 0 view .LVU114
 357 008c 0A46     		mov	r2, r1
 358              		.loc 1 228 1 view .LVU115
 359 008e BDE81040 		pop	{r4, lr}
 360              		.cfi_remember_state
 361              		.cfi_restore 14
 362              		.cfi_restore 4
 363              		.cfi_def_cfa_offset 0
 215:../common/lpcusb/target/usbcontrol.c **** 				DBG(iChunk > 0 ? "?" : "");
 364              		.loc 1 215 14 view .LVU116
 365 0092 FFF7FEBF 		b	USBHwEPRead
 366              	.LVL25:
 367              	.L15:
 368              		.cfi_restore_state
 220:../common/lpcusb/target/usbcontrol.c **** 		// IN transfer
 369              		.loc 1 220 7 is_stmt 1 view .LVU117
 220:../common/lpcusb/target/usbcontrol.c **** 		// IN transfer
 370              		.loc 1 220 10 is_stmt 0 view .LVU118
 371 0096 8028     		cmp	r0, #128
 372 0098 D9D0     		beq	.L23
 373              	.LVL26:
 374              	.L14:
 375              		.loc 1 228 1 view .LVU119
 376 009a 10BD     		pop	{r4, pc}
 377              	.L34:
 378              		.align	2
 379              	.L33:
 380 009c 00000000 		.word	.LANCHOR0
 381              		.cfi_endproc
 382              	.LFE3:
 384              		.section	.text.USBRegisterRequestHandler,"ax",%progbits
 385              		.align	1
 386              		.global	USBRegisterRequestHandler
 387              		.syntax unified
 388              		.thumb
 389              		.thumb_func
ARM GAS  /tmp/cc5dVR7o.s 			page 13


 390              		.fpu softvfp
 392              	USBRegisterRequestHandler:
 393              	.LVL27:
 394              	.LFB4:
 229:../common/lpcusb/target/usbcontrol.c **** 
 230:../common/lpcusb/target/usbcontrol.c **** 
 231:../common/lpcusb/target/usbcontrol.c **** /**
 232:../common/lpcusb/target/usbcontrol.c **** 	Registers a callback for handling requests
 233:../common/lpcusb/target/usbcontrol.c **** 		
 234:../common/lpcusb/target/usbcontrol.c **** 	@param [in]	iType			Type of request, e.g. REQTYPE_TYPE_STANDARD
 235:../common/lpcusb/target/usbcontrol.c **** 	@param [in]	*pfnHandler		Callback function pointer
 236:../common/lpcusb/target/usbcontrol.c **** 	@param [in]	*pbDataStore	Data storage area for this type of request
 237:../common/lpcusb/target/usbcontrol.c ****  */
 238:../common/lpcusb/target/usbcontrol.c **** void USBRegisterRequestHandler(int iType, TFnHandleRequest *pfnHandler, U8 *pbDataStore)
 239:../common/lpcusb/target/usbcontrol.c **** {
 395              		.loc 1 239 1 is_stmt 1 view -0
 396              		.cfi_startproc
 397              		@ args = 0, pretend = 0, frame = 0
 398              		@ frame_needed = 0, uses_anonymous_args = 0
 399              		@ link register save eliminated.
 400              		.loc 1 239 1 is_stmt 0 view .LVU121
 240:../common/lpcusb/target/usbcontrol.c **** 	ASSERT(iType >= 0);
 401              		.loc 1 240 20 is_stmt 1 view .LVU122
 241:../common/lpcusb/target/usbcontrol.c **** 	ASSERT(iType < 4);
 402              		.loc 1 241 19 view .LVU123
 242:../common/lpcusb/target/usbcontrol.c **** 	apfnReqHandlers[iType] = pfnHandler;
 403              		.loc 1 242 2 view .LVU124
 404              		.loc 1 242 25 is_stmt 0 view .LVU125
 405 0000 024B     		ldr	r3, .L36
 406 0002 03EB8000 		add	r0, r3, r0, lsl #2
 407              	.LVL28:
 408              		.loc 1 242 25 view .LVU126
 409 0006 4161     		str	r1, [r0, #20]
 243:../common/lpcusb/target/usbcontrol.c **** 	apbDataStore[iType] = pbDataStore;
 410              		.loc 1 243 2 is_stmt 1 view .LVU127
 411              		.loc 1 243 22 is_stmt 0 view .LVU128
 412 0008 4262     		str	r2, [r0, #36]
 244:../common/lpcusb/target/usbcontrol.c **** }
 413              		.loc 1 244 1 view .LVU129
 414 000a 7047     		bx	lr
 415              	.L37:
 416              		.align	2
 417              	.L36:
 418 000c 00000000 		.word	.LANCHOR0
 419              		.cfi_endproc
 420              	.LFE4:
 422              		.bss
 423              		.align	2
 424              		.set	.LANCHOR0,. + 0
 427              	iResidue:
 428 0000 00000000 		.space	4
 431              	pbData:
 432 0004 00000000 		.space	4
 435              	Setup:
 436 0008 00000000 		.space	8
 436      00000000 
 439              	iLen:
ARM GAS  /tmp/cc5dVR7o.s 			page 14


 440 0010 00000000 		.space	4
 443              	apfnReqHandlers:
 444 0014 00000000 		.space	16
 444      00000000 
 444      00000000 
 444      00000000 
 447              	apbDataStore:
 448 0024 00000000 		.space	16
 448      00000000 
 448      00000000 
 448      00000000 
 449              		.text
 450              	.Letext0:
 451              		.file 2 "../common/lpcusb/target/type.h"
 452              		.file 3 "../common/lpcusb/target/usbstruct.h"
 453              		.file 4 "../common/lpcusb/target/usbapi.h"
ARM GAS  /tmp/cc5dVR7o.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbcontrol.c
     /tmp/cc5dVR7o.s:16     .text.DataIn:0000000000000000 $t
     /tmp/cc5dVR7o.s:23     .text.DataIn:0000000000000000 DataIn
     /tmp/cc5dVR7o.s:76     .text.DataIn:0000000000000024 $d
     /tmp/cc5dVR7o.s:81     .text._HandleRequest.constprop.0:0000000000000000 $t
     /tmp/cc5dVR7o.s:87     .text._HandleRequest.constprop.0:0000000000000000 _HandleRequest.constprop.0
     /tmp/cc5dVR7o.s:172    .text._HandleRequest.constprop.0:0000000000000044 $d
     /tmp/cc5dVR7o.s:178    .text.USBHandleControlTransfer:0000000000000000 $t
     /tmp/cc5dVR7o.s:185    .text.USBHandleControlTransfer:0000000000000000 USBHandleControlTransfer
     /tmp/cc5dVR7o.s:380    .text.USBHandleControlTransfer:000000000000009c $d
     /tmp/cc5dVR7o.s:385    .text.USBRegisterRequestHandler:0000000000000000 $t
     /tmp/cc5dVR7o.s:392    .text.USBRegisterRequestHandler:0000000000000000 USBRegisterRequestHandler
     /tmp/cc5dVR7o.s:418    .text.USBRegisterRequestHandler:000000000000000c $d
     /tmp/cc5dVR7o.s:423    .bss:0000000000000000 $d
     /tmp/cc5dVR7o.s:427    .bss:0000000000000000 iResidue
     /tmp/cc5dVR7o.s:431    .bss:0000000000000004 pbData
     /tmp/cc5dVR7o.s:435    .bss:0000000000000008 Setup
     /tmp/cc5dVR7o.s:439    .bss:0000000000000010 iLen
     /tmp/cc5dVR7o.s:443    .bss:0000000000000014 apfnReqHandlers
     /tmp/cc5dVR7o.s:447    .bss:0000000000000024 apbDataStore

UNDEFINED SYMBOLS
USBHwEPWrite
USBFilterOsVendorMessage
USBHwEPRead
USBHwEPStall
